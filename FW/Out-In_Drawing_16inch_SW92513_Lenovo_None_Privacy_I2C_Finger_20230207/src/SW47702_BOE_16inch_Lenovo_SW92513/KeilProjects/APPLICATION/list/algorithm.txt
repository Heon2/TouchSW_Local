; generated by Component: ARM Compiler 5.06 update 4 (build 422) Tool: ArmCC [4d3604]
; commandline ArmCC [--c99 --list --split_sections --debug -c --asm --interleave -o.\bin\algorithm.o --asm_dir=.\list\ --list_dir=.\list\ --depend=.\bin\algorithm.d --cpu=Cortex-M3 --apcs=interwork -O3 -Otime --diag_suppress=9931 -I..\..\App -I..\..\App\Algorithm -I..\..\App\Algorithm\Baseline -I..\..\App\Algorithm\Coord -I..\..\App\Algorithm\Label -I..\..\App\Algorithm\Noise -I..\..\Env -I..\..\Hal -I..\..\Hal\system -I..\..\Hal\system\CMSIS -I..\..\Hal\gpio -I..\..\Hal\i2c -I..\..\Hal\pwmdrv -I..\..\Hal\timer -I..\..\Hal\wdgt -I..\..\Hal\spi -I..\..\Hal\dspA -I..\..\Hal\dspB -I..\..\Hal\scrb -I..\..\Hal\usb -I..\..\Hal\usb\FWOTG210_F000 -I..\..\Hal\usb\FWOTG210_F000\OTG_peripheral -I..\..\Hal\usb\FWOTG210_F000\OTG_peripheral_Config -I..\..\Hal\gdma -I..\..\Hal\flitf -I..\..\Module -I..\..\Module\SRIC -I..\..\Protocol -I..\..\Tool_BinCvt\BinToolApp\src -I..\..\Boot -I..\..\Parameter -I..\..\Hal\dbgserial -I..\..\Hal\tlvds -I..\..\Tuning_process -I.\RTE\_MFTP_FPGA -IC:\Keil_v5\ARM\PACK\ARM\CMSIS\5.0.1\Device\ARM\ARMCM3\Include -IC:\Keil_v5\ARM\CMSIS\Include -D__UVISION_VERSION=523 -DARMCM3 -D_USE_APP_80K_ --wchar32 --omf_browse=.\bin\algorithm.crf ..\..\App\Algorithm\algorithm.c]
                          THUMB

                          AREA ||i.GetOperTimeUS||, CODE, READONLY, ALIGN=2

                  GetOperTimeUS PROC
;;;463    uint32_t OperEndTime;
;;;464    void GetOperTimeUS(uint64_t* StartTime, uint32_t* ScanTime)
000000  b570              PUSH     {r4-r6,lr}
;;;465    {
000002  4605              MOV      r5,r0
000004  460e              MOV      r6,r1
000006  e9d50100          LDRD     r0,r1,[r5,#0]
00000a  2400              MOVS     r4,#0
;;;466    	uint16_t Temp = 0;
;;;467    
;;;468    	if (*StartTime == 0)
00000c  ea500201          ORRS     r2,r0,r1
000010  d00a              BEQ      |L1.40|
;;;469    	{
;;;470    		goto GETSCANTIME__GOTO_END;
;;;471    	}
;;;472    	
;;;473    	Temp = (uint16_t)(getElapsedUS(*StartTime));
000012  f7fffffe          BL       getElapsedLongSYSTICK
000016  4a0d              LDR      r2,|L1.76|
000018  6812              LDR      r2,[r2,#0]  ; _timer_clock_
00001a  4623              MOV      r3,r4
00001c  f7fffffe          BL       __aeabi_uldivmod
;;;474    	*ScanTime += Temp;
000020  6831              LDR      r1,[r6,#0]
000022  b280              UXTH     r0,r0                 ;473
000024  4408              ADD      r0,r0,r1
000026  6030              STR      r0,[r6,#0]
                  |L1.40|
;;;475    
;;;476    GETSCANTIME__GOTO_END:
;;;477    
;;;478    	*StartTime = (uint64_t)getLongSysTick();
000028  4809              LDR      r0,|L1.80|
00002a  6800              LDR      r0,[r0,#0]  ; _timertick_high_rank_count_
00002c  03a2              LSLS     r2,r4,#14
00002e  ea424290          ORR      r2,r2,r0,LSR #18
000032  0381              LSLS     r1,r0,#14
000034  f04f4080          MOV      r0,#0x40000000
000038  f8d001b8          LDR      r0,[r0,#0x1b8]
00003c  f3c0000d          UBFX     r0,r0,#0,#14
000040  4308              ORRS     r0,r0,r1
000042  ea420104          ORR      r1,r2,r4
000046  e9c50100          STRD     r0,r1,[r5,#0]
;;;479    }
00004a  bd70              POP      {r4-r6,pc}
;;;480    
                          ENDP

                  |L1.76|
                          DCD      _timer_clock_
                  |L1.80|
                          DCD      _timertick_high_rank_count_

                          AREA ||i.algorithm_CheckFingerIdleModeControl||, CODE, READONLY, ALIGN=2

                  algorithm_CheckFingerIdleModeControl PROC
;;;202    #if USED_IDLE_MODE_CONTROL
;;;203    bool_t algorithm_CheckFingerIdleModeControl(void)
000000  b570              PUSH     {r4-r6,lr}
;;;204    {
;;;205    	eSENSING_MODE_t eSensingMode = HAL_GetSensingMode();
000002  f7fffffe          BL       HAL_GetSensingMode
;;;206    
;;;207    	if(IS_ACTIVE_MODE(eSensingMode))
;;;208    	{
;;;209    		if(thisInfo->bTouchExpect)
000006  4c1d              LDR      r4,|L2.124|
000008  4605              MOV      r5,r0                 ;205
00000a  f0100f01          TST      r0,#1                 ;207
;;;210    		{
;;;211    			thisInfo->ulIdleModeEnterCheckCount = 0;
;;;212    		}
;;;213    		else
;;;214    		{
;;;215    	#if USED_ENTER_IDLE_REAL_TIME_CHECK
;;;216    			if(thisInfo->ulIdleModeEnterCheckCount == 0)
;;;217    			{
;;;218    				TimerTick_ResetIdleModeCheckTime();
;;;219    				thisInfo->ulIdleModeEnterCheckCount++;
;;;220    			}
;;;221    	#else /* USED_ENTER_IDLE_REAL_TIME_CHECK */
;;;222    			thisInfo->ulIdleModeEnterCheckCount++;
;;;223    	#endif /* USED_ENTER_IDLE_REAL_TIME_CHECK */
;;;224    
;;;225    #if USED_NOISE_HOPPING_FREQ
;;;226    	#if USED_ENTER_IDLE_REAL_TIME_CHECK
;;;227    			if(IS_ACTIVE_MODE_FRQ_MAIN(eSensingMode))
;;;228    			{
;;;229    				if(TimerTick_GetIdleModeCheckTimeSec() >= thisInfo->ulIdleModeEnterFrameCntTHD)
;;;230    				{
;;;231    					thisInfo->ulIdleModeEnterCheckCount = 0;
;;;232    					HAL_SetSensingChangeMode(SM_CHANGE_IDLE_MODE);
;;;233    					return YES;
;;;234    				}
;;;235    			}
;;;236    	#else /* USED_ENTER_IDLE_REAL_TIME_CHECK */
;;;237    			if(IS_ACTIVE_MODE_FRQ_MAIN(eSensingMode))
;;;238    			{
;;;239    				if(thisInfo->ulIdleModeEnterCheckCount > thisInfo->ulIdleModeEnterFrameCntTHD)
;;;240    				{
;;;241    					thisInfo->ulIdleModeEnterCheckCount = 0;
;;;242    					HAL_SetSensingChangeMode(SM_CHANGE_IDLE_MODE);
;;;243    					return YES;
;;;244    				}
;;;245    			}
;;;246    			else
;;;247    			{
;;;248    				if(thisInfo->ulIdleModeEnterCheckCount > thisInfo->ulHopFrqIdleModeFrameCntTHD)
;;;249    				{
;;;250    //					HoppingInitFlag = YES;
;;;251    					thisInfo->ulIdleModeEnterCheckCount = 0;
;;;252    					return YES;
;;;253    				}
;;;254    			}
;;;255    	#endif /* USED_ENTER_IDLE_REAL_TIME_CHECK */
;;;256    #else /* USED_NOISE_HOPPING_FREQ */
;;;257    	#if USED_ENTER_IDLE_REAL_TIME_CHECK
;;;258    			if(TimerTick_GetIdleModeCheckTimeSec() >= thisInfo->ulIdleModeEnterFrameCntTHD)
;;;259    			{
;;;260    				thisInfo->ulIdleModeEnterCheckCount = 0;
;;;261    				HAL_SetSensingChangeMode(SM_CHANGE_IDLE_MODE);
;;;262    				return YES;
;;;263    			}
;;;264    	#else /* USED_ENTER_IDLE_REAL_TIME_CHECK */
;;;265    			if(thisInfo->ulIdleModeEnterCheckCount > thisInfo->ulIdleModeEnterFrameCntTHD)
;;;266    			{
;;;267    				thisInfo->ulIdleModeEnterCheckCount = 0;
;;;268    				HAL_SetSensingChangeMode(SM_CHANGE_IDLE_MODE);
;;;269    				return YES;
;;;270    			}
;;;271    	#endif /* USED_ENTER_IDLE_REAL_TIME_CHECK */
;;;272    #endif /* USED_NOISE_HOPPING_FREQ */
;;;273    		}
;;;274    	}
;;;275    	else
;;;276    	{
;;;277    		if(thisInfo->bTouchExpect)
00000e  69a0              LDR      r0,[r4,#0x18]  ; thisInfo
000010  f5005080          ADD      r0,r0,#0x1000
000014  d027              BEQ      |L2.102|
000016  f890132e          LDRB     r1,[r0,#0x32e]        ;209
00001a  2600              MOVS     r6,#0                 ;209
00001c  2900              CMP      r1,#0                 ;209
00001e  bf18              IT       NE                    ;211
000020  f8c063c0          STRNE    r6,[r0,#0x3c0]        ;211
000024  d127              BNE      |L2.118|
000026  f8d003c0          LDR      r0,[r0,#0x3c0]        ;216
00002a  b948              CBNZ     r0,|L2.64|
00002c  f7fffffe          BL       TimerTick_ResetIdleModeCheckTime
000030  69a0              LDR      r0,[r4,#0x18]         ;219  ; thisInfo
000032  f5005080          ADD      r0,r0,#0x1000         ;219
000036  f8d013c0          LDR      r1,[r0,#0x3c0]        ;219
00003a  1c49              ADDS     r1,r1,#1              ;219
00003c  f8c013c0          STR      r1,[r0,#0x3c0]        ;219
                  |L2.64|
000040  f0150f02          TST      r5,#2                 ;227
000044  d017              BEQ      |L2.118|
000046  f7fffffe          BL       TimerTick_GetIdleModeCheckTimeSec
00004a  69a1              LDR      r1,[r4,#0x18]         ;229  ; thisInfo
00004c  f5015180          ADD      r1,r1,#0x1000         ;229
000050  f8d123bc          LDR      r2,[r1,#0x3bc]        ;229
000054  4282              CMP      r2,r0                 ;229
000056  d80e              BHI      |L2.118|
000058  2001              MOVS     r0,#1                 ;232
00005a  f8c163c0          STR      r6,[r1,#0x3c0]        ;232
00005e  f7fffffe          BL       HAL_SetSensingChangeMode
000062  2001              MOVS     r0,#1                 ;233
;;;278    		{
;;;279    			/*
;;;280    			 * NOTE : Idle -> Active Is Always Normal Frequency Operation
;;;281    			 */
;;;282    #if USED_FULLSCAN_SWITCH_IDLE_TO_ACTIVE
;;;283    			HAL_SetSensingChangeMode(SM_CHANGE_FULLSCAN_IDLE_MODE);
;;;284    #else /* USED_FULLSCAN_SWITCH_IDLE_TO_ACTIVE */
;;;285    	#if USED_FAST_SWITCH_IDLE_TO_ACTIVE
;;;286    			HAL_SetSensingChangeMode(SM_FAST_CHANGE_ACTIVE_MODE);
;;;287    	#else /* USED_FAST_SWITCH_IDLE_TO_ACTIVE */
;;;288    			HAL_SetSensingChangeMode(SM_CHANGE_ACTIVE_MODE);
;;;289    	#endif /* USED_FAST_SWITCH_IDLE_TO_ACTIVE */
;;;290    #endif /* USED_FULLSCAN_SWITCH_IDLE_TO_ACTIVE */
;;;291    #if USED_IDLE_CORNER_EDGE_DEBOUNC_DISABLE
;;;292    			thisInfo->bIsIdleToActive = YES;
;;;293    #endif /* USED_IDLE_CORNER_EDGE_DEBOUNC_DISABLE */
;;;294    
;;;295    			return YES;
;;;296    		}
;;;297    	}
;;;298    
;;;299    	return NO;
;;;300    }
000064  bd70              POP      {r4-r6,pc}
                  |L2.102|
000066  f890032e          LDRB     r0,[r0,#0x32e]        ;277
00006a  b120              CBZ      r0,|L2.118|
00006c  2004              MOVS     r0,#4                 ;283
00006e  f7fffffe          BL       HAL_SetSensingChangeMode
000072  2001              MOVS     r0,#1                 ;295
000074  bd70              POP      {r4-r6,pc}
                  |L2.118|
000076  2000              MOVS     r0,#0                 ;299
000078  bd70              POP      {r4-r6,pc}
;;;301    #endif /* USED_IDLE_MODE_CONTROL */
                          ENDP

00007a  0000              DCW      0x0000
                  |L2.124|
                          DCD      ||area_number.25||

                          AREA ||i.algorithm_Check_Mux_Delta||, CODE, READONLY, ALIGN=2

                  algorithm_Check_Mux_Delta PROC
;;;2637   
;;;2638   bool_t algorithm_Check_Mux_Delta(uint8_t _mux_num, uint8_t _col, uint16_t _delta_thd, bool_t _bUpperCnt)
000000  e92d03f0          PUSH     {r4-r9}
;;;2639   {
000004  4606              MOV      r6,r0
;;;2640   	bool_t bResult = NO;
000006  2000              MOVS     r0,#0
;;;2641   	uint8_t i, size, ucDeltaCnt;
;;;2642   	int16_t data;
;;;2643   
;;;2644   	ucDeltaCnt = 0;
000008  4604              MOV      r4,r0
;;;2645   	size = (_mux_num == LAST_MUX_NUM ? LAST_MUX_ROW : ROW_PER_MUX);
00000a  2e09              CMP      r6,#9
00000c  bf0c              ITE      EQ
00000e  2703              MOVEQ    r7,#3
000010  2705              MOVNE    r7,#5
;;;2646   
;;;2647   	for (i=0; i<size; i++)
000012  2500              MOVS     r5,#0
;;;2648   	{
;;;2649   		data = HAL_READ_DELTA_IMAGE((_mux_num * ROW_PER_MUX) + i, _col);
;;;2650   
;;;2651   		if (_bUpperCnt)
;;;2652   		{
;;;2653   			if (data >= _delta_thd)
000014  f8df8048          LDR      r8,|L3.96|
000018  46bc              MOV      r12,r7                ;2647
00001a  eb060686          ADD      r6,r6,r6,LSL #2
;;;2654   				ucDeltaCnt++;
;;;2655   		}
;;;2656   		else
;;;2657   		{
;;;2658   			if (data < _delta_thd)
00001e  bf00              NOP      
                  |L3.32|
000020  eb060905          ADD      r9,r6,r5
000024  ebc909c9          RSB      r9,r9,r9,LSL #3
000028  eb090949          ADD      r9,r9,r9,LSL #1
00002c  eb0809c9          ADD      r9,r8,r9,LSL #3
000030  eb090941          ADD      r9,r9,r1,LSL #1
000034  f5094970          ADD      r9,r9,#0xf000
000038  f9b996c0          LDRSH    r9,[r9,#0x6c0]
00003c  b113              CBZ      r3,|L3.68|
00003e  4591              CMP      r9,r2                 ;2653
000040  da02              BGE      |L3.72|
000042  e003              B        |L3.76|
                  |L3.68|
000044  4591              CMP      r9,r2
000046  da01              BGE      |L3.76|
                  |L3.72|
000048  1c64              ADDS     r4,r4,#1
;;;2659   				ucDeltaCnt++;
00004a  b2e4              UXTB     r4,r4
                  |L3.76|
00004c  1c6d              ADDS     r5,r5,#1
00004e  f1bc0c01          SUBS     r12,r12,#1
;;;2660   		}
;;;2661   	}
000052  d1e5              BNE      |L3.32|
;;;2662   
;;;2663   	if (ucDeltaCnt >= size)
000054  42bc              CMP      r4,r7
;;;2664   		bResult = YES;
000056  bf28              IT       CS
000058  2001              MOVCS    r0,#1
;;;2665   
;;;2666   	return bResult;
;;;2667   }
00005a  e8bd03f0          POP      {r4-r9}
00005e  4770              BX       lr
;;;2668   #endif /* USED_ESD_RECOVERY_GHOST_TOUCH_DELTA_PATTERN */
                          ENDP

                  |L3.96|
                          DCD      FullSharedBuff

                          AREA ||i.algorithm_OutInCheck||, CODE, READONLY, ALIGN=2

                  algorithm_OutInCheck PROC
;;;1044   tXY_t testcrood;
;;;1045   void algorithm_OutInCheck(void)
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;1046   {
;;;1047   	if(thisInfo->bIsOutIn == YES){
000004  4c21              LDR      r4,|L4.140|
000006  f241302b          MOV      r0,#0x132b
00000a  69a1              LDR      r1,[r4,#0x18]  ; thisInfo
00000c  5c40              LDRB     r0,[r0,r1]
00000e  2801              CMP      r0,#1
;;;1048   		for(int i=MAX_TOUCH_; i--; ){
;;;1049   			if(thisInfo->tCoord.bOutInFlag[i]==YES && thisInfo->tCoord.tPastPos[0].vusS[i] > 0){
;;;1050   				//thisInfo->tCoord.tPos.tXY[i] = thisInfo->tCoord.tOutInPos.tXY[i];
;;;1051   				
;;;1052   				thisInfo->tCoord.tPos.tXY[i].x = (thisInfo->tCoord.tOrgPos.tXY[i].x + thisInfo->tCoord.tPastPos[0].tXY[i].x)/2;
;;;1053   				thisInfo->tCoord.tPos.tXY[i].y = (thisInfo->tCoord.tOrgPos.tXY[i].y + thisInfo->tCoord.tPastPos[0].tXY[i].y)/2;
;;;1054   				
;;;1055   //				thisInfo->tCoord.tPos.tXY[i] = thisInfo->tCoord.tFirstOutInPos.tXY[i];
;;;1056   //				thisInfo->tCoord.tPos.vusS[i] = thisInfo->tCoord.tFirstOutInPos.vusS[i];
;;;1057   //				testvusS = thisInfo->tCoord.tFirstOutInPos.vusS[i];
;;;1058   				
;;;1059   				//testcrood = thisInfo->tCoord.tPos.tXY[i];
;;;1060   				thisInfo->tCoord.bOutInFlag[i] = NO;
;;;1061   				thisInfo->tCoord.bOutInFlag2[i] = NO;
;;;1062   			}
;;;1063   		}
;;;1064   	
;;;1065   		algorithm_PendTouchEvent();
;;;1066   		//algorithm_coord_UpdatePosHistoryInfo();
;;;1067   		algorithm_coord_UpdatePosHistoryInfo_OutInDrawing();
;;;1068   		
;;;1069   		thisInfo->bIsOutIn = NO;
;;;1070   		pendflag++;
;;;1071   		
;;;1072   //		for(int i=MAX_TOUCH_; i--; ){
;;;1073   //			if(thisInfo->tCoord.bOutInFlag[i]==YES && thisInfo->tCoord.tPastPos[0].vusS[i] > 0){
;;;1074   //				thisInfo->tCoord.bOutInFlag[i] = NO;
;;;1075   //				thisInfo->tCoord.bOutInFlag2[i] = NO;
;;;1076   //			}
;;;1077   //		}
;;;1078   	}
;;;1079   }
000010  bf18              IT       NE
000012  e8bd81f0          POPNE    {r4-r8,pc}
000016  200a              MOVS     r0,#0xa               ;1048
000018  2301              MOVS     r3,#1                 ;1048
00001a  2500              MOVS     r5,#0                 ;1048
                  |L4.28|
00001c  1e40              SUBS     r0,r0,#1              ;1048
00001e  eb010c00          ADD      r12,r1,r0             ;1049
000022  f89c2ff1          LDRB     r2,[r12,#0xff1]       ;1049
000026  2a01              CMP      r2,#1                 ;1049
000028  d11e              BNE      |L4.104|
00002a  eb010240          ADD      r2,r1,r0,LSL #1       ;1049
00002e  f8b226fb          LDRH     r2,[r2,#0x6fb]        ;1049
000032  b1ca              CBZ      r2,|L4.104|
000034  eb0102c0          ADD      r2,r1,r0,LSL #3       ;1052
000038  f8d26908          LDR      r6,[r2,#0x908]        ;1052
00003c  f8d276ab          LDR      r7,[r2,#0x6ab]        ;1052
000040  443e              ADD      r6,r6,r7              ;1052
000042  eb0676d6          ADD      r6,r6,r6,LSR #31      ;1052
000046  1076              ASRS     r6,r6,#1              ;1052
000048  f8c2649f          STR      r6,[r2,#0x49f]        ;1052
00004c  f8d2690c          LDR      r6,[r2,#0x90c]        ;1053
000050  f8d276af          LDR      r7,[r2,#0x6af]        ;1053
000054  443e              ADD      r6,r6,r7              ;1053
000056  eb0676d6          ADD      r6,r6,r6,LSR #31      ;1053
00005a  1076              ASRS     r6,r6,#1              ;1053
00005c  f8c264a3          STR      r6,[r2,#0x4a3]        ;1053
000060  f88c5ff1          STRB     r5,[r12,#0xff1]       ;1060
000064  f88c5ffb          STRB     r5,[r12,#0xffb]       ;1061
                  |L4.104|
000068  1c5b              ADDS     r3,r3,#1              ;1061
00006a  2b0a              CMP      r3,#0xa               ;1061
00006c  ddd6              BLE      |L4.28|
00006e  f7fffffe          BL       algorithm_PendTouchEvent
000072  f7fffffe          BL       algorithm_coord_UpdatePosHistoryInfo_OutInDrawing
000076  69a0              LDR      r0,[r4,#0x18]         ;1069  ; thisInfo
000078  f5005080          ADD      r0,r0,#0x1000         ;1069
00007c  f880532b          STRB     r5,[r0,#0x32b]        ;1069
000080  6860              LDR      r0,[r4,#4]            ;1070  ; pendflag
000082  1c40              ADDS     r0,r0,#1              ;1070
000084  6060              STR      r0,[r4,#4]            ;1070  ; pendflag
000086  e8bd81f0          POP      {r4-r8,pc}
;;;1080   
                          ENDP

00008a  0000              DCW      0x0000
                  |L4.140|
                          DCD      ||area_number.25||

                          AREA ||i.algorithm_PendTouchEvent||, CODE, READONLY, ALIGN=2

                  algorithm_PendTouchEvent PROC
;;;1087   //extern uint8_t	g_ConnectedDevice;
;;;1088   void algorithm_PendTouchEvent(void)
000000  e92d4ff0          PUSH     {r4-r11,lr}
;;;1089   {
000004  b087              SUB      sp,sp,#0x1c
;;;1090   	int i;
;;;1091   	int distX, distY;
;;;1092   	tXY_t pos, old_pos;
;;;1093   	uint8_t ucMoveTHD_X,ucMoveTHD_Y;
;;;1094   
;;;1095   #if (ID_MAPPING_CHANGE)
;;;1096   static uint8_t NewID = 50;
;;;1097   static uint8_t Id_Map[MAX_TOUCH_] = {0,};
;;;1098   static uint16_t NonTouchCnt = 0;
;;;1099   #endif
;;;1100   
;;;1101   	hal_set_overlap_pen();
000006  f7fffffe          BL       hal_set_overlap_pen
;;;1102   
;;;1103   	memset(HID_status,0,HID_MAX_TOUCH);
00000a  48ee              LDR      r0,|L5.964|
00000c  f7fffffe          BL       __ARM_common_memclr4_10
;;;1104   	memset(HID_id,0,HID_MAX_TOUCH);
000010  48ed              LDR      r0,|L5.968|
000012  f7fffffe          BL       __ARM_common_memclr4_10
;;;1105   	memset(HID_x,0,HID_MAX_TOUCH);
000016  48ed              LDR      r0,|L5.972|
000018  f7fffffe          BL       __ARM_common_memclr4_10
;;;1106   	memset(HID_y,0,HID_MAX_TOUCH);
00001c  48ec              LDR      r0,|L5.976|
00001e  f7fffffe          BL       __ARM_common_memclr4_10
;;;1107   
;;;1108   	eSWIPPacketFormatId_t id = protocol_swip_GetPacketFormatId();
000022  f7fffffe          BL       protocol_swip_GetPacketFormatId
000026  4682              MOV      r10,r0
;;;1109   #define SET_POS(tItem, pos)  \
;;;1110   	do{    \
;;;1111   			(tItem).tItem00.ucXHigh = ((pos).x >> 8) & 0xFF;    \
;;;1112   			(tItem).tItem00.ucYHigh = ((pos).y >> 8) & 0xFF;    \
;;;1113   			(tItem).tItem00.ucXLow = (pos).x & 0xFF;    \
;;;1114   			(tItem).tItem00.ucYLow = (pos).y & 0xFF;    \
;;;1115   		} while(0)
;;;1116   
;;;1117   	//if(g_ConnectedDevice == I2C_CONNECT_PC)
;;;1118   	{
;;;1119   		protocol_swip_InitTouchEventBuffer();
000028  f7fffffe          BL       protocol_swip_InitTouchEventBuffer
;;;1120   		//    protocol_hid_InitTouchEventBuffer();
;;;1121   	}
;;;1122   	
;;;1123   	hid_index=0;
00002c  48e9              LDR      r0,|L5.980|
;;;1124   	
;;;1125   #if (SWIP_QUEUE_MODE)
;;;1126   	thisInfo->bQueueStart 	= 0;
00002e  4dea              LDR      r5,|L5.984|
000030  2600              MOVS     r6,#0                 ;1123
000032  6006              STR      r6,[r0,#0]  ; hid_index
000034  69a9              LDR      r1,[r5,#0x18]  ; thisInfo
000036  f5015080          ADD      r0,r1,#0x1000
00003a  f88063ac          STRB     r6,[r0,#0x3ac]
;;;1127   	#if (SWIP_QUEUE_MODE == 2)
;;;1128   		thisInfo->bTouchOffFlag	= 0;
00003e  f88063ad          STRB     r6,[r0,#0x3ad]
;;;1129   	#endif
;;;1130   #endif
;;;1131   
;;;1132   #if USED_SHARP_SPECIFIC_PROTOCOL
;;;1133   	tTouchItemType_t touchItemType;
;;;1134   	memset(&touchItemType, 0, sizeof(tTouchItemType_t));
;;;1135   	/*
;;;1136   	 * TODO : finger mode¸¦ ±âº»À¸·Î ¼³Á¤.
;;;1137   	 * algorithmÀ» °ÅÄ£ ÈÄ touch type¿¡ µû¸¥ flag¸¦ setting ÇØ¾ß ÇÔ.
;;;1138   	 */
;;;1139   	touchItemType.active_stylus_hover = YES;
;;;1140   	touchItemType.active_stylus = YES;
;;;1141   	touchItemType.passive_stylus = YES;
;;;1142   #endif /* USED_SHARP_SPECIFIC_PROTOCOL */
;;;1143   
;;;1144   #ifdef LocalFingerNoiseRemove
;;;1145   	#if (PEN_FINGER_1TOUCH_REPORT == NO)
;;;1146   	if(thisInfo->bLocal_sensing == YES /*&& thisInfo->tCoord_local_dsp.PenContactCnt < 100*/)
;;;1147   	{	
;;;1148   		uint8_t Label_num = 0;
;;;1149   		for( i=MAX_TOUCH_; i--; )
;;;1150   		{		
;;;1151   			if (thisInfo->tCoord.tPos.vusS[i] > 0)
;;;1152   			{
;;;1153   				Label_num++;
;;;1154   			}
;;;1155   		}
;;;1156   	
;;;1157   		for( i=MAX_TOUCH_; i--; )
;;;1158   		{
;;;1159   			distX = algorithm_coord_calc_distance(thisInfo->tCoord.tPos.tXY[i], thisInfo->tCoord_local_dsp.tPos.tXY);
;;;1160   			
;;;1161   			if( distX > 1024 && ((thisInfo->tCoord.tPos.MaxDelta[i] > thisModeConf->CoordTracking.sFirstTouchOnMaxCellVal && Label_num > 1) || (thisInfo->tCoord.tPos.MaxDelta[i] > (thisModeConf->CoordTracking.sFirstTouchOnMaxCellVal+20) && Label_num == 1)) )
;;;1162   			{
;;;1163   			}
;;;1164   			else
;;;1165   			{
;;;1166   				thisInfo->tCoord.tPos.vusS[i] = 0;
;;;1167   				thisInfo->tCoord.cScreenDebCnt[i] = 0;
;;;1168   			}
;;;1169   		}
;;;1170   	}
;;;1171   	#endif
;;;1172   #endif
;;;1173   	
;;;1174   	if(thisModeConf->Palm.bPalm_WholeTouchRemove && thisInfo->bIsPalm == YES)
000042  696a              LDR      r2,[r5,#0x14]  ; thisModeConf
000044  f892220a          LDRB     r2,[r2,#0x20a]
000048  b1a2              CBZ      r2,|L5.116|
00004a  f890032a          LDRB     r0,[r0,#0x32a]
00004e  2801              CMP      r0,#1
000050  d110              BNE      |L5.116|
;;;1175   	{
;;;1176   		for( i=MAX_TOUCH_; i--; )thisInfo->tCoord.tPos.vusS[i] = 0;
000052  200a              MOVS     r0,#0xa
000054  2201              MOVS     r2,#1
000056  1c43              ADDS     r3,r0,#1
                  |L5.88|
000058  f1a00c01          SUB      r12,r0,#1
00005c  eb010c4c          ADD      r12,r1,r12,LSL #1
000060  1e80              SUBS     r0,r0,#2
000062  f8ac64ef          STRH     r6,[r12,#0x4ef]
000066  eb010c40          ADD      r12,r1,r0,LSL #1
00006a  1c92              ADDS     r2,r2,#2
00006c  f8ac64ef          STRH     r6,[r12,#0x4ef]
000070  429a              CMP      r2,r3
000072  dbf1              BLT      |L5.88|
                  |L5.116|
;;;1177   	}
;;;1178   
;;;1179   #if BIG_FINGER_EDGE_ACC_TEST_ALGO_EN	
;;;1180   	algorithm_EdgeReportDelay();
;;;1181   #endif
;;;1182   	
;;;1183   	for (i = 0; i < MAX_TOUCH_; i++)
000074  2400              MOVS     r4,#0
000076  f04f0b01          MOV      r11,#1                ;1174
                  |L5.122|
;;;1184   	{
;;;1185   		//        bool_t bIsHover = NO;
;;;1186   		if (thisInfo->tCoord.tPastSentPos.vusS[i] > 0)
00007a  69a8              LDR      r0,[r5,#0x18]  ; thisInfo
00007c  eb000144          ADD      r1,r0,r4,LSL #1
000080  f8b12cce          LDRH     r2,[r1,#0xcce]
000084  b3a2              CBZ      r2,|L5.240|
;;;1187   		{
;;;1188   //			old_pos = thisInfo->tCoord.tPastSentPos.tXY[i];
;;;1189   //			alogorithm_coord_modify_pos(&old_pos,&old_pos, i);
;;;1190   			old_pos.x = thisInfo->tCoord.tRealPastSentPos.tXY[i].x;
000086  eb0002c4          ADD      r2,r0,r4,LSL #3
00008a  f8d23d1f          LDR      r3,[r2,#0xd1f]
;;;1191   			old_pos.y = thisInfo->tCoord.tRealPastSentPos.tXY[i].y;
00008e  9302              STR      r3,[sp,#8]
000090  f8d23d23          LDR      r3,[r2,#0xd23]
;;;1192   			
;;;1193   			//Heon
;;;1194   			if(thisInfo->tCoord.bOutInFlag2[i] == YES && thisInfo->bIsOutIn == YES && thisInfo->tCoord.bOutInFlag[i] == NO && thisInfo->tCoord.tPastPos[1].vusS[i] > 0){
000094  9303              STR      r3,[sp,#0xc]
000096  1903              ADDS     r3,r0,r4
000098  f893cffb          LDRB     r12,[r3,#0xffb]
00009c  f1bc0f01          CMP      r12,#1
0000a0  d117              BNE      |L5.210|
0000a2  f2413c2b          MOV      r12,#0x132b
0000a6  f81cc000          LDRB     r12,[r12,r0]
0000aa  f1bc0f01          CMP      r12,#1
0000ae  bf04              ITT      EQ
0000b0  f893cff1          LDRBEQ   r12,[r3,#0xff1]
0000b4  f1bc0f00          CMPEQ    r12,#0
0000b8  d11a              BNE      |L5.240|
0000ba  f8b1c774          LDRH     r12,[r1,#0x774]
0000be  f1bc0f00          CMP      r12,#0
0000c2  d015              BEQ      |L5.240|
;;;1195   				old_pos.x = thisInfo->tCoord.tPastPos[1].tXY[i].x;		//outinì´ ì•„ë‹Œ ìƒí™©ì—ì„œëŠ” ì¤‘ë³µëœ ì¢Œí‘œë¥¼ ë‚´ë³´ë‚´ê¸° ë•Œë¬¸
0000c4  f8d2c724          LDR      r12,[r2,#0x724]
;;;1196   				old_pos.y = thisInfo->tCoord.tPastPos[1].tXY[i].y;
0000c8  f8cdc008          STR      r12,[sp,#8]
0000cc  f8d22728          LDR      r2,[r2,#0x728]
0000d0  9203              STR      r2,[sp,#0xc]
                  |L5.210|
;;;1197   			}
;;;1198   			
;;;1199   			if(thisInfo->bIsOutIn == YES && thisInfo->tCoord.bOutInFlag[i] == NO && thisInfo->tCoord.tPastPos[1].vusS[i] > 0){
0000d2  f241322b          MOV      r2,#0x132b
0000d6  5c12              LDRB     r2,[r2,r0]
0000d8  2a01              CMP      r2,#1
0000da  bf04              ITT      EQ
0000dc  f8932ff1          LDRBEQ   r2,[r3,#0xff1]
0000e0  2a00              CMPEQ    r2,#0
0000e2  d105              BNE      |L5.240|
0000e4  f8b12774          LDRH     r2,[r1,#0x774]
0000e8  2a00              CMP      r2,#0
;;;1200   				thisInfo->tCoord.bOutInFlag2[i] = YES;	//outinì´ ì•„ë‹Œ ìƒí™©
0000ea  bf18              IT       NE
0000ec  f883bffb          STRBNE   r11,[r3,#0xffb]
                  |L5.240|
;;;1201   			}
;;;1202   			//
;;;1203   		}
;;;1204   
;;;1205   		if (thisInfo->tCoord.tPos.vusS[i] > 0)
0000f0  f8b124ef          LDRH     r2,[r1,#0x4ef]
0000f4  b342              CBZ      r2,|L5.328|
;;;1206   		{
;;;1207   			pos = thisInfo->tCoord.tPos.tXY[i];			
0000f6  eb0000c4          ADD      r0,r0,r4,LSL #3
0000fa  f8d0249f          LDR      r2,[r0,#0x49f]
0000fe  9200              STR      r2,[sp,#0]
000100  f8d004a3          LDR      r0,[r0,#0x4a3]
;;;1208   			
;;;1209   
;;;1210   				
;;;1211   //			if(thisModeConf->Palm.ucPalmDrawingOn > 1)
;;;1212   //				algorithm_width_height_calculation(i);
;;;1213   
;;;1214   			if (thisInfo->tCoord.tPastSentPos.vusS[i] > 0)
000104  9001              STR      r0,[sp,#4]
000106  f8b10cce          LDRH     r0,[r1,#0xcce]
;;;1215   				alogorithm_coord_modify_pos(&old_pos,&pos, i);
;;;1216   			else
;;;1217   				alogorithm_coord_modify_pos(&pos, &pos, i);
00010a  4622              MOV      r2,r4
00010c  2800              CMP      r0,#0                 ;1214
00010e  4669              MOV      r1,sp
000110  bf0c              ITE      EQ
000112  4608              MOVEQ    r0,r1
000114  a802              ADDNE    r0,sp,#8              ;1215
000116  f7fffffe          BL       alogorithm_coord_modify_pos
;;;1218   			
;;;1219   			if(testcnt < 10)		//Heon
00011a  68a8              LDR      r0,[r5,#8]  ; testcnt
00011c  280a              CMP      r0,#0xa
00011e  da08              BGE      |L5.306|
;;;1220   				testArray[testcnt++] = pos;
000120  49ae              LDR      r1,|L5.988|
000122  eb0101c0          ADD      r1,r1,r0,LSL #3
000126  1c40              ADDS     r0,r0,#1
000128  60a8              STR      r0,[r5,#8]  ; testcnt
00012a  e9dd0200          LDRD     r0,r2,[sp,#0]
00012e  6008              STR      r0,[r1,#0]
000130  604a              STR      r2,[r1,#4]
                  |L5.306|
;;;1221   			
;;;1222   			if(thisInfo->bIsOutIn == YES){
000132  69a8              LDR      r0,[r5,#0x18]  ; thisInfo
000134  f5005080          ADD      r0,r0,#0x1000
000138  f890032b          LDRB     r0,[r0,#0x32b]
00013c  2801              CMP      r0,#1
00013e  bf04              ITT      EQ
000140  e9dd0100          LDRDEQ   r0,r1,[sp,#0]
000144  e9c5010a          STRDEQ   r0,r1,[r5,#0x28]
                  |L5.328|
;;;1223   				realOutInPos = pos;
;;;1224   			}
;;;1225   		}
;;;1226   		//Heon
;;;1227   		if(thisInfo->tCoord.tPos.vusS[0] == 0){
000148  69a9              LDR      r1,[r5,#0x18]  ; thisInfo
00014a  f8b104ef          LDRH     r0,[r1,#0x4ef]
00014e  2800              CMP      r0,#0
;;;1228   			testcnt = 0;
000150  bf08              IT       EQ
000152  60ae              STREQ    r6,[r5,#8]  ; testcnt
;;;1229   		}
;;;1230   		//
;;;1231   		if (thisInfo->tCoord.tPos.vusS[i] > 0)
000154  eb010044          ADD      r0,r1,r4,LSL #1
000158  f8b024ef          LDRH     r2,[r0,#0x4ef]
00015c  2a00              CMP      r2,#0
00015e  d07c              BEQ      |L5.602|
;;;1232   		{
;;;1233   #if BIG_FINGER_EDGE_ACC_TEST_ALGO_EN
;;;1234   			if(i == 0)algorithm_BigFingerEdgeAccTest(&pos,&old_pos,0);
;;;1235   #endif
;;;1236   			
;;;1237   			distX = pos.x - old_pos.x;
000160  9b02              LDR      r3,[sp,#8]
000162  9a00              LDR      r2,[sp,#0]
;;;1238   			distY = pos.y - old_pos.y;
000164  f8ddc00c          LDR      r12,[sp,#0xc]
000168  eba20903          SUB      r9,r2,r3              ;1237
00016c  9b01              LDR      r3,[sp,#4]
00016e  ebb3080c          SUBS     r8,r3,r12
;;;1239   			if (distY < 0)
;;;1240   			distY = -distY;
000172  bf48              IT       MI
000174  f1c80800          RSBMI    r8,r8,#0
;;;1241   			if (distX < 0)
000178  f1b90f00          CMP      r9,#0
;;;1242   			distX = -distX;
00017c  bfb8              IT       LT
00017e  f1c90900          RSBLT    r9,r9,#0
;;;1243   
;;;1244   			if (!thisInfo->tCoord.bFirstLongDistanceMoved[i])
000182  190b              ADDS     r3,r1,r4
000184  f5035380          ADD      r3,r3,#0x1000
000188  f8933073          LDRB     r3,[r3,#0x73]
00018c  2b00              CMP      r3,#0
;;;1245   			{
;;;1246   				ucMoveTHD_X = thisModeConf->Coord.ucFirstMoveEventTHD;
;;;1247   				ucMoveTHD_Y = thisModeConf->Coord.ucFirstMoveEventTHD;
;;;1248   			}
;;;1249   			else
;;;1250   			{
;;;1251   				ucMoveTHD_X = thisModeConf->Coord.ucMoveEventTHD;
00018e  696b              LDR      r3,[r5,#0x14]  ; thisModeConf
000190  bf0c              ITE      EQ                    ;1246
000192  f8937097          LDRBEQ   r7,[r3,#0x97]         ;1246
000196  f8937098          LDRBNE   r7,[r3,#0x98]
;;;1252   				ucMoveTHD_Y = thisModeConf->Coord.ucMoveEventTHD;
;;;1253   			}
;;;1254   
;;;1255   			
;;;1256   			if (thisInfo->tCoord.tPastSentPos.vusS[i] == 0 || (distY >= ucMoveTHD_Y) || (distX >= ucMoveTHD_X))
00019a  f8b03cce          LDRH     r3,[r0,#0xcce]
00019e  2b00              CMP      r3,#0
0001a0  bf18              IT       NE
0001a2  45b8              CMPNE    r8,r7
0001a4  bfb8              IT       LT
0001a6  45b9              CMPLT    r9,r7
0001a8  db6b              BLT      |L5.642|
;;;1257   			{
;;;1258   #if (ID_MAPPING_CHANGE)
;;;1259   				if (thisInfo->tCoord.tPastSentPos.vusS[i] == 0 )
;;;1260   				{
;;;1261   					NewID++;
;;;1262   					if(NewID > 30)NewID=1;
;;;1263   					Id_Map[i] = NewID;
;;;1264   				}
;;;1265   #endif				
;;;1266   				uSWIPTouchItem_t tItem;
;;;1267   #if USED_SHARP_SPECIFIC_PROTOCOL
;;;1268   				tItem.tItem00.tInfo.b4FingerID = i + 1;					// id
;;;1269   				tItem.tItem00.tInfo.b1Status = TOUCH_STATUS_PRESS;		// status
;;;1270   				tItem.tItem00.tInfo.b6Type = (touchItemType.finger << TOUCH_TYPE_FINGER) |
;;;1271   									  (touchItemType.glove << TOUCH_TYPE_GLOVE) |
;;;1272   									  (touchItemType.hover << TOUCH_TYPE_HOVER) |
;;;1273   									  (touchItemType.passive_stylus << TOUCH_TYPE_PASSIVE_STYLUS) |
;;;1274   									  (touchItemType.active_stylus << TOUCH_TYPE_ACTIVE_STYLUS) |
;;;1275   									  (touchItemType.active_stylus_hover << TOUCH_TYPE_ACTIVE_STYLUS_HOVER);
;;;1276   #else /* USED_SHARP_SPECIFIC_PROTOCOL */
;;;1277   				tItem.tItem00.tInfo.bTouch = YES;
0001aa  f89d3010          LDRB     r3,[sp,#0x10]
;;;1278   				tItem.tItem00.tInfo.bHover = NO;
;;;1279   				tItem.tItem00.tInfo.bScreen = YES;
0001ae  f5015180          ADD      r1,r1,#0x1000
0001b2  f0230320          BIC      r3,r3,#0x20           ;1277
;;;1280   				tItem.tItem00.tInfo.bPalm = thisInfo->bIsPalm;
0001b6  f891132a          LDRB     r1,[r1,#0x32a]
0001ba  f04303c0          ORR      r3,r3,#0xc0           ;1279
0001be  f3611304          BFI      r3,r1,#4,#1
;;;1281   	#if (ID_MAPPING_CHANGE)
;;;1282   				tItem.tItem00.tInfo.b4FingerID = Id_Map[i];
;;;1283   	#else
;;;1284   				tItem.tItem00.tInfo.b4FingerID = i + 1;
0001c2  1c61              ADDS     r1,r4,#1
0001c4  f3610303          BFI      r3,r1,#0,#4
0001c8  f88d3010          STRB     r3,[sp,#0x10]
;;;1285   	#endif
;;;1286   #endif /* USED_SHARP_SPECIFIC_PROTOCOL */
;;;1287   				tItem.tItem00.ucRowStart = 0;
;;;1288   
;;;1289   				SET_POS(tItem, pos);
0001cc  0a11              LSRS     r1,r2,#8
0001ce  f88d6018          STRB     r6,[sp,#0x18]         ;1287
0001d2  f88d1011          STRB     r1,[sp,#0x11]
0001d6  9901              LDR      r1,[sp,#4]
0001d8  0a09              LSRS     r1,r1,#8
0001da  f88d1012          STRB     r1,[sp,#0x12]
0001de  9901              LDR      r1,[sp,#4]
0001e0  f88d2013          STRB     r2,[sp,#0x13]
0001e4  f88d1014          STRB     r1,[sp,#0x14]
;;;1290   				tItem.tItem00.ucWidth = MIN(thisInfo->tCoord.tPos.vusR[i], UINT8_MAX);
0001e8  f8b01503          LDRH     r1,[r0,#0x503]
0001ec  29ff              CMP      r1,#0xff
0001ee  bf28              IT       CS
0001f0  21ff              MOVCS    r1,#0xff
0001f2  f88d1015          STRB     r1,[sp,#0x15]
;;;1291   				//                tItem.tItem00.ucWidth = thisInfo->tCoord.cScreenDebCnt[i];
;;;1292   				
;;;1293   //				tItem.tItem02.usWidth = thisInfo->tCoord.tPos.vusW[i];
;;;1294   //				tItem.tItem02.usHeight = thisInfo->tCoord.tPos.vusH[i];
;;;1295   				
;;;1296   				if(id == 0)
0001f6  f1ba0f00          CMP      r10,#0
;;;1297   				{
;;;1298   					tItem.tItem00.usStrength = thisInfo->tCoord.tPos.vusS[i];
0001fa  bf04              ITT      EQ
0001fc  f8b004ef          LDRHEQ   r0,[r0,#0x4ef]
000200  f8ad0016          STRHEQ   r0,[sp,#0x16]
;;;1299   				}
;;;1300   #if !(ID_MAPPING_CHANGE)
;;;1301   				protocol_swip_PushTouchEvent(&tItem);
000204  a804              ADD      r0,sp,#0x10
000206  f7fffffe          BL       protocol_swip_PushTouchEvent
;;;1302   #endif				
;;;1303   				protocol_hid_PushTouchEvent(&tItem);
00020a  a804              ADD      r0,sp,#0x10
00020c  f7fffffe          BL       protocol_hid_PushTouchEvent
;;;1304   
;;;1305   				if (thisInfo->tCoord.tPastSentPos.vusS[i] > 0 && ((distY >= ucMoveTHD_Y) || (distX >= ucMoveTHD_X)) ) //distance moved.
000210  69a9              LDR      r1,[r5,#0x18]  ; thisInfo
000212  eb010044          ADD      r0,r1,r4,LSL #1
000216  f8b02cce          LDRH     r2,[r0,#0xcce]
00021a  b152              CBZ      r2,|L5.562|
00021c  463a              MOV      r2,r7
00021e  45b8              CMP      r8,r7
000220  bfb8              IT       LT
000222  4591              CMPLT    r9,r2
000224  db05              BLT      |L5.562|
;;;1306   				{
;;;1307   					thisInfo->tCoord.bFirstLongDistanceMoved[i] = YES;
000226  190a              ADDS     r2,r1,r4
000228  f5025280          ADD      r2,r2,#0x1000
00022c  f882b073          STRB     r11,[r2,#0x73]
000230  e004              B        |L5.572|
                  |L5.562|
;;;1308   				}
;;;1309   				else //1st touch.
;;;1310   				{
;;;1311   					thisInfo->tCoord.bFirstLongDistanceMoved[i] = NO;
000232  190a              ADDS     r2,r1,r4
000234  f5025280          ADD      r2,r2,#0x1000
000238  f8826073          STRB     r6,[r2,#0x73]
                  |L5.572|
;;;1312   				}
;;;1313   
;;;1314   				thisInfo->tCoord.tPastSentPos.tXY[i].x = thisInfo->tCoord.tPos.tXY[i].x;
00023c  eb0102c4          ADD      r2,r1,r4,LSL #3
000240  f8d2349f          LDR      r3,[r2,#0x49f]
000244  f8c23c7e          STR      r3,[r2,#0xc7e]
;;;1315   				thisInfo->tCoord.tPastSentPos.tXY[i].y = thisInfo->tCoord.tPos.tXY[i].y;
000248  f8d234a3          LDR      r3,[r2,#0x4a3]
00024c  f8c23c82          STR      r3,[r2,#0xc82]
;;;1316   				thisInfo->tCoord.tPastSentPos.vusS[i] = thisInfo->tCoord.tPos.vusS[i];
000250  f8b034ef          LDRH     r3,[r0,#0x4ef]
000254  f8a03cce          STRH     r3,[r0,#0xcce]
;;;1317   				thisInfo->tCoord.tPastSentPos.vusR[i] = thisInfo->tCoord.tPos.vusR[i];
000258  e000              B        |L5.604|
                  |L5.602|
00025a  e047              B        |L5.748|
                  |L5.604|
00025c  f8b03503          LDRH     r3,[r0,#0x503]
000260  f8a03ce2          STRH     r3,[r0,#0xce2]
;;;1318   //				thisInfo->tCoord.tPastSentPos.vusW[i] = thisInfo->tCoord.tPos.vusW[i];
;;;1319   //				thisInfo->tCoord.tPastSentPos.vusH[i] = thisInfo->tCoord.tPos.vusH[i];
;;;1320   				
;;;1321   				thisInfo->tCoord.tRealPastSentPos.tXY[i].x = pos.x;
000264  9800              LDR      r0,[sp,#0]
000266  f8c20d1f          STR      r0,[r2,#0xd1f]
;;;1322   				thisInfo->tCoord.tRealPastSentPos.tXY[i].y = pos.y;
00026a  9801              LDR      r0,[sp,#4]
00026c  f8c20d23          STR      r0,[r2,#0xd23]
;;;1323   				
;;;1324   				if(thisInfo->bIsOutIn == YES)
000270  f241302b          MOV      r0,#0x132b
000274  5c40              LDRB     r0,[r0,r1]
000276  2801              CMP      r0,#1
000278  d16e              BNE      |L5.856|
;;;1325   					pendcheck++;
00027a  68e8              LDR      r0,[r5,#0xc]  ; pendcheck
00027c  1c40              ADDS     r0,r0,#1
00027e  60e8              STR      r0,[r5,#0xc]  ; pendcheck
000280  e06a              B        |L5.856|
                  |L5.642|
;;;1326   			}
;;;1327   			else
;;;1328   			{
;;;1329   				uSWIPTouchItem_t tItem;
;;;1330   #if USED_SHARP_SPECIFIC_PROTOCOL
;;;1331   				tItem.tItem00.tInfo.b4FingerID = i + 1;					// id
;;;1332   				tItem.tItem00.tInfo.b1Status = TOUCH_STATUS_PRESS;		// status
;;;1333   				tItem.tItem00.tInfo.b6Type = (touchItemType.finger << TOUCH_TYPE_FINGER) |
;;;1334   									  (touchItemType.glove << TOUCH_TYPE_GLOVE) |
;;;1335   									  (touchItemType.hover << TOUCH_TYPE_HOVER) |
;;;1336   									  (touchItemType.passive_stylus << TOUCH_TYPE_PASSIVE_STYLUS) |
;;;1337   									  (touchItemType.active_stylus << TOUCH_TYPE_ACTIVE_STYLUS) |
;;;1338   									  (touchItemType.active_stylus_hover << TOUCH_TYPE_ACTIVE_STYLUS_HOVER);
;;;1339   #else /* USED_SHARP_SPECIFIC_PROTOCOL */
;;;1340   				tItem.tItem00.tInfo.bTouch = YES;
;;;1341   				tItem.tItem00.tInfo.bHover = NO;
;;;1342   				tItem.tItem00.tInfo.bScreen = YES;
000282  f5015180          ADD      r1,r1,#0x1000
000286  f89d2010          LDRB     r2,[sp,#0x10]         ;1340
;;;1343   				tItem.tItem00.tInfo.bPalm = thisInfo->bIsPalm;
00028a  f891132a          LDRB     r1,[r1,#0x32a]
00028e  f0220220          BIC      r2,r2,#0x20           ;1340
000292  f04202c0          ORR      r2,r2,#0xc0           ;1342
000296  f3611204          BFI      r2,r1,#4,#1
;;;1344   	#if (ID_MAPPING_CHANGE)
;;;1345   				tItem.tItem00.tInfo.b4FingerID = Id_Map[i];
;;;1346   	#else
;;;1347   				tItem.tItem00.tInfo.b4FingerID = i + 1;
00029a  1c61              ADDS     r1,r4,#1
00029c  f3610203          BFI      r2,r1,#0,#4
;;;1348   	#endif
;;;1349   #endif /* USED_SHARP_SPECIFIC_PROTOCOL */
;;;1350   				tItem.tItem00.ucRowStart = 0;
;;;1351   				SET_POS(tItem, old_pos);
0002a0  9902              LDR      r1,[sp,#8]
0002a2  f88d2010          STRB     r2,[sp,#0x10]         ;1347
0002a6  0a09              LSRS     r1,r1,#8
0002a8  f88d1011          STRB     r1,[sp,#0x11]
0002ac  ea4f211c          LSR      r1,r12,#8
0002b0  f88d1012          STRB     r1,[sp,#0x12]
0002b4  9902              LDR      r1,[sp,#8]
0002b6  f88d6018          STRB     r6,[sp,#0x18]         ;1350
0002ba  f88d1013          STRB     r1,[sp,#0x13]
0002be  f88dc014          STRB     r12,[sp,#0x14]
;;;1352   				tItem.tItem00.ucWidth = MIN(thisInfo->tCoord.tPos.vusR[i], UINT8_MAX);
0002c2  f8b01503          LDRH     r1,[r0,#0x503]
0002c6  29ff              CMP      r1,#0xff
0002c8  bf28              IT       CS
0002ca  21ff              MOVCS    r1,#0xff
0002cc  f88d1015          STRB     r1,[sp,#0x15]
;;;1353   
;;;1354   				//To do	-> Old Width, Height
;;;1355   //				tItem.tItem02.usWidth = thisInfo->tCoord.tPos.vusW[i];
;;;1356   //				tItem.tItem02.usHeight = thisInfo->tCoord.tPos.vusH[i];
;;;1357   				
;;;1358   				if(id == 0)
0002d0  f1ba0f00          CMP      r10,#0
;;;1359   				{
;;;1360   					tItem.tItem00.usStrength = thisInfo->tCoord.tPos.vusS[i];
0002d4  bf04              ITT      EQ
0002d6  f8b004ef          LDRHEQ   r0,[r0,#0x4ef]
0002da  f8ad0016          STRHEQ   r0,[sp,#0x16]
                  |L5.734|
;;;1361   				}
;;;1362   #if !(ID_MAPPING_CHANGE)
;;;1363   				protocol_swip_PushTouchEvent(&tItem);
0002de  a804              ADD      r0,sp,#0x10
0002e0  f7fffffe          BL       protocol_swip_PushTouchEvent
;;;1364   #endif				
;;;1365   				protocol_hid_PushTouchEvent(&tItem);
0002e4  a804              ADD      r0,sp,#0x10
0002e6  f7fffffe          BL       protocol_hid_PushTouchEvent
;;;1366   				
;;;1367   			}
0002ea  e035              B        |L5.856|
                  |L5.748|
;;;1368   #if USED_IDLE_CORNER_EDGE_DEBOUNC_DISABLE
;;;1369   			thisInfo->bIsIdleToActive = NO;
;;;1370   #endif /* USED_IDLE_CORNER_EDGE_DEBOUNC_DISABLE */
;;;1371   		}
;;;1372   		else if (thisInfo->tCoord.tPastSentPos.vusS[i] > 0)
0002ec  f8b02cce          LDRH     r2,[r0,#0xcce]
0002f0  b38a              CBZ      r2,|L5.854|
;;;1373   		{
;;;1374   			
;;;1375   		#if (SWIP_QUEUE_MODE == 2)
;;;1376   			thisInfo->bTouchOffFlag = 1;
0002f2  f5015380          ADD      r3,r1,#0x1000
0002f6  f883b3ad          STRB     r11,[r3,#0x3ad]
;;;1377   		#endif
;;;1378   			
;;;1379   			uSWIPTouchItem_t tItem;
;;;1380   #if USED_SHARP_SPECIFIC_PROTOCOL
;;;1381   			tItem.tItem00.tInfo.b4FingerID = i + 1;					// id
;;;1382   			tItem.tItem00.tInfo.b1Status = TOUCH_STATUS_RELEASE;		// status
;;;1383   			tItem.tItem00.tInfo.b6Type = (touchItemType.finger << TOUCH_TYPE_FINGER) |
;;;1384   								  (touchItemType.glove << TOUCH_TYPE_GLOVE) |
;;;1385   								  (touchItemType.hover << TOUCH_TYPE_HOVER) |
;;;1386   								  (touchItemType.passive_stylus << TOUCH_TYPE_PASSIVE_STYLUS) |
;;;1387   								  (touchItemType.active_stylus << TOUCH_TYPE_ACTIVE_STYLUS) |
;;;1388   								  (touchItemType.active_stylus_hover << TOUCH_TYPE_ACTIVE_STYLUS_HOVER);
;;;1389   #else /* USED_SHARP_SPECIFIC_PROTOCOL */
;;;1390   			tItem.tItem00.tInfo.bTouch = NO;
0002fa  f89d2010          LDRB     r2,[sp,#0x10]
;;;1391   			tItem.tItem00.tInfo.bHover = NO;
;;;1392   			tItem.tItem00.tInfo.bScreen = YES;
;;;1393   			tItem.tItem00.tInfo.bPalm = thisInfo->bIsPalm;
0002fe  f893332a          LDRB     r3,[r3,#0x32a]
000302  f02202a0          BIC      r2,r2,#0xa0           ;1391
000306  f0420240          ORR      r2,r2,#0x40           ;1392
00030a  f3631204          BFI      r2,r3,#4,#1
;;;1394   	#if (ID_MAPPING_CHANGE)
;;;1395   			tItem.tItem00.tInfo.b4FingerID = Id_Map[i];
;;;1396   	#else
;;;1397   			tItem.tItem00.tInfo.b4FingerID = i + 1;
00030e  1c63              ADDS     r3,r4,#1
000310  f3630203          BFI      r2,r3,#0,#4
000314  f88d2010          STRB     r2,[sp,#0x10]
;;;1398   	#endif
;;;1399   #endif /* USED_SHARP_SPECIFIC_PROTOCOL */
;;;1400   			tItem.tItem00.ucRowStart = 0;
;;;1401   
;;;1402   #if BIG_FINGER_EDGE_ACC_TEST_ALGO_EN
;;;1403   			if(i == 0)algorithm_BigFingerEdgeAccTest(&pos,&old_pos,1);			
;;;1404   #endif
;;;1405   			
;;;1406   			SET_POS(tItem, old_pos);	
000318  9a02              LDR      r2,[sp,#8]
00031a  f88d6018          STRB     r6,[sp,#0x18]         ;1400
00031e  0a12              LSRS     r2,r2,#8
000320  f88d2011          STRB     r2,[sp,#0x11]
000324  9a03              LDR      r2,[sp,#0xc]
000326  0a12              LSRS     r2,r2,#8
000328  f88d2012          STRB     r2,[sp,#0x12]
00032c  9a02              LDR      r2,[sp,#8]
00032e  f88d2013          STRB     r2,[sp,#0x13]
000332  9a03              LDR      r2,[sp,#0xc]
000334  f88d2014          STRB     r2,[sp,#0x14]
;;;1407   			tItem.tItem00.ucWidth = 0;
000338  f88d6015          STRB     r6,[sp,#0x15]
;;;1408   			//			thisInfo->bGhostState = NO;
;;;1409   
;;;1410   			if(id == 0)
00033c  f1ba0f00          CMP      r10,#0
;;;1411   			{
;;;1412   				tItem.tItem00.usStrength =thisInfo->tCoord.tPos.vusS[i];
000340  bf04              ITT      EQ
000342  f8b004ef          LDRHEQ   r0,[r0,#0x4ef]
000346  f8ad0016          STRHEQ   r0,[sp,#0x16]
;;;1413   			}
;;;1414   
;;;1415   			thisInfo->tCoord.bFirstLongDistanceMoved[i] = NO;
00034a  1908              ADDS     r0,r1,r4
00034c  f5005080          ADD      r0,r0,#0x1000
000350  f8806073          STRB     r6,[r0,#0x73]
;;;1416   #if !(ID_MAPPING_CHANGE)
;;;1417   			protocol_swip_PushTouchEvent(&tItem);
;;;1418   #endif
;;;1419   			protocol_hid_PushTouchEvent(&tItem);
;;;1420   		}
000354  e7c3              B        |L5.734|
                  |L5.854|
000356  e7ff              B        |L5.856|
                  |L5.856|
;;;1421   		thisInfo->tCoord.tPastSentPos.vusS[i] = thisInfo->tCoord.tPos.vusS[i];
000358  69a8              LDR      r0,[r5,#0x18]  ; thisInfo
00035a  eb000044          ADD      r0,r0,r4,LSL #1
00035e  1c64              ADDS     r4,r4,#1
000360  f8b014ef          LDRH     r1,[r0,#0x4ef]
000364  f8a01cce          STRH     r1,[r0,#0xcce]
000368  2c0a              CMP      r4,#0xa
00036a  f6ffae86          BLT      |L5.122|
;;;1422   	}
;;;1423   #if (SWIP_QUEUE_MODE)
;;;1424   	if(thisInfo->bQueueStart == 1){
00036e  69aa              LDR      r2,[r5,#0x18]  ; thisInfo
000370  f5025080          ADD      r0,r2,#0x1000
000374  f89013ac          LDRB     r1,[r0,#0x3ac]
000378  2901              CMP      r1,#1
00037a  d115              BNE      |L5.936|
;;;1425   	#if (SWIP_QUEUE_MODE == 2)
;;;1426   		if(thisInfo->QueueFront == thisInfo->QueueRear || thisInfo->bTouchOffFlag )
00037c  f89033ab          LDRB     r3,[r0,#0x3ab]
000380  f89013aa          LDRB     r1,[r0,#0x3aa]
000384  428b              CMP      r3,r1
000386  d002              BEQ      |L5.910|
000388  f89033ad          LDRB     r3,[r0,#0x3ad]
00038c  b163              CBZ      r3,|L5.936|
                  |L5.910|
;;;1427   	#endif
;;;1428   		{
;;;1429   			thisInfo->QueueRear++;
;;;1430   			thisInfo->QueueRear = (thisInfo->QueueRear) % SWIP_QUEUE_SIZE;
00038e  4c14              LDR      r4,|L5.992|
000390  1c49              ADDS     r1,r1,#1              ;1426
000392  b2c9              UXTB     r1,r1                 ;1429
000394  46a4              MOV      r12,r4
000396  2300              MOVS     r3,#0
000398  fbe1c304          UMLAL    r12,r3,r1,r4
00039c  085b              LSRS     r3,r3,#1
00039e  eba303c3          SUB      r3,r3,r3,LSL #3
0003a2  4419              ADD      r1,r1,r3
0003a4  f88013aa          STRB     r1,[r0,#0x3aa]
                  |L5.936|
;;;1431   		}
;;;1432   	}
;;;1433   #endif	
;;;1434   	//¡Æu¡ÆA A¢´¨¬¢¬ ¢¬©£¥ìI ¨ú¡À¥ì¡ÍAI¨¡¢ç.
;;;1435   	thisInfo->tCoord.tPastSentPos.sFinger_ = thisInfo->tCoord.tPos.sFinger_;
0003a8  f892049e          LDRB     r0,[r2,#0x49e]
0003ac  f8820c7d          STRB     r0,[r2,#0xc7d]
;;;1436   //	thisInfo->bWasPalm = thisInfo->bIsPalm;
;;;1437   
;;;1438   //	if ((CheckI2CReady() == 0))
;;;1439   #if !(ID_MAPPING_CHANGE)
;;;1440   	protocol_swip_SendTouchEvent(); // ¿©±â¼­ »¸À½
0003b0  f7fffffe          BL       protocol_swip_SendTouchEvent
;;;1441   #endif
;;;1442   //	 protocol_hid_SendTouchEvent();
;;;1443   
;;;1444   #ifdef JOSH3_PEN_TEST
;;;1445   	SendPenData();
;;;1446   #else
;;;1447   #ifdef ADD_TOUCH
;;;1448   	SendTouchData();
0003b4  f7fffffe          BL       SendTouchData
;;;1449   #endif
;;;1450   #endif
;;;1451   #if (ID_MAPPING_CHANGE)	
;;;1452   	if(thisInfo->tCoord.tPos.sFinger_ == 0 && thisInfo->tCoord.tPastPos[0].sFinger_ == 0){if(NonTouchCnt++ > 32767)NonTouchCnt=30;}
;;;1453   	else NonTouchCnt = 0;
;;;1454   	
;;;1455   	if(NonTouchCnt >= 30)
;;;1456   	{
;;;1457   		NewID = 30;
;;;1458   		memset(Id_Map,0,sizeof(Id_Map));
;;;1459   	}
;;;1460   #endif	
;;;1461   	hal_clear_overlap_pen();
0003b8  f7fffffe          BL       hal_clear_overlap_pen
;;;1462   
;;;1463   #if BIG_FINGER_EDGE_ACC_TEST_ALGO_EN
;;;1464   	if(thisInfo->tCoord.tPos.sFinger_==0 || thisInfo->tCoord.tPos.sFinger_>1)
;;;1465   	{
;;;1466   		if(bBigFingerEdgeTestEn[0] || bBigFingerEdgeTestEn[1] || bBigFingerEdgeTestEn[2] || bBigFingerEdgeTestEn[3])
;;;1467   		{
;;;1468   			ucBigFingerEdgeTest_MoveEventTHD_Change=0;
;;;1469   			memset(bBigFingerEdgeTestFlag,0,sizeof(bBigFingerEdgeTestFlag));
;;;1470   			if(thisInfo->tCoord.tPos.sFinger_==0)bBigFingerEdgeTestEn[0]=bBigFingerEdgeTestEn[1]=bBigFingerEdgeTestEn[2]=bBigFingerEdgeTestEn[3]=0;
;;;1471   		}
;;;1472   	}	
;;;1473   #endif
;;;1474   	
;;;1475   }
0003bc  b007              ADD      sp,sp,#0x1c
0003be  e8bd8ff0          POP      {r4-r11,pc}
;;;1476   
                          ENDP

0003c2  0000              DCW      0x0000
                  |L5.964|
                          DCD      HID_status
                  |L5.968|
                          DCD      HID_id
                  |L5.972|
                          DCD      HID_x
                  |L5.976|
                          DCD      HID_y
                  |L5.980|
                          DCD      hid_index
                  |L5.984|
                          DCD      ||area_number.25||
                  |L5.988|
                          DCD      ||.bss||
                  |L5.992|
                          DCD      0x49249249

                          AREA ||i.algorithm_calc_angle_inter_2points||, CODE, READONLY, ALIGN=2

                  algorithm_calc_angle_inter_2points PROC
;;;578    #ifndef TILT_OPCODE
;;;579    int32_t algorithm_calc_angle_inter_2points(int diff_x, int diff_y)
000000  e92d03f0          PUSH     {r4-r9}
;;;580    {
;;;581    	int angle = 0;
;;;582    
;;;583    //	int diff_x, diff_y;
;;;584    
;;;585    //	diff_x = _tPos2.x - _tPos1.x;
;;;586    //	diff_y = _tPos2.y - _tPos1.y;
;;;587    
;;;588    	if( diff_x > 0  )
;;;589    	{
;;;590    		if( diff_y > 0 )
;;;591    		{
;;;592    			if( diff_x >= diff_y )
;;;593    				angle = sucArcTanLookUpTable[(diff_y * 100)/diff_x];
000004  f04f0364          MOV      r3,#0x64
000008  fb01f503          MUL      r5,r1,r3
;;;594    			else
;;;595    				angle = 9000 - sucArcTanLookUpTable[(diff_x * 100)/diff_y];
;;;596    		}
;;;597    		else if( diff_y < 0 )
;;;598    		{
;;;599    			if( diff_x >= -(diff_y) )
;;;600    				angle = 36000 - sucArcTanLookUpTable[(-diff_y * 100)/diff_x];
00000c  f06f0c63          MVN      r12,#0x63
000010  1e02              SUBS     r2,r0,#0              ;580
000012  4b3d              LDR      r3,|L6.264|
000014  fb01f40c          MUL      r4,r1,r12
000018  f04f0000          MOV      r0,#0                 ;581
00001c  f2423728          MOV      r7,#0x2328            ;595
;;;601    			else
;;;602    				angle = 27000 + sucArcTanLookUpTable[(diff_x * 100)/-diff_y];
000020  f6461878          MOV      r8,#0x6978
000024  f1c10c00          RSB      r12,r1,#0             ;599
000028  dd2c              BLE      |L6.132|
00002a  2664              MOVS     r6,#0x64              ;595
00002c  4356              MULS     r6,r2,r6              ;595
00002e  2900              CMP      r1,#0                 ;590
000030  dd10              BLE      |L6.84|
000032  4291              CMP      r1,r2                 ;592
000034  bfdf              ITTTT    LE                    ;593
000036  fb95f0f2          SDIVLE   r0,r5,r2              ;593
00003a  f8330010          LDRHLE   r0,[r3,r0,LSL #1]     ;593
;;;603    		}
;;;604    		else
;;;605    		{
;;;606    			angle = 0;
;;;607    		}
;;;608    	}
;;;609    	else if( diff_x < 0 )
;;;610    	{
;;;611    		if( diff_y > 0 )
;;;612    		{
;;;613    			if( -diff_x < diff_y )
;;;614    				angle = 9000 + sucArcTanLookUpTable[(-diff_x * 100)/diff_y];
;;;615    			else
;;;616    				angle = 18000 - sucArcTanLookUpTable[(diff_y * 100)/-diff_x];
;;;617    		}
;;;618    		else if( diff_y < 0 )
;;;619    		{
;;;620    			if( -diff_x >= -diff_y )
;;;621    				angle = 18000 + sucArcTanLookUpTable[(-diff_y * 100)/-diff_x];
;;;622    			else
;;;623    				angle = 27000 - sucArcTanLookUpTable[(-diff_x * 100)/-diff_y];
;;;624    		}
;;;625    		else
;;;626    		{
;;;627    			angle = 18000;
;;;628    		}
;;;629    	}
;;;630    	else
;;;631    	{
;;;632    		if( diff_y > 0 )
;;;633    			angle = 9000;
;;;634    		else if( diff_y < 0 )
;;;635    		{
;;;636    			angle = 27000;
;;;637    		}
;;;638    	}
;;;639    
;;;640    	return angle;
;;;641    }
00003e  e8bd03f0          POPLE    {r4-r9}
000042  4770              BXLE     lr
000044  fb96f0f1          SDIV     r0,r6,r1              ;595
000048  f8330010          LDRH     r0,[r3,r0,LSL #1]     ;595
00004c  1a38              SUBS     r0,r7,r0              ;595
00004e  e8bd03f0          POP      {r4-r9}
000052  4770              BX       lr
                  |L6.84|
000054  bfa4              ITT      GE
000056  e8bd03f0          POPGE    {r4-r9}
00005a  4770              BXGE     lr
00005c  4562              CMP      r2,r12                ;599
00005e  db09              BLT      |L6.116|
000060  fb94f0f2          SDIV     r0,r4,r2              ;600
000064  f64841a0          MOV      r1,#0x8ca0            ;600
000068  f8330010          LDRH     r0,[r3,r0,LSL #1]     ;600
00006c  e8bd03f0          POP      {r4-r9}
000070  1a08              SUBS     r0,r1,r0              ;600
000072  4770              BX       lr
                  |L6.116|
000074  fb96f0fc          SDIV     r0,r6,r12             ;602
000078  f8330010          LDRH     r0,[r3,r0,LSL #1]     ;602
00007c  4440              ADD      r0,r0,r8              ;602
00007e  e8bd03f0          POP      {r4-r9}
000082  4770              BX       lr
                  |L6.132|
000084  da35              BGE      |L6.242|
000086  f06f0063          MVN      r0,#0x63              ;614
00008a  fb02f600          MUL      r6,r2,r0              ;614
00008e  4250              RSBS     r0,r2,#0              ;613
000090  f2446950          MOV      r9,#0x4650            ;616
000094  2900              CMP      r1,#0                 ;611
000096  bf08              IT       EQ                    ;627
000098  f2446050          MOVEQ    r0,#0x4650            ;627
00009c  dd12              BLE      |L6.196|
00009e  4281              CMP      r1,r0                 ;613
0000a0  dd07              BLE      |L6.178|
0000a2  fb96f0f1          SDIV     r0,r6,r1              ;614
0000a6  f8330010          LDRH     r0,[r3,r0,LSL #1]     ;614
0000aa  4438              ADD      r0,r0,r7              ;614
0000ac  e8bd03f0          POP      {r4-r9}
0000b0  4770              BX       lr
                  |L6.178|
0000b2  fb95f0f0          SDIV     r0,r5,r0              ;616
0000b6  f8330010          LDRH     r0,[r3,r0,LSL #1]     ;616
0000ba  eba90000          SUB      r0,r9,r0              ;616
0000be  e8bd03f0          POP      {r4-r9}
0000c2  4770              BX       lr
                  |L6.196|
0000c4  bfa4              ITT      GE
0000c6  e8bd03f0          POPGE    {r4-r9}
0000ca  4770              BXGE     lr
0000cc  4560              CMP      r0,r12                ;620
0000ce  db07              BLT      |L6.224|
0000d0  fb94f0f0          SDIV     r0,r4,r0              ;621
0000d4  f8330010          LDRH     r0,[r3,r0,LSL #1]     ;621
0000d8  4448              ADD      r0,r0,r9              ;621
0000da  e8bd03f0          POP      {r4-r9}
0000de  4770              BX       lr
                  |L6.224|
0000e0  fb96f0fc          SDIV     r0,r6,r12             ;623
0000e4  f8330010          LDRH     r0,[r3,r0,LSL #1]     ;623
0000e8  eba80000          SUB      r0,r8,r0              ;623
0000ec  e8bd03f0          POP      {r4-r9}
0000f0  4770              BX       lr
                  |L6.242|
0000f2  2900              CMP      r1,#0                 ;632
0000f4  bfb8              IT       LT                    ;636
0000f6  f6461078          MOVLT    r0,#0x6978            ;636
0000fa  bfc8              IT       GT                    ;633
0000fc  f2423028          MOVGT    r0,#0x2328            ;633
000100  e8bd03f0          POP      {r4-r9}
000104  4770              BX       lr
;;;642    #endif /* TILT_OPCODE */
                          ENDP

000106  0000              DCW      0x0000
                  |L6.264|
                          DCD      sucArcTanLookUpTable

                          AREA ||i.algorithm_calc_sqrt||, CODE, READONLY, ALIGN=1

                  algorithm_calc_sqrt PROC
;;;480    
;;;481    int32_t algorithm_calc_sqrt(int32_t d)
000000  2101              MOVS     r1,#1
;;;482    {
;;;483        uint32_t x = 1;
;;;484    
;;;485        x = (x + d/x)>>1;
000002  fbb0f1f1          UDIV     r1,r0,r1
000006  1c49              ADDS     r1,r1,#1
000008  0849              LSRS     r1,r1,#1
;;;486        x = (x + d/x)>>1;
00000a  fbb0f2f1          UDIV     r2,r0,r1
00000e  4411              ADD      r1,r1,r2
000010  0849              LSRS     r1,r1,#1
;;;487        x = (x + d/x)>>1;
000012  fbb0f2f1          UDIV     r2,r0,r1
000016  4411              ADD      r1,r1,r2
000018  0849              LSRS     r1,r1,#1
;;;488        x = (x + d/x)>>1;
00001a  fbb0f2f1          UDIV     r2,r0,r1
00001e  4411              ADD      r1,r1,r2
000020  0849              LSRS     r1,r1,#1
;;;489        x = (x + d/x)>>1;
000022  fbb0f2f1          UDIV     r2,r0,r1
000026  4411              ADD      r1,r1,r2
000028  0849              LSRS     r1,r1,#1
;;;490        x = (x + d/x)>>1;
00002a  fbb0f2f1          UDIV     r2,r0,r1
00002e  4411              ADD      r1,r1,r2
000030  0849              LSRS     r1,r1,#1
;;;491        x = (x + d/x)>>1;
000032  fbb0f2f1          UDIV     r2,r0,r1
000036  4411              ADD      r1,r1,r2
000038  0849              LSRS     r1,r1,#1
;;;492        x = (x + d/x)>>1;
00003a  fbb0f2f1          UDIV     r2,r0,r1
00003e  4411              ADD      r1,r1,r2
000040  0849              LSRS     r1,r1,#1
;;;493        x = (x + d/x)>>1;
000042  fbb0f2f1          UDIV     r2,r0,r1
000046  4411              ADD      r1,r1,r2
000048  0849              LSRS     r1,r1,#1
;;;494        x = (x + d/x)>>1;
00004a  fbb0f2f1          UDIV     r2,r0,r1
00004e  4411              ADD      r1,r1,r2
000050  0849              LSRS     r1,r1,#1
;;;495        x = (x + d/x)>>1;
000052  fbb0f2f1          UDIV     r2,r0,r1
000056  4411              ADD      r1,r1,r2
000058  0849              LSRS     r1,r1,#1
;;;496        x = (x + d/x)>>1;
00005a  fbb0f2f1          UDIV     r2,r0,r1
00005e  4411              ADD      r1,r1,r2
000060  0849              LSRS     r1,r1,#1
;;;497        x = (x + d/x)>>1;
000062  fbb0f2f1          UDIV     r2,r0,r1
000066  4411              ADD      r1,r1,r2
000068  0849              LSRS     r1,r1,#1
;;;498        x = (x + d/x)>>1;
00006a  fbb0f2f1          UDIV     r2,r0,r1
00006e  4411              ADD      r1,r1,r2
000070  0849              LSRS     r1,r1,#1
;;;499        x = (x + d/x)>>1;
000072  fbb0f0f1          UDIV     r0,r0,r1
000076  4408              ADD      r0,r0,r1
000078  0840              LSRS     r0,r0,#1
;;;500    
;;;501        return x;
;;;502    }
00007a  4770              BX       lr
;;;503    
                          ENDP


                          AREA ||i.algorithm_check_recal_cond||, CODE, READONLY, ALIGN=2

                  algorithm_check_recal_cond PROC
;;;1476   
;;;1477   void algorithm_check_recal_cond(void)
000000  4912              LDR      r1,|L8.76|
;;;1478   {
;;;1479   	thisInfo->bIsRecalCond  = NO;
000002  2200              MOVS     r2,#0
000004  6988              LDR      r0,[r1,#0x18]  ; thisInfo
000006  7082              STRB     r2,[r0,#2]
;;;1480   	thisInfo->bIsRecalCond2 = NO;
000008  70c2              STRB     r2,[r0,#3]
;;;1481   
;;;1482   	thisInfo->bIsRecalCond = (
00000a  6949              LDR      r1,[r1,#0x14]  ; thisModeConf
00000c  f8d02025          LDR      r2,[r0,#0x25]
000010  f8d13027          LDR      r3,[r1,#0x27]
000014  429a              CMP      r2,r3
000016  db08              BLT      |L8.42|
;;;1483   			   (thisInfo->tDelta.iPosSum >= thisModeConf->BaseLine.iRecalCond1_PosSum_Thd)
;;;1484   			&& ((thisInfo->tDelta.iNegSum + thisInfo->tDelta.iPosSum) < thisModeConf->BaseLine.iRecalCond1_AccSum_Thd)
000018  f8d0302d          LDR      r3,[r0,#0x2d]
00001c  441a              ADD      r2,r2,r3
00001e  f8d1302b          LDR      r3,[r1,#0x2b]
000022  429a              CMP      r2,r3
000024  bfb8              IT       LT
000026  2201              MOVLT    r2,#1
000028  db00              BLT      |L8.44|
                  |L8.42|
00002a  2200              MOVS     r2,#0
                  |L8.44|
00002c  7082              STRB     r2,[r0,#2]
;;;1485   	);
;;;1486   	thisInfo->bIsRecalCond2 = (
00002e  f241322e          MOV      r2,#0x132e
000032  5c12              LDRB     r2,[r2,r0]
000034  b93a              CBNZ     r2,|L8.70|
;;;1487   			   (thisInfo->bTouchExpect == NO)
;;;1488   			&& (thisInfo->tDelta.iNegSum < thisModeConf->BaseLine.iRecalCond2_AccSum_Thd)
000036  f8d0202d          LDR      r2,[r0,#0x2d]
00003a  f8d1102f          LDR      r1,[r1,#0x2f]
00003e  428a              CMP      r2,r1
000040  bfb8              IT       LT
000042  2101              MOVLT    r1,#1
000044  db00              BLT      |L8.72|
                  |L8.70|
000046  2100              MOVS     r1,#0
                  |L8.72|
000048  70c1              STRB     r1,[r0,#3]
;;;1489   	);
;;;1490   }
00004a  4770              BX       lr
;;;1491   
                          ENDP

                  |L8.76|
                          DCD      ||area_number.25||

                          AREA ||i.algorithm_init||, CODE, READONLY, ALIGN=2

                  algorithm_init PROC
;;;127    tAlgorithmInfo_t * tTempAlgorithmInfoDebug;
;;;128    void algorithm_init(void)
000000  b570              PUSH     {r4-r6,lr}
;;;129    {
;;;130    #if (USED_IDLE_MODE_CONTROL || USED_PEN_MODE_OPERATION || USED_LOCAL_IDLE_MODE_CONTROL || USED_NOISE_HOPPING_FREQ)
;;;131    	const tAppCommonConf_t * _ptAppCommonConf = NULL;
;;;132    	_ptAppCommonConf = app_GetCommonConfig();
000002  f7fffffe          BL       app_GetCommonConfig
000006  4605              MOV      r5,r0
000008  f7fffffe          BL       module_GetModeConfig
00000c  4c19              LDR      r4,|L9.116|
00000e  6120              STR      r0,[r4,#0x10]  ; ptModuleModeConf
000010  f7fffffe          BL       algorithm_GetModeConfig
000014  6160              STR      r0,[r4,#0x14]  ; thisModeConf
000016  f7fffffe          BL       algorithm_baseline_init_param
00001a  f7fffffe          BL       algorithm_label_init_param
00001e  f7fffffe          BL       algorithm_coord_init_param
;;;133    #endif
;;;134    	
;;;135    	algorithm_init_param();
;;;136    	thisInfo = algorithm_GetInfo();
000022  f7fffffe          BL       algorithm_GetInfo
;;;137    #if USED_NOISE_HOPPING_FREQ
;;;138    	ptAppInfo = app_GetInfo();
000026  61a0              STR      r0,[r4,#0x18]  ; thisInfo
000028  f7fffffe          BL       app_GetInfo
;;;139    #endif /* USED_NOISE_HOPPING_FREQ */
;;;140    
;;;141    	DebugAlgorithmInfo = thisInfo;
00002c  61e0              STR      r0,[r4,#0x1c]  ; ptAppInfo
00002e  69a1              LDR      r1,[r4,#0x18]  ; thisInfo
;;;142    	tTempAlgorithmInfoDebug = thisInfo;
000030  6221              STR      r1,[r4,#0x20]  ; DebugAlgorithmInfo
;;;143    
;;;144    #if USED_IDLE_MODE_CONTROL
;;;145    	#if USED_ENTER_IDLE_REAL_TIME_CHECK
;;;146    		thisInfo->ulIdleModeEnterFrameCntTHD = _ptAppCommonConf->ucIdleModeEnterSec;
000032  6261              STR      r1,[r4,#0x24]  ; tTempAlgorithmInfoDebug
000034  4602              MOV      r2,r0                 ;138
000036  f5015380          ADD      r3,r1,#0x1000
00003a  f8b50013          LDRH     r0,[r5,#0x13]
;;;147    	#else
;;;148    		thisInfo->ulIdleModeEnterFrameCntTHD = _ptAppCommonConf->ucIdleModeEnterSec * _ptAppCommonConf->ucFrameRate;
;;;149    	#endif /* USED_ENTER_IDLE_REAL_TIME_CHECK */
;;;150    	thisInfo->ulIdleModeEnterCheckCount = 0;
00003e  2100              MOVS     r1,#0
000040  e9c301ef          STRD     r0,r1,[r3,#0x3bc]
;;;151    #if USED_NOISE_HOPPING_FREQ
;;;152    	thisInfo->ulHopFrqIdleModeFrameCntTHD = thisInfo->ulIdleModeEnterFrameCntTHD;
;;;153    #endif /* USED_NOISE_HOPPING_FREQ */
;;;154    
;;;155    #endif /* USED_IDLE_MODE_CONTROL */
;;;156    
;;;157    #if USED_PEN_MODE_OPERATION
;;;158    	thisInfo->uPenLocalModeEnterFrameCntTHD = _ptAppCommonConf->ucPenLocalModeEnterSec * _ptAppCommonConf->ucFrameRate;
;;;159    	thisInfo->ulPenLocalModeEnterCheckCount = 0;
;;;160    
;;;161    	thisInfo->ulPenLocalModeChangeFrameCntTHD = _ptAppCommonConf->ucPenLocalModeChangeFrameCntTHD;
;;;162    	thisInfo->ulPenLocalModeChangeCheckCount = 0;
;;;163    	thisInfo->ulPenFullModeChangeFrameCntTHD = _ptAppCommonConf->ucPenFullModeChangeFrameCntTHD;
;;;164    	thisInfo->ulPenFullModeChangeCheckCount = 0;
;;;165    
;;;166    #if USED_LOCAL_IDLE_MODE_CONTROL
;;;167    	thisInfo->ulPenLocalIdleModeEnterFrameCntTHD = _ptAppCommonConf->ucIdleModeEnterSec * (_ptAppCommonConf->ucFrameRate / 2);
;;;168    	thisInfo->ulPenLocalIdleModeEnterCheckCount = 0;
;;;169    #endif /* USED_LOCAL_IDLE_MODE_CONTROL */
;;;170    #endif /* USED_PEN_MODE_OPERATION */
;;;171    
;;;172    #if USED_NOISE_HOPPING_FREQ
;;;173    	thisInfo->ulHoppMainRollbackFrameCntTHD = _ptAppCommonConf->HoppMainRollbackSec * _ptAppCommonConf->ucFrameRate;
000044  f8c303b0          STR      r0,[r3,#0x3b0]
000048  f8b50017          LDRH     r0,[r5,#0x17]
00004c  f895c010          LDRB     r12,[r5,#0x10]
000050  fb00f00c          MUL      r0,r0,r12
000054  e9c301ed          STRD     r0,r1,[r3,#0x3b4]
;;;174    	thisInfo->ulHoppMainRollbackCheckCount = 0;
;;;175    #if USE_FREQ_HOPPING_BASELINE_CONTI_UPDATE
;;;176    	ptAppInfo->bIsHoppFreqBaseUpdateContinueCheckStart = NO;
000058  75d1              STRB     r1,[r2,#0x17]
;;;177    	ptAppInfo->bIsNormalReadyIdleCheckCountMaintain = NO;
00005a  7591              STRB     r1,[r2,#0x16]
;;;178    	ptAppInfo->ulHoppFreqBaseUpdateFrameCheckCnt = 0;
00005c  6191              STR      r1,[r2,#0x18]
;;;179    	ptAppInfo->ulHoppFreqBaseUpdateContinueCheckCnt = 0;
00005e  61d1              STR      r1,[r2,#0x1c]
;;;180    #endif /* USE_FREQ_HOPPING_BASELINE_CONTI_UPDATE */
;;;181    #endif /* USED_NOISE_HOPPING_FREQ */
;;;182    //	thisInfo-> = _ptAppCommonConf->ucIdleModeEnterSec * _ptAppCommonConf->ucFrameRate;
;;;183    
;;;184    	algorithm_baseline_init();
000060  f7fffffe          BL       algorithm_baseline_init
;;;185    	algorithm_label_init();
000064  f7fffffe          BL       algorithm_label_init
;;;186    	algorithm_coord_init();
000068  f7fffffe          BL       algorithm_coord_init
;;;187    #if USED_NOISE_HOPPING_FREQ
;;;188    	algorithm_noise_init();
00006c  e8bd4070          POP      {r4-r6,lr}
000070  f7ffbffe          B.W      algorithm_noise_init
;;;189    #endif /* USED_NOISE_HOPPING_FREQ */
;;;190    }
;;;191    
                          ENDP

                  |L9.116|
                          DCD      ||area_number.25||

                          AREA ||i.algorithm_init_param||, CODE, READONLY, ALIGN=2

                  algorithm_init_param PROC
;;;191    
;;;192    void algorithm_init_param(void)
000000  b510              PUSH     {r4,lr}
;;;193    {
;;;194    	ptModuleModeConf = module_GetModeConfig();
000002  f7fffffe          BL       module_GetModeConfig
000006  4c06              LDR      r4,|L10.32|
;;;195    	thisModeConf = algorithm_GetModeConfig();
000008  6120              STR      r0,[r4,#0x10]  ; ptModuleModeConf
00000a  f7fffffe          BL       algorithm_GetModeConfig
;;;196    	algorithm_baseline_init_param();
00000e  6160              STR      r0,[r4,#0x14]  ; thisModeConf
000010  f7fffffe          BL       algorithm_baseline_init_param
;;;197    	algorithm_label_init_param();
000014  f7fffffe          BL       algorithm_label_init_param
;;;198    //	algorithm_coord_init();
;;;199    	algorithm_coord_init_param();
000018  e8bd4010          POP      {r4,lr}
00001c  f7ffbffe          B.W      algorithm_coord_init_param
;;;200    }
;;;201    
                          ENDP

                  |L10.32|
                          DCD      ||area_number.25||

                          AREA ||i.algorithm_is_recalibrate||, CODE, READONLY, ALIGN=2

                  algorithm_is_recalibrate PROC
;;;1491   
;;;1492   bool_t algorithm_is_recalibrate(void)
000000  4811              LDR      r0,|L11.72|
;;;1493   {
;;;1494     
;;;1495       /*
;;;1496        * Debouncing.
;;;1497        */
;;;1498       if (thisInfo->bIsRecalCond)
000002  4911              LDR      r1,|L11.72|
000004  2200              MOVS     r2,#0
000006  6980              LDR      r0,[r0,#0x18]  ; thisInfo
;;;1499       {
;;;1500           if (thisInfo->iRecalCondCnt <= thisModeConf->BaseLine.ucRecalCond1_WaitCnt)
000008  6949              LDR      r1,[r1,#0x14]
00000a  7883              LDRB     r3,[r0,#2]            ;1498
00000c  b153              CBZ      r3,|L11.36|
00000e  f8911033          LDRB     r1,[r1,#0x33]
000012  6843              LDR      r3,[r0,#4]
000014  428b              CMP      r3,r1
;;;1501           {
;;;1502               thisInfo->iRecalCondCnt++;
000016  bfda              ITTE     LE
000018  1c59              ADDLE    r1,r3,#1
00001a  6041              STRLE    r1,[r0,#4]
;;;1503           }
;;;1504           else
;;;1505           {
;;;1506               thisInfo->iRecalCondCnt = 0;   // added
00001c  6042              STRGT    r2,[r0,#4]
00001e  dd10              BLE      |L11.66|
                  |L11.32|
;;;1507               return YES;
;;;1508           }
;;;1509       }
;;;1510       else if (thisInfo->bIsRecalCond2)
;;;1511       {
;;;1512           if (thisInfo->iRecalCond2Cnt <= thisModeConf->BaseLine.ucRecalCond2_WaitCnt)     // 300 msec
;;;1513           {
;;;1514           	thisInfo->iRecalCond2Cnt++;
;;;1515           }
;;;1516           else
;;;1517           {
;;;1518           	thisInfo->iRecalCond2Cnt = 0;   // added
;;;1519               return YES;
000020  2001              MOVS     r0,#1
;;;1520           }
;;;1521       }
;;;1522       else
;;;1523       {
;;;1524           thisInfo->iRecalCondCnt = 0;
;;;1525           thisInfo->iRecalCond2Cnt = 0;
;;;1526       }
;;;1527   
;;;1528       return NO;
;;;1529   }
000022  4770              BX       lr
                  |L11.36|
000024  78c3              LDRB     r3,[r0,#3]            ;1510
000026  2b00              CMP      r3,#0                 ;1510
000028  bf04              ITT      EQ                    ;1525
00002a  6042              STREQ    r2,[r0,#4]            ;1525
00002c  6082              STREQ    r2,[r0,#8]            ;1525
00002e  d008              BEQ      |L11.66|
000030  f8911034          LDRB     r1,[r1,#0x34]         ;1512
000034  6883              LDR      r3,[r0,#8]            ;1512
000036  428b              CMP      r3,r1                 ;1512
000038  bfda              ITTE     LE                    ;1514
00003a  1c59              ADDLE    r1,r3,#1              ;1514
00003c  6081              STRLE    r1,[r0,#8]            ;1514
00003e  6082              STRGT    r2,[r0,#8]            ;1518
000040  dcee              BGT      |L11.32|
                  |L11.66|
000042  2000              MOVS     r0,#0                 ;1528
000044  4770              BX       lr
;;;1530   
                          ENDP

000046  0000              DCW      0x0000
                  |L11.72|
                          DCD      ||area_number.25||

                          AREA ||i.algorithm_process||, CODE, READONLY, ALIGN=2

                  algorithm_process PROC
;;;2669   
;;;2670   bool_t algorithm_process(uint8_t mode)
000000  e92d4ff1          PUSH     {r0,r4-r11,lr}
;;;2671   {
000004  b08e              SUB      sp,sp,#0x38
;;;2672   	bool_t bIsRecalState = NO;
000006  2000              MOVS     r0,#0
;;;2673   	eSENSING_MODE_t eSensingMode;
;;;2674   	eSensingMode = HAL_GetSensingMode();
000008  9001              STR      r0,[sp,#4]
00000a  f7fffffe          BL       HAL_GetSensingMode
;;;2675   #if (INTERPOLATION_VER1_En == YES || INTERPOLATION_VER2_En == YES || INTERPOLATION_VER3_En == YES) 
;;;2676   	uint8_t ucInterpolation_Ver = 0;
;;;2677   #endif
;;;2678   	
;;;2679   #if USED_NOISE_HOPPING_FREQ
;;;2680   	{
;;;2681   #if USED_PEN_MODE_OPERATION
;;;2682   #define RAWDATA_STABLE_CNT		(1)
;;;2683   #else
;;;2684   #define RAWDATA_STABLE_CNT		(2)
;;;2685   #endif /* USED_PEN_MODE_OPERATION */
;;;2686   
;;;2687   		if (ptAppInfo->eHoppingStatus == FREQ_HOPPING_CHANGED)
00000e  4cfe              LDR      r4,|L12.1032|
000010  9000              STR      r0,[sp,#0]
000012  69e0              LDR      r0,[r4,#0x1c]  ; ptAppInfo
000014  7d01              LDRB     r1,[r0,#0x14]
000016  2901              CMP      r1,#1
000018  d07d              BEQ      |L12.278|
;;;2688   		{
;;;2689   			ptAppInfo->ucHoppFrameCnt++;
;;;2690   
;;;2691   			if (ptAppInfo->ucHoppFrameCnt > RAWDATA_STABLE_CNT)
;;;2692   			{
;;;2693   				ptAppInfo->eHoppingStatus = FREQ_HOPPING_NONE;
;;;2694   			}
;;;2695   			else
;;;2696   			{
;;;2697   				return YES;
;;;2698   			}
;;;2699   		}
;;;2700   	}
;;;2701   #endif
;;;2702   	
;;;2703   #if (INTERPOLATION_VER1_En == YES || INTERPOLATION_VER2_En == YES || INTERPOLATION_VER3_En == YES) 
;;;2704   	if( (thisModeConf->Coord.ucFullFingerInterpolation_On > 0 && mode == FULL_MODE) || (thisModeConf->Coord.ucLocalFingerInterpolation_On > 0 && mode == LOCAL_FINGER_MODE) )
;;;2705   	{
;;;2706   		if(mode == FULL_MODE)ucInterpolation_Ver = thisModeConf->Coord.ucFullFingerInterpolation_On;
;;;2707   		else ucInterpolation_Ver = thisModeConf->Coord.ucLocalFingerInterpolation_On;
;;;2708   	}
;;;2709   	
;;;2710   #if !USED_DO_NOT_FINGER_TOUCH_REPORT
;;;2711   	if(ucInterpolation_Ver > 0)
;;;2712   	{
;;;2713   
;;;2714   #if (INTERPOLATION_VER2_En == YES || INTERPOLATION_VER3_En == YES)
;;;2715   		if(ucInterpolation_Ver == 2 || ucInterpolation_Ver == 3)
;;;2716   		{
;;;2717   	#if (PEN_FINGER_1TOUCH_REPORT == NO)
;;;2718   			algorithm_PendTouchEvent();
;;;2719   	#endif
;;;2720   			algorithm_coord_UpdatePosHistoryInfo();
;;;2721   		}
;;;2722   #endif
;;;2723   		
;;;2724   		thisInfo->tCoord.bInterpolation_On = YES;
;;;2725   		algorithm_coord_interpolation(ucInterpolation_Ver);
;;;2726   		
;;;2727   #if (INTERPOLATION_VER1_En == YES)
;;;2728   		if(ucInterpolation_Ver == 1)
;;;2729   		{
;;;2730   	#if (PEN_FINGER_1TOUCH_REPORT == NO)
;;;2731   			algorithm_PendTouchEvent();
;;;2732   	#endif
;;;2733   			algorithm_coord_UpdatePosHistoryInfo();
;;;2734   		}
;;;2735   #endif
;;;2736   	}
;;;2737   	else
;;;2738   #endif /* !USED_DO_NOT_FINGER_TOUCH_REPORT */
;;;2739   	{
;;;2740   		thisInfo->tCoord.bInterpolation_On = NO;
;;;2741   	}
;;;2742   #endif
;;;2743   	
;;;2744   	algorithm_coord_initialise_pos_buffer();
00001a  bf00              NOP      
                  |L12.28|
00001c  f7fffffe          BL       algorithm_coord_initialise_pos_buffer
000020  f8df93ec          LDR      r9,|L12.1040|
000024  f8dfe3e4          LDR      lr,|L12.1036|
000028  2000              MOVS     r0,#0
00002a  f10901a0          ADD      r1,r9,#0xa0
00002e  bf00              NOP      
                  |L12.48|
000030  4ff9              LDR      r7,|L12.1048|
000032  f04f0b00          MOV      r11,#0
000036  4ef7              LDR      r6,|L12.1044|
000038  eb000340          ADD      r3,r0,r0,LSL #1
00003c  465a              MOV      r2,r11
00003e  4675              MOV      r5,lr
000040  f10708a0          ADD      r8,r7,#0xa0
000044  eb0304c0          ADD      r4,r3,r0,LSL #3
                  |L12.72|
000048  f8553022          LDR      r3,[r5,r2,LSL #2]
00004c  2a02              CMP      r2,#2
00004e  ebc31303          RSB      r3,r3,r3,LSL #4
000052  ebc303c3          RSB      r3,r3,r3,LSL #3
000056  eb0603c3          ADD      r3,r6,r3,LSL #3
00005a  f833c014          LDRH     r12,[r3,r4,LSL #1]
00005e  eb030344          ADD      r3,r3,r4,LSL #1
000062  f8b33154          LDRH     r3,[r3,#0x154]
000066  d921              BLS      |L12.172|
000068  eb091a02          ADD      r10,r9,r2,LSL #4
00006c  eb0a0a40          ADD      r10,r10,r0,LSL #1
000070  f93aac30          LDRSH    r10,[r10,#-0x30]
000074  45e2              CMP      r10,r12
000076  d119              BNE      |L12.172|
000078  eb071a02          ADD      r10,r7,r2,LSL #4
00007c  eb0a0a40          ADD      r10,r10,r0,LSL #1
000080  f93aac30          LDRSH    r10,[r10,#-0x30]
000084  45e2              CMP      r10,r12
000086  d111              BNE      |L12.172|
000088  eb011a02          ADD      r10,r1,r2,LSL #4
00008c  eb0a0a40          ADD      r10,r10,r0,LSL #1
000090  f93aac30          LDRSH    r10,[r10,#-0x30]
000094  459a              CMP      r10,r3
000096  d109              BNE      |L12.172|
000098  eb081a02          ADD      r10,r8,r2,LSL #4
00009c  eb0a0a40          ADD      r10,r10,r0,LSL #1
0000a0  f93aac30          LDRSH    r10,[r10,#-0x30]
0000a4  459a              CMP      r10,r3
0000a6  bf08              IT       EQ
0000a8  f10b0b01          ADDEQ    r11,r11,#1
                  |L12.172|
0000ac  eb091a02          ADD      r10,r9,r2,LSL #4
0000b0  f82ac010          STRH     r12,[r10,r0,LSL #1]
0000b4  eb011c02          ADD      r12,r1,r2,LSL #4
0000b8  1c52              ADDS     r2,r2,#1
0000ba  f82c3010          STRH     r3,[r12,r0,LSL #1]
0000be  2a0a              CMP      r2,#0xa
0000c0  d3c2              BCC      |L12.72|
0000c2  2200              MOVS     r2,#0
0000c4  4614              MOV      r4,r2
0000c6  4694              MOV      r12,r2
                  |L12.200|
0000c8  f00c03ff          AND      r3,r12,#0xff
0000cc  eb091503          ADD      r5,r9,r3,LSL #4
0000d0  eb011303          ADD      r3,r1,r3,LSL #4
0000d4  f8358010          LDRH     r8,[r5,r0,LSL #1]
0000d8  f8337010          LDRH     r7,[r3,r0,LSL #1]
0000dc  f10c0303          ADD      r3,r12,#3
0000e0  b2dd              UXTB     r5,r3
0000e2  eb091305          ADD      r3,r9,r5,LSL #4
0000e6  eb011505          ADD      r5,r1,r5,LSL #4
0000ea  f8333010          LDRH     r3,[r3,r0,LSL #1]
0000ee  f8356010          LDRH     r6,[r5,r0,LSL #1]
0000f2  f10c0506          ADD      r5,r12,#6
0000f6  b2ed              UXTB     r5,r5
0000f8  eb091a05          ADD      r10,r9,r5,LSL #4
0000fc  eb011505          ADD      r5,r1,r5,LSL #4
000100  f83aa010          LDRH     r10,[r10,r0,LSL #1]
000104  f8355010          LDRH     r5,[r5,r0,LSL #1]
000108  4598              CMP      r8,r3
00010a  bf02              ITTT     EQ
00010c  4553              CMPEQ    r3,r10
00010e  1c63              ADDEQ    r3,r4,#1
000110  b2dc              UXTBEQ   r4,r3
000112  42b7              CMP      r7,r6
000114  e000              B        |L12.280|
                  |L12.278|
000116  e02c              B        |L12.370|
                  |L12.280|
000118  bf02              ITTT     EQ
00011a  42ae              CMPEQ    r6,r5
00011c  1c52              ADDEQ    r2,r2,#1
00011e  b2d2              UXTBEQ   r2,r2
000120  f10c0c01          ADD      r12,r12,#1
000124  f1bc0f03          CMP      r12,#3
000128  d3ce              BCC      |L12.200|
00012a  2c03              CMP      r4,#3
00012c  bf28              IT       CS
00012e  2a03              CMPCS    r2,#3
000130  d302              BCC      |L12.312|
000132  4ab5              LDR      r2,|L12.1032|
000134  2301              MOVS     r3,#1
000136  7013              STRB     r3,[r2,#0]
                  |L12.312|
000138  f1bb0f07          CMP      r11,#7
00013c  d024              BEQ      |L12.392|
00013e  1c40              ADDS     r0,r0,#1
000140  2808              CMP      r0,#8
000142  f4ffaf75          BCC      |L12.48|
000146  49b2              LDR      r1,|L12.1040|
000148  22a0              MOVS     r2,#0xa0
00014a  f50170a0          ADD      r0,r1,#0x140
00014e  f7fffffe          BL       __aeabi_memcpy
000152  49b2              LDR      r1,|L12.1052|
000154  22a0              MOVS     r2,#0xa0
000156  f50170a0          ADD      r0,r1,#0x140
00015a  f7fffffe          BL       __aeabi_memcpy
00015e  2000              MOVS     r0,#0
                  |L12.352|
;;;2745   
;;;2746   #if USED_ESD_RECOERY_DETECTION_RAWDATA_STUCK
;;;2747   	thisInfo->bIsESDRecovery = algorithm_CheckRawDataStuck();
000160  4ca9              LDR      r4,|L12.1032|
;;;2748   	if(thisInfo->bIsESDRecovery)
000162  2800              CMP      r0,#0
000164  69a1              LDR      r1,[r4,#0x18]         ;2747  ; thisInfo
000166  f5015180          ADD      r1,r1,#0x1000         ;2747
00016a  f88104fc          STRB     r0,[r1,#0x4fc]        ;2747
00016e  d15c              BNE      |L12.554|
000170  e00c              B        |L12.396|
                  |L12.370|
000172  7d41              LDRB     r1,[r0,#0x15]         ;2689
000174  1c49              ADDS     r1,r1,#1              ;2689
000176  b2c9              UXTB     r1,r1                 ;2689
000178  7541              STRB     r1,[r0,#0x15]         ;2689
00017a  2902              CMP      r1,#2                 ;2691
00017c  bf84              ITT      HI                    ;2693
00017e  2100              MOVHI    r1,#0                 ;2693
000180  7501              STRBHI   r1,[r0,#0x14]         ;2693
000182  f63faf4b          BHI      |L12.28|
000186  e050              B        |L12.554|
                  |L12.392|
000188  2001              MOVS     r0,#1                 ;2691
00018a  e7e9              B        |L12.352|
                  |L12.396|
;;;2749   	{
;;;2750   	#if USED_ESD_DEBUG
;;;2751   		gbRawdataStuckReset = thisInfo->bIsESDRecovery;
;;;2752   	#endif
;;;2753   		return YES; //
;;;2754   //		while(1); // watch-dog Reset!!
;;;2755   	}
;;;2756   #endif /* USED_ESD_RECOERY_DETECTION_RAWDATA_STUCK */
;;;2757   
;;;2758   #if DEF_ESD_DEBUG_RAWDATA_BEFORE_LINEFILTER
;;;2759   	protocol_LogMatrix(LT_RAWDATA, COL_MAX, HAL_GET_RAW_IMAGE_PTR(), COL_MAX, ROW_MAX, 84/*Raw Data*/);
00018c  4da4              LDR      r5,|L12.1056|
00018e  e9d50100          LDRD     r0,r1,[r5,#0]
000192  68aa              LDR      r2,[r5,#8]  ; <Data5>
000194  9002              STR      r0,[sp,#8]
000196  e9cd1203          STRD     r1,r2,[sp,#0xc]
00019a  4a9e              LDR      r2,|L12.1044|
00019c  a902              ADD      r1,sp,#8
00019e  2003              MOVS     r0,#3
0001a0  f7fffffe          BL       protocol_Log
;;;2760   	#if USED_ESD_RECOVERY_SENSING_WITHOUT_MODULATION
;;;2761   		protocol_LogMatrix(LT_PENPOS_RAWDATA, COL_MAX, HAL_GET_ESD_RAW_IMAGE_PTR(), COL_MAX, FINGER_ESD_SCAN_ROW_MAX_NUM, 84/*Raw Data*/);
0001a4  e9d50103          LDRD     r0,r1,[r5,#0xc]
0001a8  696a              LDR      r2,[r5,#0x14]  ; <Data6>
0001aa  9207              STR      r2,[sp,#0x1c]
0001ac  e9cd0105          STRD     r0,r1,[sp,#0x14]
0001b0  4a9c              LDR      r2,|L12.1060|
0001b2  a905              ADD      r1,sp,#0x14
0001b4  2019              MOVS     r0,#0x19
0001b6  f7fffffe          BL       protocol_Log
;;;2762   	#endif
;;;2763   #endif
;;;2764   
;;;2765   	memset(sLFOffsetRow, 0, sizeof(sLFOffsetRow));
0001ba  2160              MOVS     r1,#0x60
0001bc  489a              LDR      r0,|L12.1064|
0001be  f7fffffe          BL       __aeabi_memclr
;;;2766   	memset(sLFOffsetCol, 0, sizeof(sLFOffsetCol));
0001c2  21a8              MOVS     r1,#0xa8
0001c4  4899              LDR      r0,|L12.1068|
0001c6  f7fffffe          BL       __aeabi_memclr
;;;2767   
;;;2768   	if(!IS_S3_MODE(eSensingMode))
0001ca  9800              LDR      r0,[sp,#0]
0001cc  f4106f00          TST      r0,#0x800
0001d0  d106              BNE      |L12.480|
;;;2769   	{
;;;2770   	#if FINGER_LF_VER1_EN
;;;2771   		if(thisModeConf->SensingFilter.cLineFilter == 1)
;;;2772   		{
;;;2773   			alogorithm_linefilter(eSensingMode);
;;;2774   		}
;;;2775   	#endif
;;;2776   	#if FINGER_LF_VER2_EN
;;;2777   		if(thisModeConf->SensingFilter.cLineFilter == 2)
0001d2  6960              LDR      r0,[r4,#0x14]  ; thisModeConf
0001d4  f890004c          LDRB     r0,[r0,#0x4c]
0001d8  2802              CMP      r0,#2
;;;2778   		{
;;;2779   			alogorithm_linefilter_2();
0001da  bf08              IT       EQ
0001dc  f7fffffe          BLEQ     alogorithm_linefilter_2
                  |L12.480|
;;;2780   		}
;;;2781   	#endif
;;;2782   	#if	USED_DSPA_FUNC_FOR_FINGER && USED_DSPA_FUNC_FOR_FINGER_LF
;;;2783   		if(thisModeConf->SensingFilter.cLineFilter == 3)
;;;2784   		{
;;;2785   			uint16_t * pBaseImage;
;;;2786   		#if USED_NOISE_HOPPING_FREQ
;;;2787   			if(ptAppInfo->eSelectFreq == FREQ_MAIN)
;;;2788   			{
;;;2789   				pBaseImage = g_pFingerBaseImage;
;;;2790   			}
;;;2791   			else
;;;2792   			{
;;;2793   				pBaseImage = g_pFingerHop1BaseImage;
;;;2794   			}
;;;2795   //			pBaseImage = HAL_GET_FREQ_BASELINE_PTR(ptAppInfo->eSelectFreq);
;;;2796   		#else /* USED_NOISE_HOPPING_FREQ */
;;;2797   			pBaseImage = g_pFingerBaseImage;//HAL_GetBaseImagePointer(HAL_GetSensingMode(), BASELINE_TYPE_FULL);
;;;2798   		#endif /* USED_NOISE_HOPPING_FREQ */
;;;2799   			alogorithm_linefilter_dspA((uint32_t)&RAWIMAGE[0][0],(uint32_t)(&pBaseImage[0]),(uint32_t)&DSPATMPDELTA_Finger[0][0],(uint32_t)&LINEFILTERBUFST2_Finger[0],(uint32_t)&LINEFILTERBUFST3_Finger[0],ROW_MAX,
;;;2800   			(uint32_t)(thisModeConf->SensingFilter.sLineFilterUpLimit<<ptModuleModeConf->ucOvrShift),(uint32_t)(thisModeConf->SensingFilter.sLineFilterLowLimit<<ptModuleModeConf->ucOvrShift),0);
;;;2801   		}
;;;2802   	#endif
;;;2803   	#if FINGER_LF_VER4_EN
;;;2804   		if(thisModeConf->SensingFilter.cLineFilter == 4)
;;;2805   		{
;;;2806   			alogorithm_linefilter_simple(eSensingMode);
;;;2807   			alogorithm_vertical_linefilter_simple(eSensingMode);
;;;2808   		}
;;;2809   	#endif /* (CUSTOMER != MODEL_DEF_FHD_92503B) */
;;;2810   	}
;;;2811   
;;;2812   #if (DEF_ESD_DEBUG_RAWDATA_BEFORE_LINEFILTER == NO)
;;;2813   	protocol_LogMatrix(LT_RAWDATA, COL_MAX, HAL_GET_RAW_IMAGE_PTR(), COL_MAX, ROW_MAX, 84/*Raw Data*/);
;;;2814   #endif
;;;2815   
;;;2816   	algorithm_baseline_calculate_delta(mode);
0001e0  980e              LDR      r0,[sp,#0x38]
0001e2  f7fffffe          BL       algorithm_baseline_calculate_delta
;;;2817   	
;;;2818   	#if USED_ESD_RECOVERY_RESET_TOUCH_AT_FIRST_FRAME
;;;2819   	if(thisInfo->bIsESDGhostRecoveryATFirstFrame_Check)
0001e6  69a0              LDR      r0,[r4,#0x18]  ; thisInfo
0001e8  f5005080          ADD      r0,r0,#0x1000
0001ec  f89014fd          LDRB     r1,[r0,#0x4fd]
0001f0  b1f9              CBZ      r1,|L12.562|
;;;2820   	{
;;;2821   		if(thisInfo->ulESDGhostRecoveryATFirstFrame_Check_Count == 0)
0001f2  f8d01500          LDR      r1,[r0,#0x500]
0001f6  2900              CMP      r1,#0
;;;2822   		{
;;;2823   			thisInfo->ulESDGhostRecoveryATFirstFrame_TouchExpect_Count = 0;
0001f8  bf04              ITT      EQ
0001fa  2200              MOVEQ    r2,#0
0001fc  f8c02504          STREQ    r2,[r0,#0x504]
000200  1c49              ADDS     r1,r1,#1
;;;2824   		}
;;;2825   
;;;2826   		thisInfo->ulESDGhostRecoveryATFirstFrame_Check_Count++;
;;;2827   		if(thisInfo->ulESDGhostRecoveryATFirstFrame_Check_Count < DEF_ESD_RECOVERY_RESET_TOUCH_AT_FIRST_FRAME_CNT_THD)
000202  f8c01500          STR      r1,[r0,#0x500]
000206  290a              CMP      r1,#0xa
000208  d208              BCS      |L12.540|
;;;2828   		{
;;;2829   			if(thisInfo->bTouchExpect)
00020a  f890132e          LDRB     r1,[r0,#0x32e]
00020e  b181              CBZ      r1,|L12.562|
;;;2830   			{
;;;2831   				thisInfo->ulESDGhostRecoveryATFirstFrame_TouchExpect_Count++;
000210  f8d01504          LDR      r1,[r0,#0x504]
000214  1c49              ADDS     r1,r1,#1
;;;2832   				// Touch Skip!!
;;;2833   				return YES;
000216  f8c01504          STR      r1,[r0,#0x504]
00021a  e006              B        |L12.554|
                  |L12.540|
;;;2834   			}
;;;2835   		}
;;;2836   		else
;;;2837   		{
;;;2838   			thisInfo->bIsESDGhostRecoveryATFirstFrame_Check = NO;
00021c  2100              MOVS     r1,#0
00021e  f88014fd          STRB     r1,[r0,#0x4fd]
;;;2839   			if(thisInfo->ulESDGhostRecoveryATFirstFrame_TouchExpect_Count > 0)
000222  f8d01504          LDR      r1,[r0,#0x504]
000226  b939              CBNZ     r1,|L12.568|
000228  e003              B        |L12.562|
                  |L12.554|
;;;2840   			{
;;;2841   				thisInfo->bIsESDRecovery = YES;
;;;2842   				// Reset For ESD!!
;;;2843   				return YES;
;;;2844   			}
;;;2845   		}
;;;2846   	}
;;;2847   	#endif /* USED_ESD_RECOVERY_RESET_TOUCH_AT_FIRST_FRAME */
;;;2848   
;;;2849   	#if USED_ESD_RECOVERY_CHECK_ABNORMAL_PEN_DELTA
;;;2850   	if (thisInfo->bIsESD_Abnormal_Delta_Reset)
;;;2851   	{
;;;2852   		thisInfo->bIsESDRecovery = YES;
;;;2853   		// Reset For ESD!!
;;;2854   		return YES;
;;;2855   	}
;;;2856   	#endif
;;;2857   
;;;2858   	protocol_LogPaddedMatrix(LT_INTENSITY, COL_MAX, HAL_GET_DELTA_IMAGE_PTR(), COL_MAX, ROW_MAX, 81/*MAX Intensity*/);
;;;2859   	#if USED_ESD_RECOVERY_SENSING_WITHOUT_MODULATION
;;;2860   		protocol_LogMatrix(LT_PENPOS_INTENSITY, COL_MAX, HAL_GET_ESD_DELTA_IMAGE_PTR(), COL_MAX, FINGER_ESD_SCAN_ROW_MAX_NUM, 81/*MAX Intensity*/);
;;;2861   	#endif
;;;2862   
;;;2863   	#if USED_ESD_RECOVERY_SENSING_WITHOUT_MODULATION
;;;2864   	{
;;;2865   		if(thisInfo->bIsESD_ReportSkip_ByESDScan == YES)
;;;2866   		{
;;;2867   			if(thisInfo->ulESD_ReportSkip_Count_ByESDScan < DEF_ESD_SCAN_REPORT_SKIP_CNT_THD)
;;;2868   			{
;;;2869   				thisInfo->ulESD_ReportSkip_Count_ByESDScan++;
;;;2870   				// Touch Skip!!
;;;2871   				return YES;
;;;2872   			}
;;;2873   			else
;;;2874   			{
;;;2875   				thisInfo->bIsESD_ReportSkip_ByESDScan = NO;
;;;2876   				thisInfo->ulESD_ReportSkip_Count_ByESDScan = 0;
;;;2877   			}
;;;2878   		}
;;;2879   	}
;;;2880   	#endif
;;;2881   //	return YES;
;;;2882   		
;;;2883   	if((mode == FULL_MODE && !thisModeConf->BaseLine.bFullModeReBaseCheckOff) || (mode == LOCAL_FINGER_MODE && !thisModeConf->BaseLine.bLocalModeReBaseCheckOff))
;;;2884   	{
;;;2885   		algorithm_check_recal_cond();
;;;2886   		bIsRecalState = algorithm_is_recalibrate();
;;;2887   	#if USED_ESD_DEBUG
;;;2888   		gbRecalReset = bIsRecalState;
;;;2889   	#endif
;;;2890   	}
;;;2891   	
;;;2892   	if(IS_S3_MODE(eSensingMode) && IS_IDLE_MODE(eSensingMode))
;;;2893   	{
;;;2894   		algorithm_baseline_tracking_continuous(mode);
;;;2895   	}
;;;2896   	else
;;;2897   	{
;;;2898   		if(bIsRecalState == NO)
;;;2899   		{
;;;2900   #if (FingerAreaPenDeltaDelete==1 || FingerAreaPenDeltaNoAcc==1 || FingerAreaLineFilter == 1)
;;;2901   			if(mode == LOCAL_FINGER_MODE)
;;;2902   			{
;;;2903   				if(thisModeConf->BaseLine.cFingerAreaPenDeltaDelete != 0 || thisModeConf->BaseLine.cFingerAreaPenDeltaNoAcc != 0 || thisModeConf->SensingFilter.sFingerAreaLineFilterLimit != 0)
;;;2904   				{
;;;2905   					thisInfo->tPenInfo.LocalFingerArea.rs = ROW_MAX;
;;;2906   					thisInfo->tPenInfo.LocalFingerArea.re = 0;
;;;2907   					thisInfo->tPenInfo.LocalFingerArea.cs = COL_MAX;
;;;2908   					thisInfo->tPenInfo.LocalFingerArea.ce = 0;	
;;;2909   				}
;;;2910   			}
;;;2911   #endif			
;;;2912   			// process label image from delta image
;;;2913   			algorithm_label_process(mode);
;;;2914   			algorithm_coord_process(FULL_MODE);
;;;2915   #if (INTERPOLATION_VER2_En == YES || INTERPOLATION_VER3_En == YES)
;;;2916   			if(ucInterpolation_Ver >= 2)
;;;2917   			{		
;;;2918   				algorithm_coord_interpolation_v02(ucInterpolation_Ver);
;;;2919   			}
;;;2920   #endif
;;;2921   		}
;;;2922   
;;;2923   #if USED_NOISE_HOPPING_FREQ
;;;2924   //		if(mode == FULL_MODE)
;;;2925   		{
;;;2926   			algorithm_noise_process(eSensingMode);
;;;2927   		}
;;;2928   #endif /* USED_NOISE_HOPPING_FREQ */
;;;2929   
;;;2930   #if PALM_VER1_EN
;;;2931   		if(thisModeConf->Palm.ucPalmDetectionOn == 1 || (thisModeConf->Palm.ucPalmDetectionOn == 3 && thisInfo->bNewVersionPalm == 0))
;;;2932   			public_func_PalmTouch_handler();
;;;2933   		
;;;2934   		if(thisInfo->bIsPalm || thisInfo->tCoord.tPos.sFinger_ > 5) thisInfo->bNewVersionPalm = 1;
;;;2935   		if(!thisInfo->bTouchExpect) thisInfo->bNewVersionPalm = 0;
;;;2936   #endif
;;;2937   		if(thisInfo->bIsPalm)
;;;2938   		{
;;;2939   			if(thisInfo->tLabel.ucPalmCnt < 100)
;;;2940   				thisInfo->tLabel.ucPalmCnt++;
;;;2941   		}
;;;2942   		else
;;;2943   			thisInfo->tLabel.ucPalmCnt = 0;
;;;2944   
;;;2945   #if USED_ESD_RECOVERY_GHOST_TOUCH_DELTA_PATTERN
;;;2946   		{
;;;2947   			bool_t bTopMuxDelta, bBottomMuxDelta;
;;;2948   			uint8_t max_c, mux_num;
;;;2949   			uint16_t min_delta;
;;;2950   
;;;2951   //			usLabelThd  = thisModeConf->Label.usSeedBase;
;;;2952   //			usLabelThd += ((temp_delta->iMaxStrength - thisModeConf->Label.usSeedBase) * thisModeConf->Label.ucSeedSlope)>>6;
;;;2953   
;;;2954   			if (thisInfo->tDelta.iMaxStrength > thisModeConf->Label.usSeedBase)
;;;2955   			{
;;;2956   				max_c = thisInfo->tDelta.tMaxCellPos.c;
;;;2957   				mux_num = thisInfo->tDelta.tMaxCellPos.r / ROW_PER_MUX;
;;;2958   				min_delta = thisInfo->tDelta.iMaxStrength * MIN_DELTA_RATIO / 10;
;;;2959   
;;;2960   				//	1. Check current mux delta
;;;2961   				if (algorithm_Check_Mux_Delta(mux_num, max_c, min_delta, YES))
;;;2962   				{
;;;2963   					//	2. Check top/bottom mux delta
;;;2964   
;;;2965   					bTopMuxDelta = bBottomMuxDelta = YES;
;;;2966   
;;;2967   					if (mux_num != FIRST_MUX_NUM)
;;;2968   						bTopMuxDelta = algorithm_Check_Mux_Delta(mux_num - 1, max_c, MIN_DELTA, NO);
;;;2969   
;;;2970   					if (mux_num != LAST_MUX_NUM)
;;;2971   						bBottomMuxDelta = algorithm_Check_Mux_Delta(mux_num + 1, max_c, MIN_DELTA, NO);
;;;2972   
;;;2973   
;;;2974   					if (bTopMuxDelta && bBottomMuxDelta)
;;;2975   						gbSkipTouch = YES;	//	ESD Ghost Touch
;;;2976   				}
;;;2977   			}
;;;2978   
;;;2979   //			while(gbSkipTouch)	//	Debug
;;;2980   //			{
;;;2981   //				protocol_LogPaddedMatrix(LT_INTENSITY, COL_MAX, HAL_GET_DELTA_IMAGE_PTR(), COL_MAX, ROW_MAX, 81/*MAX Intensity*/);
;;;2982   //				medium_delay(300);
;;;2983   //#ifdef MODE_WDT
;;;2984   //				KICK_DOG();
;;;2985   //#endif
;;;2986   //			};
;;;2987   		}
;;;2988   #endif /* USED_ESD_RECOVERY_GHOST_TOUCH_DELTA_PATTERN */
;;;2989   
;;;2990   #if USED_PEN_MODE_OPERATION
;;;2991   		if(mode == FULL_MODE)
;;;2992   		{
;;;2993   			thisInfo->sFullLcoalChangeMinTh = thisModeConf->BaseLine.sFullLcoalChangeMinTh;
;;;2994   			if((thisInfo->bIsPalm == YES && thisInfo->tCoord.tPos.sFinger_ >= 1) || thisInfo->tCoord.tPos.sFinger_ >= 6)
;;;2995   				thisInfo->sFullLcoalChangeMinTh += thisModeConf->BaseLine.cFullLcoalChangeMinThOffset;
;;;2996   			if(thisInfo->tDelta.iMinStrength < thisInfo->sFullLcoalChangeMinTh)
;;;2997   			{
;;;2998   				thisInfo->bLocal_sensing = YES;
;;;2999   				algorithm_baseline_calculate_mux_range(thisInfo->tDelta.tMinCellPos.r, thisInfo->tDelta.tMinCellPos.c);
;;;3000   			}
;;;3001   		}
;;;3002   #endif
;;;3003   	
;;;3004   #if !USED_DO_NOT_FINGER_TOUCH_REPORT
;;;3005   #if (INTERPOLATION_VER2_En == YES || INTERPOLATION_VER3_En == YES) 
;;;3006   		if(ucInterpolation_Ver < 2)
;;;3007   #endif
;;;3008   		{
;;;3009   	#if (FINGER_Latency_Test_ByFW == YES)
;;;3010   			algorithm_coord_latency_cal_test();
;;;3011   	#endif
;;;3012   	#if (PEN_FINGER_1TOUCH_REPORT == NO)
;;;3013   #if (DEF_ESD_RECOVERY_CHECK_CURRENT_FRAME_RAWDATA_STUCK || USED_ESD_RECOVERY_GHOST_TOUCH_DELTA_PATTERN)
;;;3014   			if (!gbSkipTouch)
;;;3015   				algorithm_PendTouchEvent();
;;;3016   			else
;;;3017   			{
;;;3018   				gbSkipTouch = NO;
;;;3019   				gusSkipTouchCnt++;
;;;3020   			}
;;;3021   #else /* (DEF_ESD_RECOVERY_CHECK_CURRENT_FRAME_RAWDATA_STUCK || USED_ESD_RECOVERY_GHOST_TOUCH_DELTA_PATTERN) */
;;;3022   			algorithm_PendTouchEvent();
;;;3023   #endif /* (DEF_ESD_RECOVERY_CHECK_CURRENT_FRAME_RAWDATA_STUCK || USED_ESD_RECOVERY_GHOST_TOUCH_DELTA_PATTERN) */
;;;3024   	#endif
;;;3025   			algorithm_coord_UpdatePosHistoryInfo();
;;;3026   			//Heon
;;;3027   			if(thisInfo->bIsOutIn == YES){
;;;3028   				algorithm_OutInCheck();
;;;3029   			}
;;;3030   			//Heon
;;;3031   		}
;;;3032   #endif /* !USED_DO_NOT_FINGER_TOUCH_REPORT */
;;;3033   		
;;;3034   		if(thisModeConf->BaseLine.bFingerBaseTracking == 1 && ((mode == FULL_MODE && thisModeConf->BaseLine.bFullFingerBaseTracking == 1) || (mode == LOCAL_FINGER_MODE)))
;;;3035   			algorithm_baseline_tracking_continuous(mode);
;;;3036   	}
;;;3037   
;;;3038   	return (bIsRecalState == NO);
;;;3039   }
00022a  b00f              ADD      sp,sp,#0x3c
00022c  2001              MOVS     r0,#1                 ;2843
00022e  e8bd8ff0          POP      {r4-r11,pc}
                  |L12.562|
000232  f8901510          LDRB     r1,[r0,#0x510]        ;2850
000236  b119              CBZ      r1,|L12.576|
                  |L12.568|
000238  2101              MOVS     r1,#1                 ;2852
00023a  f88014fc          STRB     r1,[r0,#0x4fc]        ;2852
00023e  e7f4              B        |L12.554|
                  |L12.576|
000240  e9d50106          LDRD     r0,r1,[r5,#0x18]      ;2858
000244  6a2a              LDR      r2,[r5,#0x20]         ;2858  ; <Data7>
000246  e9cd0108          STRD     r0,r1,[sp,#0x20]      ;2858
00024a  920a              STR      r2,[sp,#0x28]         ;2858
00024c  4a78              LDR      r2,|L12.1072|
00024e  a908              ADD      r1,sp,#0x20           ;2858
000250  2004              MOVS     r0,#4                 ;2858
000252  f7fffffe          BL       protocol_Log
000256  e9d50109          LDRD     r0,r1,[r5,#0x24]      ;2860
00025a  6aea              LDR      r2,[r5,#0x2c]         ;2860  ; <Data8>
00025c  920d              STR      r2,[sp,#0x34]         ;2860
00025e  e9cd010b          STRD     r0,r1,[sp,#0x2c]      ;2860
000262  4a74              LDR      r2,|L12.1076|
000264  a90b              ADD      r1,sp,#0x2c           ;2860
000266  201b              MOVS     r0,#0x1b              ;2860
000268  f7fffffe          BL       protocol_Log
00026c  69a0              LDR      r0,[r4,#0x18]         ;2865  ; thisInfo
00026e  f5005180          ADD      r1,r0,#0x1000         ;2865
000272  f8912508          LDRB     r2,[r1,#0x508]        ;2865
000276  2a01              CMP      r2,#1                 ;2865
000278  d004              BEQ      |L12.644|
                  |L12.634|
00027a  9a0e              LDR      r2,[sp,#0x38]         ;2883
00027c  b18a              CBZ      r2,|L12.674|
00027e  2a02              CMP      r2,#2                 ;2883
000280  d014              BEQ      |L12.684|
000282  e05b              B        |L12.828|
                  |L12.644|
000284  f8d1250c          LDR      r2,[r1,#0x50c]        ;2867
000288  2a0a              CMP      r2,#0xa               ;2867
00028a  bf39              ITTEE    CC                    ;2869
00028c  1c50              ADDCC    r0,r2,#1              ;2869
00028e  f8c1050c          STRCC    r0,[r1,#0x50c]        ;2869
000292  2200              MOVCS    r2,#0                 ;2875
000294  f8812508          STRBCS   r2,[r1,#0x508]        ;2875
000298  bf28              IT       CS                    ;2876
00029a  f8c1250c          STRCS    r2,[r1,#0x50c]        ;2876
00029e  d3c4              BCC      |L12.554|
0002a0  e7eb              B        |L12.634|
                  |L12.674|
0002a2  6962              LDR      r2,[r4,#0x14]         ;2883  ; thisModeConf
0002a4  f8922035          LDRB     r2,[r2,#0x35]         ;2883
0002a8  bbba              CBNZ     r2,|L12.794|
0002aa  e003              B        |L12.692|
                  |L12.684|
0002ac  6962              LDR      r2,[r4,#0x14]         ;2883  ; thisModeConf
0002ae  f8922036          LDRB     r2,[r2,#0x36]         ;2883
0002b2  bb92              CBNZ     r2,|L12.794|
                  |L12.692|
0002b4  2200              MOVS     r2,#0                 ;2883
0002b6  7082              STRB     r2,[r0,#2]            ;2883
0002b8  70c2              STRB     r2,[r0,#3]            ;2883
0002ba  6963              LDR      r3,[r4,#0x14]         ;2883  ; thisModeConf
0002bc  f8d0c025          LDR      r12,[r0,#0x25]        ;2883
0002c0  f8d35027          LDR      r5,[r3,#0x27]         ;2883
0002c4  45ac              CMP      r12,r5                ;2883
0002c6  db09              BLT      |L12.732|
0002c8  f8d0502d          LDR      r5,[r0,#0x2d]         ;2883
0002cc  44ac              ADD      r12,r12,r5            ;2883
0002ce  f8d3502b          LDR      r5,[r3,#0x2b]         ;2883
0002d2  45ac              CMP      r12,r5                ;2883
0002d4  bfb8              IT       LT                    ;2883
0002d6  f04f0c01          MOVLT    r12,#1                ;2883
0002da  db01              BLT      |L12.736|
                  |L12.732|
0002dc  f04f0c00          MOV      r12,#0                ;2883
                  |L12.736|
0002e0  f880c002          STRB     r12,[r0,#2]           ;2883
0002e4  f891132e          LDRB     r1,[r1,#0x32e]        ;2883
0002e8  b939              CBNZ     r1,|L12.762|
0002ea  f8d0102d          LDR      r1,[r0,#0x2d]         ;2883
0002ee  f8d3502f          LDR      r5,[r3,#0x2f]         ;2883
0002f2  42a9              CMP      r1,r5                 ;2883
0002f4  bfb8              IT       LT                    ;2883
0002f6  2101              MOVLT    r1,#1                 ;2883
0002f8  db00              BLT      |L12.764|
                  |L12.762|
0002fa  2100              MOVS     r1,#0                 ;2883
                  |L12.764|
0002fc  70c1              STRB     r1,[r0,#3]            ;2883
0002fe  f1bc0f00          CMP      r12,#0                ;2883
000302  d00b              BEQ      |L12.796|
000304  f8933033          LDRB     r3,[r3,#0x33]         ;2883
000308  6841              LDR      r1,[r0,#4]            ;2883
00030a  4299              CMP      r1,r3                 ;2883
00030c  bfda              ITTE     LE                    ;2883
00030e  1c49              ADDLE    r1,r1,#1              ;2883
000310  6041              STRLE    r1,[r0,#4]            ;2883
000312  6042              STRGT    r2,[r0,#4]            ;2883
000314  dd10              BLE      |L12.824|
                  |L12.790|
000316  2001              MOVS     r0,#1                 ;2883
000318  e00f              B        |L12.826|
                  |L12.794|
00031a  e00f              B        |L12.828|
                  |L12.796|
00031c  2900              CMP      r1,#0                 ;2883
00031e  bf04              ITT      EQ                    ;2883
000320  6042              STREQ    r2,[r0,#4]            ;2883
000322  6082              STREQ    r2,[r0,#8]            ;2883
000324  d008              BEQ      |L12.824|
000326  f8933034          LDRB     r3,[r3,#0x34]         ;2883
00032a  6881              LDR      r1,[r0,#8]            ;2883
00032c  4299              CMP      r1,r3                 ;2883
00032e  bfda              ITTE     LE                    ;2883
000330  1c49              ADDLE    r1,r1,#1              ;2883
000332  6081              STRLE    r1,[r0,#8]            ;2883
000334  6082              STRGT    r2,[r0,#8]            ;2883
000336  dcee              BGT      |L12.790|
                  |L12.824|
000338  2000              MOVS     r0,#0                 ;2883
                  |L12.826|
00033a  9001              STR      r0,[sp,#4]            ;2886
                  |L12.828|
00033c  9800              LDR      r0,[sp,#0]            ;2892
00033e  f4106f00          TST      r0,#0x800             ;2892
000342  bf1e              ITTT     NE                    ;2892
000344  9800              LDRNE    r0,[sp,#0]            ;2892
000346  f4107f80          TSTNE    r0,#0x100             ;2892
00034a  980e              LDRNE    r0,[sp,#0x38]         ;2894
00034c  d15b              BNE      |L12.1030|
00034e  9801              LDR      r0,[sp,#4]            ;2898
000350  b928              CBNZ     r0,|L12.862|
000352  980e              LDR      r0,[sp,#0x38]         ;2913
000354  f7fffffe          BL       algorithm_label_process
000358  2000              MOVS     r0,#0                 ;2914
00035a  f7fffffe          BL       algorithm_coord_process
                  |L12.862|
00035e  9800              LDR      r0,[sp,#0]            ;2926
000360  f7fffffe          BL       algorithm_noise_process
000364  69a0              LDR      r0,[r4,#0x18]         ;2937  ; thisInfo
000366  f241312a          MOV      r1,#0x132a            ;2937
00036a  5c09              LDRB     r1,[r1,r0]            ;2937
00036c  b129              CBZ      r1,|L12.890|
00036e  f8901368          LDRB     r1,[r0,#0x368]        ;2939
000372  2964              CMP      r1,#0x64              ;2939
000374  bf38              IT       CC                    ;2939
000376  1c49              ADDCC    r1,r1,#1              ;2939
000378  d201              BCS      |L12.894|
                  |L12.890|
00037a  f8801368          STRB     r1,[r0,#0x368]        ;2940
                  |L12.894|
00037e  6961              LDR      r1,[r4,#0x14]         ;2954  ; thisModeConf
000380  f8d02015          LDR      r2,[r0,#0x15]         ;2954
000384  f8b11064          LDRH     r1,[r1,#0x64]         ;2954
000388  428a              CMP      r2,r1                 ;2954
00038a  dd32              BLE      |L12.1010|
00038c  f8908035          LDRB     r8,[r0,#0x35]         ;2956
000390  f9900036          LDRSB    r0,[r0,#0x36]         ;2957
000394  2167              MOVS     r1,#0x67              ;2957
000396  4348              MULS     r0,r1,r0              ;2957
000398  1241              ASRS     r1,r0,#9              ;2957
00039a  eba170e0          SUB      r0,r1,r0,ASR #31      ;2957
00039e  b2c5              UXTB     r5,r0                 ;2957
0003a0  4925              LDR      r1,|L12.1080|
0003a2  00d0              LSLS     r0,r2,#3              ;2957
0003a4  fb811000          SMULL    r1,r0,r1,r0           ;2958
0003a8  1081              ASRS     r1,r0,#2              ;2958
0003aa  eba170e0          SUB      r0,r1,r0,ASR #31      ;2958
0003ae  b282              UXTH     r2,r0                 ;2958
0003b0  2301              MOVS     r3,#1                 ;2961
0003b2  4641              MOV      r1,r8                 ;2961
0003b4  4628              MOV      r0,r5                 ;2961
0003b6  f7fffffe          BL       algorithm_Check_Mux_Delta
0003ba  b1d0              CBZ      r0,|L12.1010|
0003bc  2601              MOVS     r6,#1                 ;2965
0003be  4637              MOV      r7,r6                 ;2965
0003c0  b14d              CBZ      r5,|L12.982|
0003c2  1e68              SUBS     r0,r5,#1              ;2968
0003c4  b2c0              UXTB     r0,r0                 ;2968
0003c6  2300              MOVS     r3,#0                 ;2968
0003c8  220a              MOVS     r2,#0xa               ;2968
0003ca  4641              MOV      r1,r8                 ;2968
0003cc  f7fffffe          BL       algorithm_Check_Mux_Delta
0003d0  4606              MOV      r6,r0                 ;2968
0003d2  2d09              CMP      r5,#9                 ;2970
0003d4  d007              BEQ      |L12.998|
                  |L12.982|
0003d6  1c68              ADDS     r0,r5,#1              ;2971
0003d8  b2c0              UXTB     r0,r0                 ;2971
0003da  2300              MOVS     r3,#0                 ;2971
0003dc  220a              MOVS     r2,#0xa               ;2971
0003de  4641              MOV      r1,r8                 ;2971
0003e0  f7fffffe          BL       algorithm_Check_Mux_Delta
0003e4  4607              MOV      r7,r0                 ;2971
                  |L12.998|
0003e6  2e00              CMP      r6,#0                 ;2974
0003e8  bf1e              ITTT     NE                    ;2974
0003ea  2f00              CMPNE    r7,#0                 ;2974
0003ec  2001              MOVNE    r0,#1                 ;2975
0003ee  7020              STRBNE   r0,[r4,#0]            ;2975
0003f0  d101              BNE      |L12.1014|
                  |L12.1010|
0003f2  7820              LDRB     r0,[r4,#0]            ;3014  ; gbSkipTouch
0003f4  b398              CBZ      r0,|L12.1118|
                  |L12.1014|
0003f6  f04f0000          MOV      r0,#0                 ;3018
0003fa  7020              STRB     r0,[r4,#0]            ;3018
0003fc  8860              LDRH     r0,[r4,#2]            ;3019  ; gusSkipTouchCnt
0003fe  f1000001          ADD      r0,r0,#1              ;3019
000402  8060              STRH     r0,[r4,#2]            ;3019
                  |L12.1028|
000404  e01a              B        |L12.1084|
                  |L12.1030|
000406  e038              B        |L12.1146|
                  |L12.1032|
                          DCD      ||area_number.25||
                  |L12.1036|
                          DCD      ||area_number.25||+0x30
                  |L12.1040|
                          DCD      ||.bss||+0xb0
                  |L12.1044|
                          DCD      FullSharedBuff
                  |L12.1048|
                          DCD      ||.bss||+0x1f0
                  |L12.1052|
                          DCD      ||.bss||+0x150
                  |L12.1056|
                          DCD      ||.constdata||
                  |L12.1060|
                          DCD      FullSharedBuff+0x1f80
                  |L12.1064|
                          DCD      ||.bss||+0x50
                  |L12.1068|
                          DCD      ||.bss||+0x3c6
                  |L12.1072|
                          DCD      FullSharedBuff+0xf6c0
                  |L12.1076|
                          DCD      FullSharedBuff+0x3330
                  |L12.1080|
                          DCD      0x66666667
                  |L12.1084|
00043c  f7fffffe          BL       algorithm_coord_UpdatePosHistoryInfo
000440  69a0              LDR      r0,[r4,#0x18]         ;3027  ; thisInfo
000442  f5005080          ADD      r0,r0,#0x1000         ;3027
000446  f890032b          LDRB     r0,[r0,#0x32b]        ;3027
00044a  2801              CMP      r0,#1                 ;3027
00044c  bf08              IT       EQ                    ;3028
00044e  f7fffffe          BLEQ     algorithm_OutInCheck
000452  6960              LDR      r0,[r4,#0x14]         ;3034  ; thisModeConf
000454  f8901043          LDRB     r1,[r0,#0x43]         ;3034
000458  2901              CMP      r1,#1                 ;3034
00045a  d004              BEQ      |L12.1126|
00045c  e00f              B        |L12.1150|
                  |L12.1118|
00045e  e7ff              B        |L12.1120|
                  |L12.1120|
000460  f7fffffe          BL       algorithm_PendTouchEvent
000464  e7ce              B        |L12.1028|
                  |L12.1126|
000466  990e              LDR      r1,[sp,#0x38]         ;3034
000468  b111              CBZ      r1,|L12.1136|
00046a  2902              CMP      r1,#2                 ;3034
00046c  d004              BEQ      |L12.1144|
00046e  e006              B        |L12.1150|
                  |L12.1136|
000470  f890004a          LDRB     r0,[r0,#0x4a]         ;3034
000474  2801              CMP      r0,#1                 ;3034
000476  d102              BNE      |L12.1150|
                  |L12.1144|
000478  4608              MOV      r0,r1                 ;3035
                  |L12.1146|
00047a  f7fffffe          BL       algorithm_baseline_tracking_continuous
                  |L12.1150|
00047e  9801              LDR      r0,[sp,#4]            ;3038
000480  2800              CMP      r0,#0                 ;3038
000482  bf18              IT       NE                    ;3038
000484  2000              MOVNE    r0,#0                 ;3038
000486  f43faed0          BEQ      |L12.554|
00048a  b00f              ADD      sp,sp,#0x3c
00048c  e8bd8ff0          POP      {r4-r11,pc}
;;;3040   
                          ENDP


                          AREA ||i.algorithm_process_Idle||, CODE, READONLY, ALIGN=2

                  algorithm_process_Idle PROC
;;;3090   #if USED_IDLE_MODE_CONTROL
;;;3091   bool_t algorithm_process_Idle(void)
000000  b510              PUSH     {r4,lr}
;;;3092   {
000002  b086              SUB      sp,sp,#0x18
;;;3093   	bool_t bIsRecalState = NO;
;;;3094   
;;;3095   	memset(sLFOffsetRow, 0, sizeof(sLFOffsetRow));
000004  2160              MOVS     r1,#0x60
000006  4813              LDR      r0,|L13.84|
000008  f7fffffe          BL       __aeabi_memclr
;;;3096   	memset(sLFOffsetCol, 0, sizeof(sLFOffsetCol));
00000c  21a8              MOVS     r1,#0xa8
00000e  4812              LDR      r0,|L13.88|
000010  f7fffffe          BL       __aeabi_memclr
;;;3097   	alogorithm_linefilter_idle();
000014  f7fffffe          BL       alogorithm_linefilter_idle
;;;3098   	algorithm_baseline_calculate_delta_idle();
000018  f7fffffe          BL       algorithm_baseline_calculate_delta_idle
;;;3099   	algorithm_baseline_tracking_continuous_idle();
00001c  f7fffffe          BL       algorithm_baseline_tracking_continuous_idle
;;;3100   
;;;3101   	protocol_LogMatrix(LT_RAWDATA, COL_MAX, HAL_NI_GET_RAW_IMAGE_PTR(), COL_MAX, NI_ROW_MAX, 84/*MAX Intensity*/);
000020  4c0e              LDR      r4,|L13.92|
000022  e9d4010c          LDRD     r0,r1,[r4,#0x30]
000026  6ba2              LDR      r2,[r4,#0x38]  ; <Data11>
000028  9000              STR      r0,[sp,#0]
00002a  e9cd1201          STRD     r1,r2,[sp,#4]
00002e  4a0c              LDR      r2,|L13.96|
000030  4669              MOV      r1,sp
000032  2003              MOVS     r0,#3
000034  f7fffffe          BL       protocol_Log
;;;3102   //	#if USED_IDLE_FINGER_EVEN_ODD
;;;3103   //		protocol_LogMatrix(LT_INTENSITY, COL_MAX, HAL_NI_GET_DELTA_IMAGE_PTR(), COL_MAX, (LOCAL_FINGER_1MUX_ROW_NUM<<1), 84/*MAX Intensity*/);
;;;3104   //	#else
;;;3105   		protocol_LogMatrix(LT_INTENSITY, COL_MAX, HAL_NI_GET_DELTA_IMAGE_PTR(), COL_MAX, LOCAL_FINGER_1MUX_ROW_NUM, 84/*MAX Intensity*/);
000038  e9d4010f          LDRD     r0,r1,[r4,#0x3c]
00003c  6c62              LDR      r2,[r4,#0x44]  ; <Data12>
00003e  9205              STR      r2,[sp,#0x14]
000040  e9cd0103          STRD     r0,r1,[sp,#0xc]
000044  4a07              LDR      r2,|L13.100|
000046  a903              ADD      r1,sp,#0xc
000048  2004              MOVS     r0,#4
00004a  f7fffffe          BL       protocol_Log
;;;3106   //	#endif
;;;3107   
;;;3108   	return (bIsRecalState == NO);
;;;3109   }
00004e  b006              ADD      sp,sp,#0x18
000050  2001              MOVS     r0,#1                 ;3108
000052  bd10              POP      {r4,pc}
;;;3110   #endif /* USED_IDLE_MODE_CONTROL */
                          ENDP

                  |L13.84|
                          DCD      ||.bss||+0x50
                  |L13.88|
                          DCD      ||.bss||+0x3c6
                  |L13.92|
                          DCD      ||.constdata||
                  |L13.96|
                          DCD      FullSharedBuff
                  |L13.100|
                          DCD      FullSharedBuff+0x12600

                          AREA ||i.alogorithm_linefilter_2||, CODE, READONLY, ALIGN=2

                  alogorithm_linefilter_2 PROC
;;;1803    */
;;;1804   void alogorithm_linefilter_2(void)
000000  e92d4ff0          PUSH     {r4-r11,lr}
;;;1805   {
;;;1806   	uint32_t r, c;
;;;1807   	uint32_t i, j;
;;;1808   	int16_t d;
;;;1809   	int16_t SortBufCol[COL_MAX], TempBuf;
;;;1810   	uint8_t sort_cnt, sort_range;
;;;1811   	int16_t sub_offset;
;;;1812   	uint16_t * pBaseImage;
;;;1813   	int Max_Val, Min_Val;
;;;1814   	int lDiff, lDiffSum = 0, lDiffSumCnt = 0;
;;;1815   	int min_delta_th = (thisModeConf->SensingFilter.ucMinDeltaTh << ptModuleModeConf->ucOvrShift);
000004  495b              LDR      r1,|L14.372|
000006  b0c7              SUB      sp,sp,#0x11c          ;1805
;;;1816   	int lUpperTHD = thisModeConf->SensingFilter.sLineFilterUpLimit<<ptModuleModeConf->ucOvrShift, lLowTHD = thisModeConf->SensingFilter.sLineFilterLowLimit<<ptModuleModeConf->ucOvrShift;
;;;1817   //	eActivePenType_t eLocalFingerOPType = hal_Info_GetControlLocalFingerOPType();
;;;1818   
;;;1819   	//int max_compan_val = 11;
;;;1820   #if (ROW_MAX == 45)
;;;1821   	uint8_t do_row[] = {0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44};
;;;1822   #elif (ROW_MAX == 47)
;;;1823   	uint8_t do_row[] = {0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46};
;;;1824   #elif (ROW_MAX == 48)
;;;1825   	uint8_t do_row[] = {0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47};
000008  ad30              ADD      r5,sp,#0xc0
00000a  694a              LDR      r2,[r1,#0x14]         ;1815  ; thisModeConf
00000c  6908              LDR      r0,[r1,#0x10]         ;1815  ; ptModuleModeConf
00000e  f8923054          LDRB     r3,[r2,#0x54]         ;1815
000012  7800              LDRB     r0,[r0,#0]            ;1815
000014  4083              LSLS     r3,r3,r0              ;1815
000016  9340              STR      r3,[sp,#0x100]        ;1816
000018  f9b2304d          LDRSH    r3,[r2,#0x4d]         ;1816
00001c  f9b2204f          LDRSH    r2,[r2,#0x4f]         ;1816
000020  fa03f700          LSL      r7,r3,r0              ;1816
000024  fa02f800          LSL      r8,r2,r0              ;1816
000028  a053              ADR      r0,|L14.376|
00002a  e8b0101c          LDM      r0!,{r2-r4,r12}
00002e  e885101c          STM      r5,{r2-r4,r12}
000032  e8b0101c          LDM      r0!,{r2-r4,r12}
000036  ad34              ADD      r5,sp,#0xd0
000038  e885101c          STM      r5,{r2-r4,r12}
00003c  e890100d          LDM      r0,{r0,r2,r3,r12}
000040  ac38              ADD      r4,sp,#0xe0
000042  e884100d          STM      r4,{r0,r2,r3,r12}
;;;1826   #elif (ROW_MAX == 50)
;;;1827   	uint8_t do_row[] = {0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49};
;;;1828   #endif
;;;1829   	uint8_t row_cnt = sizeof(do_row);
;;;1830   	uint8_t real_row;
;;;1831   	
;;;1832   	sort_cnt = 4;//(uint8_t)(((int)COL_MAX * 5)/100);
;;;1833   	sort_range = COL_MAX/4 + COL_MAX%4;
;;;1834   
;;;1835   #if USED_NOISE_HOPPING_FREQ
;;;1836   	if(ptAppInfo->eCurrentSelectFreq == FREQ_MAIN)
000046  69c8              LDR      r0,[r1,#0x1c]  ; ptAppInfo
000048  7c80              LDRB     r0,[r0,#0x12]
00004a  2801              CMP      r0,#1
;;;1837   //	if(ptAppInfo->eSelectFreq == FREQ_MAIN)
;;;1838   	{
;;;1839   		pBaseImage = g_pFingerBaseImage;
00004c  bf0c              ITE      EQ
00004e  4856              LDREQ    r0,|L14.424|
;;;1840   	}
;;;1841   	else
;;;1842   	{
;;;1843   		pBaseImage = g_pFingerHop1BaseImage;
000050  4856              LDRNE    r0,|L14.428|
000052  6800              LDR      r0,[r0,#0]  ; g_pFingerHop1BaseImage
;;;1844   	}
;;;1845   #else /* USED_NOISE_HOPPING_FREQ */
;;;1846   	pBaseImage = g_pFingerBaseImage;//HAL_GetBaseImagePointer(HAL_GetSensingMode(), BASELINE_TYPE_FULL);
;;;1847   #endif /* USED_NOISE_HOPPING_FREQ */
;;;1848   	
;;;1849   	for(r = 0; r < row_cnt; r++)
;;;1850   	{
;;;1851   		real_row = do_row[r];
;;;1852   		lDiffSum = 0, lDiffSumCnt = 0;
;;;1853   		Max_Val = INT16_MIN, Min_Val = INT16_MAX;
;;;1854   		for( c = 0; c < sort_range; c++ )
;;;1855   		{
;;;1856   			SortBufCol[c] = lDiff = (int16_t)HAL_READ_RAW_IMAGE(real_row, (c*4)) - (int16_t)pBaseImage[real_row*COL_MAX + c*4];
;;;1857   			
;;;1858   			if(lDiff < lUpperTHD && lDiff > lLowTHD)
;;;1859   			{
;;;1860   				if(Max_Val < lDiff)Max_Val = lDiff;
;;;1861   				if(Min_Val > lDiff)Min_Val = lDiff;
;;;1862   				lDiffSum += lDiff;
;;;1863   				lDiffSumCnt++;
;;;1864   			}
;;;1865   		}
;;;1866   		
;;;1867   		if(min_delta_th && Min_Val < -min_delta_th && thisInfo->tLabel.ucPalmCnt < 10)
000054  9041              STR      r0,[sp,#0x104]
000056  6988              LDR      r0,[r1,#0x18]  ; thisInfo
000058  9042              STR      r0,[sp,#0x108]        ;1815
00005a  9840              LDR      r0,[sp,#0x100]
00005c  2500              MOVS     r5,#0                 ;1849
00005e  4240              RSBS     r0,r0,#0
000060  902e              STR      r0,[sp,#0xb8]
                  |L14.98|
000062  a830              ADD      r0,sp,#0xc0           ;1851
000064  9941              LDR      r1,[sp,#0x104]        ;1854
000066  5d46              LDRB     r6,[r0,r5]            ;1851
000068  4a52              LDR      r2,|L14.436|
00006a  ebc600c6          RSB      r0,r6,r6,LSL #3       ;1854
00006e  eb000040          ADD      r0,r0,r0,LSL #1       ;1854
000072  f04f0b00          MOV      r11,#0                ;1852
000076  f8dfa138          LDR      r10,|L14.432|
00007a  465c              MOV      r4,r11                ;1852
00007c  f64779ff          MOV      r9,#0x7fff            ;1853
000080  eb0101c0          ADD      r1,r1,r0,LSL #3       ;1854
000084  466b              MOV      r3,sp                 ;1854
000086  eb0202c0          ADD      r2,r2,r0,LSL #3       ;1854
00008a  f04f0c15          MOV      r12,#0x15             ;1854
00008e  bf00              NOP                            ;1856
                  |L14.144|
000090  f9b20000          LDRSH    r0,[r2,#0]            ;1856
000094  f9b1e000          LDRSH    lr,[r1,#0]            ;1856
000098  eba0000e          SUB      r0,r0,lr              ;1856
00009c  f8230b02          STRH     r0,[r3],#2            ;1856
0000a0  42b8              CMP      r0,r7                 ;1858
0000a2  bfb8              IT       LT                    ;1858
0000a4  4580              CMPLT    r8,r0                 ;1858
0000a6  da05              BGE      |L14.180|
0000a8  4582              CMP      r10,r0                ;1860
0000aa  db5e              BLT      |L14.362|
                  |L14.172|
0000ac  4581              CMP      r9,r0                 ;1861
0000ae  dc5e              BGT      |L14.366|
                  |L14.176|
0000b0  4483              ADD      r11,r11,r0            ;1862
0000b2  1c64              ADDS     r4,r4,#1              ;1862
                  |L14.180|
0000b4  3108              ADDS     r1,r1,#8              ;1862
0000b6  3208              ADDS     r2,r2,#8              ;1862
0000b8  f1bc0c01          SUBS     r12,r12,#1            ;1862
0000bc  d1e8              BNE      |L14.144|
0000be  9840              LDR      r0,[sp,#0x100]
0000c0  b188              CBZ      r0,|L14.230|
0000c2  982e              LDR      r0,[sp,#0xb8]
0000c4  4581              CMP      r9,r0
0000c6  da0d              BGE      |L14.228|
0000c8  9842              LDR      r0,[sp,#0x108]
0000ca  f8900368          LDRB     r0,[r0,#0x368]
0000ce  280a              CMP      r0,#0xa
0000d0  d208              BCS      |L14.228|
;;;1868   		{
;;;1869   			if(lDiffSumCnt > 3)
0000d2  2c03              CMP      r4,#3
0000d4  dd27              BLE      |L14.294|
;;;1870   			{
;;;1871   				sLFOffsetRow[real_row] = lDiffSum / ((int16_t)lDiffSumCnt);
0000d6  b220              SXTH     r0,r4
0000d8  fb9bf0f0          SDIV     r0,r11,r0
0000dc  4936              LDR      r1,|L14.440|
0000de  f8210016          STRH     r0,[r1,r6,LSL #1]
0000e2  e020              B        |L14.294|
                  |L14.228|
;;;1872   			}
;;;1873   		}
;;;1874   		else
;;;1875   		{
;;;1876   			for( i=0; i<=(sort_cnt); i++ )
0000e4  2000              MOVS     r0,#0
                  |L14.230|
0000e6  4669              MOV      r1,sp                 ;1809
                  |L14.232|
;;;1877   			{
;;;1878   				for( j=(i+1); j<sort_range; j++ )
0000e8  eb010240          ADD      r2,r1,r0,LSL #1
0000ec  f1c00c14          RSB      r12,r0,#0x14
0000f0  f1120202          ADDS.W   r2,r2,#2
                  |L14.244|
;;;1879   				{
;;;1880   					if( SortBufCol[i] > SortBufCol[j] )
0000f4  f9313010          LDRSH    r3,[r1,r0,LSL #1]
0000f8  f9b24000          LDRSH    r4,[r2,#0]
0000fc  42a3              CMP      r3,r4
;;;1881   					{
;;;1882   						TempBuf = SortBufCol[i];
;;;1883   						SortBufCol[i] = SortBufCol[j];
0000fe  bfc4              ITT      GT
000100  f8214010          STRHGT   r4,[r1,r0,LSL #1]
;;;1884   						SortBufCol[j] = TempBuf;
000104  8013              STRHGT   r3,[r2,#0]
000106  1c92              ADDS     r2,r2,#2
000108  f1bc0c01          SUBS     r12,r12,#1
00010c  d1f2              BNE      |L14.244|
                  |L14.270|
00010e  1c40              ADDS     r0,r0,#1              ;1880
;;;1885   					}
000110  2805              CMP      r0,#5
000112  d203              BCS      |L14.284|
000114  1c42              ADDS     r2,r0,#1              ;1878
000116  2a15              CMP      r2,#0x15              ;1878
000118  d2f9              BCS      |L14.270|
00011a  e7e5              B        |L14.232|
                  |L14.284|
;;;1886   				}
;;;1887   			}
;;;1888   			TempBuf = SortBufCol[sort_cnt];
;;;1889   			
;;;1890   			sLFOffsetRow[real_row] = TempBuf;
00011c  4926              LDR      r1,|L14.440|
00011e  f8bd0008          LDRH     r0,[sp,#8]            ;1888
000122  f8210016          STRH     r0,[r1,r6,LSL #1]
                  |L14.294|
000126  1c6d              ADDS     r5,r5,#1
000128  2d30              CMP      r5,#0x30
00012a  d39a              BCC      |L14.98|
00012c  4d21              LDR      r5,|L14.436|
00012e  4e22              LDR      r6,|L14.440|
;;;1891   		}
;;;1892   	}
;;;1893   
;;;1894   #if !FAST_LF_EN		
;;;1895   	for(r = 0; r < row_cnt; r++)
000130  2300              MOVS     r3,#0
000132  ac30              ADD      r4,sp,#0xc0           ;1825
                  |L14.308|
;;;1896   	{
;;;1897   		real_row = do_row[r];
;;;1898   		for( c=0; c<COL_MAX; c++ )
000134  2254              MOVS     r2,#0x54
000136  5ce0              LDRB     r0,[r4,r3]            ;1897
;;;1899   		{
;;;1900   			d = (int16_t)HAL_READ_RAW_IMAGE(real_row, c);
;;;1901   			sub_offset = sLFOffsetRow[real_row];
000138  f936c010          LDRSH    r12,[r6,r0,LSL #1]
00013c  ebc000c0          RSB      r0,r0,r0,LSL #3       ;1898
000140  eb000040          ADD      r0,r0,r0,LSL #1       ;1898
000144  eb0500c0          ADD      r0,r5,r0,LSL #3       ;1898
                  |L14.328|
000148  8801              LDRH     r1,[r0,#0]            ;1900
;;;1902   			d = d - sub_offset;
00014a  eba1010c          SUB      r1,r1,r12
00014e  b209              SXTH     r1,r1
;;;1903   			if(d < 0)
000150  2900              CMP      r1,#0
;;;1904   			{
;;;1905   				d = 0;
000152  bfb8              IT       LT
000154  2100              MOVLT    r1,#0
;;;1906   			}
;;;1907   			HAL_WRITE_RAW_IMAGE(real_row, c, (uint16_t)d);
000156  f8201b02          STRH     r1,[r0],#2
00015a  1e52              SUBS     r2,r2,#1
00015c  d1f4              BNE      |L14.328|
00015e  1c5b              ADDS     r3,r3,#1              ;1903
000160  2b30              CMP      r3,#0x30
000162  d3e7              BCC      |L14.308|
;;;1908   		}
;;;1909   	}
;;;1910   #endif
;;;1911   }
000164  b047              ADD      sp,sp,#0x11c
000166  e8bd8ff0          POP      {r4-r11,pc}
                  |L14.362|
00016a  4682              MOV      r10,r0                ;1860
00016c  e79e              B        |L14.172|
                  |L14.366|
00016e  4681              MOV      r9,r0                 ;1861
000170  e79e              B        |L14.176|
;;;1912   #if FINGER_LF_VER1_EN
                          ENDP

000172  0000              DCW      0x0000
                  |L14.372|
                          DCD      ||area_number.25||
                  |L14.376|
000178  00                DCB      0
000179  01020304          DCB      1,2,3,4,5,6,"\a\b\t\n\v\f\r",14,15,16,17,18,19,20,21,22,23
00017d  05060708
000181  090a0b0c
000185  0d0e0f10
000189  11121314
00018d  151617  
000190  18191a1b          DCB      24,25,26,27,28,29,30,31," !""#$$%&'()*+,-./"
000194  1c1d1e1f
000198  20212223
00019c  24252627
0001a0  28292a2b
0001a4  2c2d2e2f
                  |L14.424|
                          DCD      g_pFingerBaseImage
                  |L14.428|
                          DCD      g_pFingerHop1BaseImage
                  |L14.432|
                          DCD      0xffff8000
                  |L14.436|
                          DCD      FullSharedBuff
                  |L14.440|
                          DCD      ||.bss||+0x50

                          AREA ||i.alogorithm_linefilter_idle||, CODE, READONLY, ALIGN=2

                  alogorithm_linefilter_idle PROC
;;;2103   #if (USED_LOCAL_IDLE_MODE_CONTROL || USED_IDLE_MODE_CONTROL)
;;;2104   void alogorithm_linefilter_idle(void)
000000  e92d4ff8          PUSH     {r3-r11,lr}
;;;2105   {
;;;2106   	int32_t r, c;
;;;2107   	int16_t LINE_FILTER_UPPER_LIMIT			= (thisModeConf->SensingFilter.sLineFilterUpLimit_Idle) << ptModuleModeConf->ucIdleOvrShift; //thisModeConf->SensingFilter.sLineFilterUpLimit<<ptModuleModeConf->ucOvrShift;
000004  492a              LDR      r1,|L15.176|
;;;2108   	int16_t LINE_FILTER_LOWER_LIMIT			= (thisModeConf->SensingFilter.sLineFilterLowLimit_Idle) << ptModuleModeConf->ucIdleOvrShift; //thisModeConf->SensingFilter.sLineFilterLowLimit<<ptModuleModeConf->ucOvrShift;
;;;2109   	uint8_t LINE_FILTER_COL_OFFSET			= (thisModeConf->SensingFilter.ucLineFilterColOffset);
;;;2110   	int16_t sDiff;
;;;2111   	int16_t sDiffSum = 0;
;;;2112   	uint32_t ulDiffSumCnt = 0;
;;;2113   
;;;2114   	uint16_t *pBaseImage, *pRawImage;
;;;2115   
;;;2116   	pRawImage = HAL_NI_GET_RAW_IMAGE_PTR();
;;;2117   	pBaseImage = HAL_NI_GET_BASELINE_IMAGE_PTR();
000006  f8dfb0b0          LDR      r11,|L15.184|
00000a  6948              LDR      r0,[r1,#0x14]         ;2107  ; thisModeConf
00000c  6909              LDR      r1,[r1,#0x10]         ;2107  ; ptModuleModeConf
00000e  f8b0205c          LDRH     r2,[r0,#0x5c]         ;2107
000012  7849              LDRB     r1,[r1,#1]            ;2107
000014  f890c051          LDRB     r12,[r0,#0x51]        ;2109
000018  408a              LSLS     r2,r2,r1              ;2107
00001a  fa0ff882          SXTH     r8,r2                 ;2107
00001e  f8b0205e          LDRH     r2,[r0,#0x5e]         ;2108
000022  4824              LDR      r0,|L15.180|
000024  fa02f101          LSL      r1,r2,r1              ;2108
000028  fa0ff981          SXTH     r9,r1                 ;2108
;;;2118   
;;;2119   	for(r = 0; r < NI_ROW_MAX; r++)
00002c  2100              MOVS     r1,#0
;;;2120   	{
;;;2121   		sDiffSum = 0;
;;;2122   		ulDiffSumCnt = 0;
;;;2123   		for(c = 0; c < COL_MAX; c+=LINE_FILTER_COL_OFFSET)
00002e  f10c0a53          ADD      r10,r12,#0x53
000032  9000              STR      r0,[sp,#0]
                  |L15.52|
000034  fbbaf3fc          UDIV     r3,r10,r12
000038  2700              MOVS     r7,#0                 ;2121
00003a  463c              MOV      r4,r7                 ;2122
00003c  2b00              CMP      r3,#0
00003e  dd31              BLE      |L15.164|
000040  ebc100c1          RSB      r0,r1,r1,LSL #3
000044  eb000540          ADD      r5,r0,r0,LSL #1
000048  9800              LDR      r0,[sp,#0]
00004a  eb0b06c5          ADD      r6,r11,r5,LSL #3
00004e  eb0000c5          ADD      r0,r0,r5,LSL #3
000052  4602              MOV      r2,r0
                  |L15.84|
;;;2124   		{
;;;2125   			sDiff = (int16_t)(pRawImage[r*COL_MAX+c] - pBaseImage[r*COL_MAX+c]);
000054  f8b6e000          LDRH     lr,[r6,#0]
000058  8815              LDRH     r5,[r2,#0]
00005a  eba5050e          SUB      r5,r5,lr
00005e  b22d              SXTH     r5,r5
;;;2126   			if(sDiff < LINE_FILTER_UPPER_LIMIT || sDiff > LINE_FILTER_LOWER_LIMIT)
000060  4545              CMP      r5,r8
000062  db01              BLT      |L15.104|
000064  454d              CMP      r5,r9
000066  dd02              BLE      |L15.110|
                  |L15.104|
;;;2127   			{
;;;2128   				sDiffSum += sDiff;
000068  443d              ADD      r5,r5,r7
00006a  b22f              SXTH     r7,r5
00006c  1c64              ADDS     r4,r4,#1
                  |L15.110|
;;;2129   				ulDiffSumCnt++;
;;;2130   			}
00006e  eb02024c          ADD      r2,r2,r12,LSL #1
000072  eb06064c          ADD      r6,r6,r12,LSL #1
000076  1e5b              SUBS     r3,r3,#1
000078  d1ec              BNE      |L15.84|
;;;2131   		}
;;;2132   
;;;2133   		if(ulDiffSumCnt > 3)
00007a  2c03              CMP      r4,#3
00007c  d912              BLS      |L15.164|
;;;2134   		{
;;;2135   			sLFOffsetRow[r] = sDiffSum / ((int16_t)ulDiffSumCnt);
00007e  b222              SXTH     r2,r4
000080  fb97f2f2          SDIV     r2,r7,r2
000084  4c0d              LDR      r4,|L15.188|
;;;2136   
;;;2137   			for(c = 0; c < COL_MAX; c++)
000086  2354              MOVS     r3,#0x54
000088  f8242011          STRH     r2,[r4,r1,LSL #1]     ;2135
                  |L15.140|
;;;2138   			{
;;;2139   				sDiff = (int16_t)pRawImage[r*COL_MAX+c] - sLFOffsetRow[r];
00008c  8802              LDRH     r2,[r0,#0]
00008e  f8345011          LDRH     r5,[r4,r1,LSL #1]
000092  1b52              SUBS     r2,r2,r5
000094  b212              SXTH     r2,r2
;;;2140   				if(sDiff < 0)
000096  2a00              CMP      r2,#0
;;;2141   					sDiff = 0;
000098  bfb8              IT       LT
00009a  2200              MOVLT    r2,#0
;;;2142   				pRawImage[r*COL_MAX+c] = (uint16_t)sDiff;
00009c  f8202b02          STRH     r2,[r0],#2
0000a0  1e5b              SUBS     r3,r3,#1
0000a2  d1f3              BNE      |L15.140|
                  |L15.164|
0000a4  1c49              ADDS     r1,r1,#1              ;2140
0000a6  290a              CMP      r1,#0xa
0000a8  dbc4              BLT      |L15.52|
;;;2143   			}
;;;2144   		}
;;;2145   	}
;;;2146   }
0000aa  e8bd8ff8          POP      {r3-r11,pc}
;;;2147   #endif /* (USED_LOCAL_IDLE_MODE_CONTROL || USED_IDLE_MODE_CONTROL) */
                          ENDP

0000ae  0000              DCW      0x0000
                  |L15.176|
                          DCD      ||area_number.25||
                  |L15.180|
                          DCD      FullSharedBuff
                  |L15.184|
                          DCD      FullSharedBuff+0x12c90
                  |L15.188|
                          DCD      ||.bss||+0x50

                          AREA ||i.alogorithm_linefilter_simple||, CODE, READONLY, ALIGN=2

                  alogorithm_linefilter_simple PROC
;;;2039   #endif
;;;2040   void alogorithm_linefilter_simple(eSENSING_MODE_t eSensingMode)
000000  e92d4ff8          PUSH     {r3-r11,lr}
;;;2041   {
;;;2042   	uint32_t r, c, pos;
;;;2043   	int16_t LINE_FILTER_UPPER_LIMIT			= thisModeConf->SensingFilter.sLineFilterUpLimit<<ptModuleModeConf->ucOvrShift;
000004  482e              LDR      r0,|L16.192|
000006  6941              LDR      r1,[r0,#0x14]  ; thisModeConf
000008  6902              LDR      r2,[r0,#0x10]  ; ptModuleModeConf
;;;2044   	int16_t LINE_FILTER_LOWER_LIMIT			= thisModeConf->SensingFilter.sLineFilterLowLimit<<ptModuleModeConf->ucOvrShift;
;;;2045   	uint8_t LINE_FILTER_COL_OFFSET			= (thisModeConf->SensingFilter.ucLineFilterColOffset);
;;;2046   	
;;;2047   	int16_t lDiff;
;;;2048   	int16_t lDiffSum = 0;//, lDiffSum2 = 0;
;;;2049   	uint32_t lDiffSumCnt = 0;//, lDiffSumCnt2 = 0;
;;;2050   	int32_t lLowTHD, lUpperTHD;
;;;2051   	uint16_t * pBaseImage;
;;;2052   //	uint16_t rawdata;
;;;2053   //	eActivePenType_t eLocalFingerOPType = hal_Info_GetControlLocalFingerOPType();
;;;2054   
;;;2055   	lUpperTHD = LINE_FILTER_UPPER_LIMIT;
;;;2056   	lLowTHD = LINE_FILTER_LOWER_LIMIT;
;;;2057   
;;;2058   #if USED_NOISE_HOPPING_FREQ
;;;2059   	if(ptAppInfo->eSelectFreq == FREQ_MAIN)
00000a  69c0              LDR      r0,[r0,#0x1c]  ; ptAppInfo
00000c  f8b1304d          LDRH     r3,[r1,#0x4d]         ;2043
000010  7812              LDRB     r2,[r2,#0]            ;2043
000012  7cc0              LDRB     r0,[r0,#0x13]
000014  4093              LSLS     r3,r3,r2              ;2043
000016  b21c              SXTH     r4,r3                 ;2043
000018  f8b1304f          LDRH     r3,[r1,#0x4f]         ;2044
00001c  f891c051          LDRB     r12,[r1,#0x51]        ;2045
000020  fa03f202          LSL      r2,r3,r2              ;2044
000024  fa0ff882          SXTH     r8,r2                 ;2044
000028  2801              CMP      r0,#1
;;;2060   	{
;;;2061   		pBaseImage = g_pFingerBaseImage;
00002a  bf0c              ITE      EQ
00002c  4825              LDREQ    r0,|L16.196|
;;;2062   	}
;;;2063   	else
;;;2064   	{
;;;2065   		pBaseImage = g_pFingerHop1BaseImage;
00002e  4826              LDRNE    r0,|L16.200|
000030  6800              LDR      r0,[r0,#0]  ; g_pFingerHop1BaseImage
;;;2066   	}
;;;2067   //	pBaseImage = HAL_GET_FREQ_BASELINE_PTR(ptAppInfo->eSelectFreq);
;;;2068   #else /* USED_NOISE_HOPPING_FREQ */
;;;2069   	pBaseImage = g_pFingerBaseImage;//HAL_GetBaseImagePointer(HAL_GetSensingMode(), BASELINE_TYPE_FULL);
;;;2070   #endif /* USED_NOISE_HOPPING_FREQ */
;;;2071   
;;;2072   	pos = 0;
000032  f04f0900          MOV      r9,#0
;;;2073   	for(r=0; r< ROW_MAX; r++, pos += COL_MAX)
000036  4649              MOV      r1,r9
;;;2074   	{
;;;2075   		lDiffSumCnt = 0;
;;;2076   		lDiffSum = 0;
;;;2077   
;;;2078   		for(c = 0; c < COL_MAX; c+=LINE_FILTER_COL_OFFSET)
000038  f10c0b53          ADD      r11,r12,#0x53
00003c  9000              STR      r0,[sp,#0]
                  |L16.62|
00003e  fbbbf3fc          UDIV     r3,r11,r12
000042  2600              MOVS     r6,#0                 ;2075
000044  46b2              MOV      r10,r6                ;2076
000046  2b00              CMP      r3,#0
000048  d033              BEQ      |L16.178|
00004a  9800              LDR      r0,[sp,#0]
00004c  eb000549          ADD      r5,r0,r9,LSL #1
000050  ebc100c1          RSB      r0,r1,r1,LSL #3
000054  eb000240          ADD      r2,r0,r0,LSL #1
000058  481c              LDR      r0,|L16.204|
00005a  eb0000c2          ADD      r0,r0,r2,LSL #3
00005e  4602              MOV      r2,r0
                  |L16.96|
;;;2079   		{
;;;2080   			lDiff = (int16_t)(HAL_READ_RAW_IMAGE(r, c) - pBaseImage[pos+c]);
000060  f8b5e000          LDRH     lr,[r5,#0]
000064  8817              LDRH     r7,[r2,#0]
000066  eba7070e          SUB      r7,r7,lr
00006a  b23f              SXTH     r7,r7
;;;2081   			if(lDiff < lUpperTHD && lDiff > lLowTHD)
00006c  42a7              CMP      r7,r4
00006e  bfb8              IT       LT
000070  45b8              CMPLT    r8,r7
000072  da03              BGE      |L16.124|
;;;2082   			{
;;;2083   				lDiffSum += lDiff;
000074  4457              ADD      r7,r7,r10
000076  fa0ffa87          SXTH     r10,r7
00007a  1c76              ADDS     r6,r6,#1
                  |L16.124|
;;;2084   				lDiffSumCnt++;
;;;2085   			}
00007c  eb05054c          ADD      r5,r5,r12,LSL #1
000080  eb02024c          ADD      r2,r2,r12,LSL #1
000084  1e5b              SUBS     r3,r3,#1
000086  d1eb              BNE      |L16.96|
;;;2086   		}
;;;2087   
;;;2088   		if(lDiffSumCnt > 3)
000088  2e03              CMP      r6,#3
00008a  d912              BLS      |L16.178|
;;;2089   		{
;;;2090   			sLFOffsetRow[r] = lDiffSum / ((int16_t)lDiffSumCnt);
00008c  b232              SXTH     r2,r6
00008e  fb9af2f2          SDIV     r2,r10,r2
000092  4d0f              LDR      r5,|L16.208|
;;;2091   #if !FAST_LF_EN		
;;;2092   			for(c = 0; c < COL_MAX; c++)
000094  2354              MOVS     r3,#0x54
000096  f8252011          STRH     r2,[r5,r1,LSL #1]     ;2090
                  |L16.154|
;;;2093   			{
;;;2094   				lDiff = (((int16_t)HAL_READ_RAW_IMAGE(r, c)) - sLFOffsetRow[r]);
00009a  8802              LDRH     r2,[r0,#0]
00009c  f8356011          LDRH     r6,[r5,r1,LSL #1]
0000a0  1b92              SUBS     r2,r2,r6
0000a2  b212              SXTH     r2,r2
;;;2095   				if(lDiff<0)lDiff=0;
0000a4  2a00              CMP      r2,#0
0000a6  bfb8              IT       LT
0000a8  2200              MOVLT    r2,#0
;;;2096   				HAL_WRITE_RAW_IMAGE(r, c, (uint16_t)lDiff);
0000aa  f8202b02          STRH     r2,[r0],#2
0000ae  1e5b              SUBS     r3,r3,#1
0000b0  d1f3              BNE      |L16.154|
                  |L16.178|
0000b2  1c49              ADDS     r1,r1,#1              ;2095
0000b4  f1090954          ADD      r9,r9,#0x54           ;2095
;;;2097   			}
;;;2098   #endif
;;;2099   		}
;;;2100   	}
0000b8  2930              CMP      r1,#0x30
0000ba  d3c0              BCC      |L16.62|
;;;2101   }
0000bc  e8bd8ff8          POP      {r3-r11,pc}
;;;2102   
                          ENDP

                  |L16.192|
                          DCD      ||area_number.25||
                  |L16.196|
                          DCD      g_pFingerBaseImage
                  |L16.200|
                          DCD      g_pFingerHop1BaseImage
                  |L16.204|
                          DCD      FullSharedBuff
                  |L16.208|
                          DCD      ||.bss||+0x50

                          AREA ||i.alogorithm_vertical_linefilter||, CODE, READONLY, ALIGN=2

                  alogorithm_vertical_linefilter PROC
;;;2201   int16_t sLFOffsetCol[COL_MAX];
;;;2202   void alogorithm_vertical_linefilter(eSENSING_MODE_t eSensingMode)
000000  e92d4ff0          PUSH     {r4-r11,lr}
;;;2203   {
;;;2204   	uint32_t r, c;
;;;2205   	int16_t LINE_FILTER_UPPER_LIMIT			= ((15)<<ptModuleModeConf->ucOvrShift); //thisModeConf->SensingFilter.sLineFilterUpLimit<<ptModuleModeConf->ucOvrShift;
000004  492b              LDR      r1,|L17.180|
000006  6908              LDR      r0,[r1,#0x10]  ; ptModuleModeConf
000008  7802              LDRB     r2,[r0,#0]
00000a  200f              MOVS     r0,#0xf
00000c  fa00f202          LSL      r2,r0,r2
000010  b210              SXTH     r0,r2
;;;2206   	int16_t LINE_FILTER_LOWER_LIMIT			= (-((15)<<ptModuleModeConf->ucOvrShift)); //thisModeConf->SensingFilter.sLineFilterLowLimit<<ptModuleModeConf->ucOvrShift;
;;;2207   	uint8_t LINE_FILTER_ROW_OFFSET			= 3;//(thisModeConf->SensingFilter.ucLineFilterColOffset);
;;;2208   
;;;2209   	int16_t lDiff;
;;;2210   	int16_t lDiffSum = 0;
;;;2211   	uint32_t lDiffSumCnt = 0;
;;;2212   	int32_t lLowTHD, lUpperTHD;
;;;2213   	uint16_t * pBaseImage;
;;;2214   
;;;2215   	lUpperTHD = (LINE_FILTER_UPPER_LIMIT>>1);
000012  1047              ASRS     r7,r0,#1
;;;2216   	lLowTHD = (LINE_FILTER_LOWER_LIMIT>>1);
;;;2217   
;;;2218   #if USED_NOISE_HOPPING_FREQ
;;;2219   	if(ptAppInfo->eSelectFreq == FREQ_MAIN)
000014  69c8              LDR      r0,[r1,#0x1c]  ; ptAppInfo
000016  4252              RSBS     r2,r2,#0              ;2206
000018  b212              SXTH     r2,r2                 ;2206
00001a  7cc0              LDRB     r0,[r0,#0x13]
00001c  ea4f0862          ASR      r8,r2,#1              ;2216
000020  2801              CMP      r0,#1
;;;2220   	{
;;;2221   		pBaseImage = g_pFingerBaseImage;
000022  bf0c              ITE      EQ
000024  4824              LDREQ    r0,|L17.184|
;;;2222   	}
;;;2223   	else
;;;2224   	{
;;;2225   		pBaseImage = g_pFingerHop1BaseImage;
000026  4825              LDRNE    r0,|L17.188|
;;;2226   	}
;;;2227   //	pBaseImage = HAL_GET_FREQ_BASELINE_PTR(ptAppInfo->eSelectFreq);
;;;2228   #else /* USED_NOISE_HOPPING_FREQ */
;;;2229   	pBaseImage = g_pFingerBaseImage;//HAL_GetBaseImagePointer(HAL_GetSensingMode(), BASELINE_TYPE_FULL);
;;;2230   #endif /* USED_NOISE_HOPPING_FREQ */
;;;2231   
;;;2232   	for(c=0; c<COL_MAX; c++)
000028  2100              MOVS     r1,#0
;;;2233   	{
;;;2234   		lDiffSumCnt = 0;
;;;2235   		lDiffSum = 0;
;;;2236   		for(r = 0; r < ROW_MAX; r+=LINE_FILTER_ROW_OFFSET)
00002a  f8dfb094          LDR      r11,|L17.192|
;;;2237   		{
;;;2238   			lDiff = (int16_t)(HAL_READ_RAW_IMAGE(r, c) - pBaseImage[(r*COL_MAX)+c]);
;;;2239   			if(lDiff < lUpperTHD && lDiff > lLowTHD)
;;;2240   			{
;;;2241   				lDiffSum += lDiff;
;;;2242   				lDiffSumCnt++;
;;;2243   			}
;;;2244   			else
;;;2245   			{
;;;2246   				if(lDiff > lUpperTHD)
;;;2247   				{
;;;2248   					lDiff += lUpperTHD;
;;;2249   					lDiffSumCnt++;
;;;2250   				}
;;;2251   				else if(lDiff < lLowTHD)
;;;2252   				{
;;;2253   					lDiff += lLowTHD;
;;;2254   					lDiffSumCnt++;
;;;2255   				}
;;;2256   			}
;;;2257   		}
;;;2258   
;;;2259   		if(lDiffSumCnt > 3)
;;;2260   		{
;;;2261   			sLFOffsetCol[c] = lDiffSum / ((int16_t)lDiffSumCnt);
00002e  f8dfa094          LDR      r10,|L17.196|
000032  f8d09000          LDR      r9,[r0,#0]  ; g_pFingerHop1BaseImage
                  |L17.54|
000036  2000              MOVS     r0,#0                 ;2234
000038  eb0b0241          ADD      r2,r11,r1,LSL #1      ;2236
00003c  4606              MOV      r6,r0                 ;2235
00003e  2410              MOVS     r4,#0x10              ;2236
000040  eb090541          ADD      r5,r9,r1,LSL #1       ;2236
000044  ea4f0302          MOV.W    r3,r2                 ;2236
                  |L17.72|
000048  f8b5e000          LDRH     lr,[r5,#0]            ;2238
00004c  f8b3c000          LDRH     r12,[r3,#0]           ;2238
000050  ebac0c0e          SUB      r12,r12,lr            ;2238
000054  fa0ffc8c          SXTH     r12,r12               ;2238
000058  45bc              CMP      r12,r7                ;2239
00005a  bfb8              IT       LT                    ;2239
00005c  45e0              CMPLT    r8,r12                ;2239
00005e  da04              BGE      |L17.106|
000060  44b4              ADD      r12,r12,r6            ;2241
000062  fa0ff68c          SXTH     r6,r12                ;2241
000066  1c40              ADDS     r0,r0,#1              ;2241
000068  e004              B        |L17.116|
                  |L17.106|
00006a  4567              CMP      r7,r12                ;2246
00006c  db01              BLT      |L17.114|
00006e  45e0              CMP      r8,r12                ;2251
000070  dd00              BLE      |L17.116|
                  |L17.114|
000072  1c40              ADDS     r0,r0,#1              ;2251
                  |L17.116|
000074  f50373fc          ADD      r3,r3,#0x1f8          ;2251
000078  1e64              SUBS     r4,r4,#1              ;2251
00007a  f50575fc          ADD      r5,r5,#0x1f8          ;2251
00007e  d1e3              BNE      |L17.72|
000080  2803              CMP      r0,#3                 ;2259
000082  d912              BLS      |L17.170|
000084  b200              SXTH     r0,r0
000086  fb96f0f0          SDIV     r0,r6,r0
00008a  f82a0011          STRH     r0,[r10,r1,LSL #1]
;;;2262   #if !FAST_LF_EN		
;;;2263   			for(r = 0; r < ROW_MAX; r++)
00008e  2330              MOVS     r3,#0x30
                  |L17.144|
;;;2264   			{
;;;2265   				lDiff = (((int16_t)HAL_READ_RAW_IMAGE(r, c)) - sLFOffsetCol[c]);
000090  8810              LDRH     r0,[r2,#0]
000092  f83ac011          LDRH     r12,[r10,r1,LSL #1]
000096  eba0000c          SUB      r0,r0,r12
00009a  b200              SXTH     r0,r0
;;;2266   				if(lDiff<0)
00009c  2800              CMP      r0,#0
;;;2267   					lDiff=0;
00009e  bfb8              IT       LT
0000a0  2000              MOVLT    r0,#0
;;;2268   				HAL_WRITE_RAW_IMAGE(r, c, (uint16_t)lDiff);
0000a2  f8220ba8          STRH     r0,[r2],#0xa8
0000a6  1e5b              SUBS     r3,r3,#1
0000a8  d1f2              BNE      |L17.144|
                  |L17.170|
0000aa  1c49              ADDS     r1,r1,#1              ;2266
0000ac  2954              CMP      r1,#0x54
0000ae  d3c2              BCC      |L17.54|
;;;2269   			}
;;;2270   #endif
;;;2271   		}
;;;2272   	}
;;;2273   }
0000b0  e8bd8ff0          POP      {r4-r11,pc}
;;;2274   
                          ENDP

                  |L17.180|
                          DCD      ||area_number.25||
                  |L17.184|
                          DCD      g_pFingerBaseImage
                  |L17.188|
                          DCD      g_pFingerHop1BaseImage
                  |L17.192|
                          DCD      FullSharedBuff
                  |L17.196|
                          DCD      ||.bss||+0x3c6

                          AREA ||i.alogorithm_vertical_linefilter_simple||, CODE, READONLY, ALIGN=2

                  alogorithm_vertical_linefilter_simple PROC
;;;2274   
;;;2275   void alogorithm_vertical_linefilter_simple(eSENSING_MODE_t eSensingMode)
000000  e92d4ff0          PUSH     {r4-r11,lr}
;;;2276   {
;;;2277   	uint32_t r, c, pos;
;;;2278   	int16_t LINE_FILTER_UPPER_LIMIT			= thisModeConf->SensingFilter.sLineFilterUpLimit<<ptModuleModeConf->ucOvrShift;
000004  4e2a              LDR      r6,|L18.176|
000006  b0ab              SUB      sp,sp,#0xac           ;2276
000008  6971              LDR      r1,[r6,#0x14]  ; thisModeConf
00000a  6930              LDR      r0,[r6,#0x10]  ; ptModuleModeConf
00000c  f8b1204d          LDRH     r2,[r1,#0x4d]
000010  7800              LDRB     r0,[r0,#0]
;;;2279   	int16_t LINE_FILTER_LOWER_LIMIT			= thisModeConf->SensingFilter.sLineFilterLowLimit<<ptModuleModeConf->ucOvrShift;
000012  f8b1104f          LDRH     r1,[r1,#0x4f]
000016  4082              LSLS     r2,r2,r0              ;2278
000018  fa01f000          LSL      r0,r1,r0
00001c  b205              SXTH     r5,r0
00001e  b214              SXTH     r4,r2                 ;2278
;;;2280   //	uint8_t LINE_FILTER_COL_OFFSET			= (thisModeConf->SensingFilter.ucLineFilterColOffset);
;;;2281   	
;;;2282   	int16_t sLFOffsetCol[COL_MAX] = {0};
000020  21a8              MOVS     r1,#0xa8
000022  4668              MOV      r0,sp
000024  f7fffffe          BL       __aeabi_memclr4
;;;2283   	int16_t lDiff;
;;;2284   	int16_t lDiffSum = 0;
;;;2285   	uint32_t lDiffSumCnt = 0;
;;;2286   	int32_t lLowTHD, lUpperTHD;
;;;2287   	uint16_t * pBaseImage;
;;;2288   //	uint16_t rawdata;
;;;2289   //	eActivePenType_t eLocalFingerOPType = hal_Info_GetControlLocalFingerOPType();
;;;2290   
;;;2291   	lUpperTHD = LINE_FILTER_UPPER_LIMIT;
;;;2292   	lLowTHD = LINE_FILTER_LOWER_LIMIT;
;;;2293   
;;;2294   #if USED_NOISE_HOPPING_FREQ
;;;2295   	if(ptAppInfo->eSelectFreq == FREQ_MAIN)
000028  69f0              LDR      r0,[r6,#0x1c]  ; ptAppInfo
00002a  7cc0              LDRB     r0,[r0,#0x13]
00002c  2801              CMP      r0,#1
;;;2296   	{
;;;2297   		pBaseImage = g_pFingerBaseImage;
00002e  bf0c              ITE      EQ
000030  4820              LDREQ    r0,|L18.180|
;;;2298   	}
;;;2299   	else
;;;2300   	{
;;;2301   		pBaseImage = g_pFingerHop1BaseImage;
000032  4821              LDRNE    r0,|L18.184|
;;;2302   	}
;;;2303   //	pBaseImage = HAL_GET_FREQ_BASELINE_PTR(ptAppInfo->eSelectFreq);
;;;2304   #else /* USED_NOISE_HOPPING_FREQ */
;;;2305   	pBaseImage = g_pFingerBaseImage;//HAL_GetBaseImagePointer(HAL_GetSensingMode(), BASELINE_TYPE_FULL);
;;;2306   #endif /* USED_NOISE_HOPPING_FREQ */
;;;2307   
;;;2308   	for(c=0; c<COL_MAX; c++)
000034  f8d09000          LDR      r9,[r0,#0]  ; g_pFingerHop1BaseImage
;;;2309   	{
;;;2310   		lDiffSumCnt = 0;
;;;2311   		lDiffSum = 0;
;;;2312   		
;;;2313   		pos = c;
;;;2314   		for(r = 0; r < ROW_MAX; r+=2,pos += (COL_MAX<<1))
000038  f8dfb080          LDR      r11,|L18.188|
00003c  2000              MOVS     r0,#0                 ;2308
00003e  46ea              MOV      r10,sp                ;2282
                  |L18.64|
000040  2300              MOVS     r3,#0                 ;2310
000042  eb0b0140          ADD      r1,r11,r0,LSL #1
000046  461e              MOV      r6,r3                 ;2311
000048  eb090c40          ADD      r12,r9,r0,LSL #1
00004c  460a              MOV      r2,r1
00004e  f04f0818          MOV      r8,#0x18
                  |L18.82|
;;;2315   		{
;;;2316   			lDiff = (int16_t)(HAL_READ_RAW_IMAGE(r, c) - pBaseImage[pos]);
000052  8817              LDRH     r7,[r2,#0]
000054  f8bce000          LDRH     lr,[r12,#0]
000058  eba7070e          SUB      r7,r7,lr
00005c  b23f              SXTH     r7,r7
;;;2317   			if(lDiff < lUpperTHD && lDiff > lLowTHD)
00005e  42a7              CMP      r7,r4
000060  bfb8              IT       LT
000062  42bd              CMPLT    r5,r7
000064  da02              BGE      |L18.108|
;;;2318   			{
;;;2319   				lDiffSum += lDiff;
000066  443e              ADD      r6,r6,r7
000068  b236              SXTH     r6,r6
00006a  1c5b              ADDS     r3,r3,#1
                  |L18.108|
00006c  f50272a8          ADD      r2,r2,#0x150
000070  f1b80801          SUBS     r8,r8,#1
000074  f50c7ca8          ADD      r12,r12,#0x150
;;;2320   				lDiffSumCnt++;
;;;2321   			}
000078  d1eb              BNE      |L18.82|
;;;2322   		}
;;;2323   
;;;2324   		if(lDiffSumCnt > 3)
00007a  2b03              CMP      r3,#3
00007c  d912              BLS      |L18.164|
;;;2325   		{
;;;2326   			sLFOffsetCol[c] = lDiffSum / ((int16_t)lDiffSumCnt);
00007e  b21a              SXTH     r2,r3
000080  fb96f2f2          SDIV     r2,r6,r2
000084  f82a2010          STRH     r2,[r10,r0,LSL #1]
;;;2327   #if !FAST_LF_EN		
;;;2328   			for(r = 0; r < ROW_MAX; r++)
000088  2330              MOVS     r3,#0x30
                  |L18.138|
;;;2329   			{
;;;2330   				lDiff = (((int16_t)HAL_READ_RAW_IMAGE(r, c)) - sLFOffsetCol[c]);
00008a  880a              LDRH     r2,[r1,#0]
00008c  f83ac010          LDRH     r12,[r10,r0,LSL #1]
000090  eba2020c          SUB      r2,r2,r12
000094  b212              SXTH     r2,r2
;;;2331   				if(lDiff<0)lDiff=0;
000096  2a00              CMP      r2,#0
000098  bfb8              IT       LT
00009a  2200              MOVLT    r2,#0
;;;2332   				HAL_WRITE_RAW_IMAGE(r, c, (uint16_t)lDiff);
00009c  f8212ba8          STRH     r2,[r1],#0xa8
0000a0  1e5b              SUBS     r3,r3,#1
0000a2  d1f2              BNE      |L18.138|
                  |L18.164|
0000a4  1c40              ADDS     r0,r0,#1              ;2331
0000a6  2854              CMP      r0,#0x54
0000a8  d3ca              BCC      |L18.64|
;;;2333   			}
;;;2334   #endif
;;;2335   		}
;;;2336   	}
;;;2337   }
0000aa  b02b              ADD      sp,sp,#0xac
0000ac  e8bd8ff0          POP      {r4-r11,pc}
;;;2338   
                          ENDP

                  |L18.176|
                          DCD      ||area_number.25||
                  |L18.180|
                          DCD      g_pFingerBaseImage
                  |L18.184|
                          DCD      g_pFingerHop1BaseImage
                  |L18.188|
                          DCD      FullSharedBuff

                          AREA ||i.public_func_PalmTouch_handler||, CODE, READONLY, ALIGN=2

                  public_func_PalmTouch_handler PROC
;;;1540   #define PALM_KEEP_FRM		(10)
;;;1541   void public_func_PalmTouch_handler(void)
000000  e92d4ff0          PUSH     {r4-r11,lr}
;;;1542   {
000004  b08f              SUB      sp,sp,#0x3c
;;;1543   	static uint8_t ucFrameCnt[POSBUF_]  = {0,};
;;;1544   //	static uint16_t usPrevMaxCellNum[POSBUF_]  = {0,}; // NOTE : Not used!!
;;;1545   	static uint8_t ucPalmContCnt[POSBUF_]  = {0,};
;;;1546   	static uint8_t ucParNum[POSBUF_]  = {0,};
;;;1547   	static tXY_t ucPalmPos[POSBUF_] ;
;;;1548   	static tRect_t ucPalmRect[POSBUF_] ;
;;;1549   	uint8_t ucParCnt[POSBUF_] = {0,};
000006  2000              MOVS     r0,#0
000008  9000              STR      r0,[sp,#0]
00000a  9001              STR      r0,[sp,#4]
;;;1550   	uint8_t ucParBF[POSBUF_] = {0,};
;;;1551   	bool_t bIsPalm[POSBUF_] = {0,};
;;;1552   	uint8_t ucPalmExpect[POSBUF_] = {0,};
;;;1553   	int cl;
;;;1554   	
;;;1555   //    if(!sptPalmTouchConf->bEnable) return;
;;;1556   
;;;1557   //	tMemConf_t       * ptMemConf = (tMemConf_t *)param1;
;;;1558   //	tAlgorithmInfo_t * ptInfo     = (tAlgorithmInfo_t *)param2;
;;;1559   
;;;1560   //	sptPalmTouchConf->bPalmExpect = NO;
;;;1561   
;;;1562   	thisInfo->bIsPalm = NO;
00000c  f8dfa440          LDR      r10,|L19.1104|
000010  9002              STR      r0,[sp,#8]            ;1550
000012  9003              STR      r0,[sp,#0xc]          ;1550
000014  9004              STR      r0,[sp,#0x10]         ;1550
000016  9005              STR      r0,[sp,#0x14]         ;1551
000018  9006              STR      r0,[sp,#0x18]         ;1551
00001a  9007              STR      r0,[sp,#0x1c]         ;1551
00001c  9008              STR      r0,[sp,#0x20]         ;1552
00001e  9009              STR      r0,[sp,#0x24]         ;1552
000020  900a              STR      r0,[sp,#0x28]         ;1552
000022  900b              STR      r0,[sp,#0x2c]
000024  f8da1018          LDR      r1,[r10,#0x18]  ; thisInfo
;;;1563   	
;;;1564   	for( cl=MAX_TOUCH_; cl--; )
;;;1565   	{
;;;1566   		if(thisInfo->tCoord.tPos.vusR[cl] != 0)
;;;1567   		{
;;;1568   			if(thisInfo->tCoord.tPos.vusR[cl] > thisModeConf->Palm.usPalmLevel)
;;;1569   			{
;;;1570   				bIsPalm[cl] = YES;
;;;1571   				ucParNum[cl] = cl;
;;;1572   				ucPalmPos[cl] = thisInfo->tCoord.tPos.tXY[cl];
;;;1573   			}
;;;1574   //			else if(ucFrameCnt[cl] < 10
;;;1575   //				&& ((thisInfo->tCoord.tPos.vusR[cl] > 10
;;;1576   //				&& (int16_t)(thisInfo->tCoord.tPos.vusR[cl] - usPrevMaxCellNum[cl]) > 3 )
;;;1577   //				|| ((int16_t)(thisInfo->tCoord.tPos.vusR[cl] - usPrevMaxCellNum[cl]) > (3*2+1))))
;;;1578   //			{
;;;1579   //				thisInfo->tCoord.tPos.vusS[cl] = 0;
;;;1580   //				ucPalmExpect[cl] = 1;
;;;1581   //			}
;;;1582   			else
;;;1583   			{
;;;1584   				int pl, i;
;;;1585   				uint8_t ucOverlap[POSBUF_] = {0,};
;;;1586   				uint8_t ucOverlapCnt = 0;
;;;1587   
;;;1588   				for( pl=MAX_TOUCH_; pl--; )
;;;1589   				{
;;;1590   					if(ucPalmContCnt[pl] != 0)
;;;1591   					{
;;;1592   						if(ucPalmRect[pl].rs <= thisInfo->tCoord.tPos.rect[cl].re && thisInfo->tCoord.tPos.rect[cl].rs <= ucPalmRect[pl].re)
;;;1593   						{
;;;1594   							if(ucPalmRect[pl].cs <= thisInfo->tCoord.tPos.rect[cl].ce && thisInfo->tCoord.tPos.rect[cl].cs <= ucPalmRect[pl].ce)
;;;1595   								ucOverlap[ucOverlapCnt++] = pl;
;;;1596   						}
;;;1597   					}
;;;1598   				}
;;;1599   
;;;1600   				if(ucOverlapCnt != 0)
;;;1601   				{
;;;1602   					if(ucOverlapCnt > 1)
;;;1603   					{
;;;1604   						int palm_dist;
;;;1605   						int min_dist = INT32_MAX;
;;;1606   
;;;1607   						for(i=0; i<ucOverlapCnt; i++)
;;;1608   						{
;;;1609   							palm_dist = algorithm_coord_calc_distance(ucPalmPos[ucOverlap[i]], thisInfo->tCoord.tPos.tXY[cl]);
;;;1610   							if(min_dist > palm_dist)
;;;1611   								min_dist = palm_dist, pl = ucOverlap[i];
;;;1612   						}
;;;1613   					}
;;;1614   					else
;;;1615   						pl = ucOverlap[0];
;;;1616   
;;;1617   					bIsPalm[cl] = YES;
;;;1618   					ucParCnt[pl]++;
;;;1619   					ucParBF[pl] |= _BV(cl);
;;;1620   					if(ucPalmContCnt[cl] == 0)
;;;1621   						ucParNum[cl] = ucParNum[pl];
;;;1622   
;;;1623   					ucPalmPos[cl] = thisInfo->tCoord.tPos.tXY[cl];
;;;1624   				}
;;;1625   			}
;;;1626   
;;;1627   			if( ucFrameCnt[cl] < 10 )
;;;1628   				ucFrameCnt[cl]++;
;;;1629   		}
;;;1630   		else
;;;1631   			ucFrameCnt[cl] = 0;
;;;1632   	}
;;;1633   
;;;1634   	for( cl=MAX_TOUCH_; cl--;)
;;;1635   	{
;;;1636   		if(ucParCnt[cl] > 1)
;;;1637   		{
;;;1638   			int max_palm_num = -1;
;;;1639   			int max_palm_size = 0;
;;;1640   
;;;1641   			if(bIsPalm[cl] == NO)
;;;1642   			{
;;;1643   				int pl;
;;;1644   
;;;1645   				for( pl=MAX_TOUCH_; pl--;)
;;;1646   				{
;;;1647   					if((ucParBF[cl] & _BV(pl)) != 0)
;;;1648   					{
;;;1649   						if(max_palm_size < thisInfo->tCoord.tPos.vusR[pl])
;;;1650   						{
;;;1651   							max_palm_num = pl;
;;;1652   							max_palm_size = thisInfo->tCoord.tPos.vusR[pl];
;;;1653   						}
;;;1654   					}
;;;1655   				}
;;;1656   
;;;1657   				for( pl=MAX_TOUCH_; pl--;)
;;;1658   				{
;;;1659   					if((ucParBF[cl] & _BV(pl)) != 0)
;;;1660   						ucParNum[pl] = max_palm_num;
;;;1661   				}
;;;1662   
;;;1663   				ucPalmContCnt[cl] = 0;
;;;1664   			}
;;;1665   		}
;;;1666   	}
;;;1667   
;;;1668   	for( cl=MAX_TOUCH_; cl--;)
;;;1669   	{
;;;1670   		if(bIsPalm[cl] == YES)
;;;1671   		{
;;;1672   			if(ucParNum[cl] != cl)
;;;1673   			{
;;;1674   				int pl = ucParNum[cl];
;;;1675   				int palm_dist;
;;;1676   
;;;1677   				if(thisInfo->tCoord.tPos.vusR[pl] == 0 && ucPalmContCnt[cl] != 0)
;;;1678   				{
;;;1679   					int pcl;
;;;1680   					int max_palm_num = -1;
;;;1681   					int max_palm_size = 0;
;;;1682   
;;;1683   					for( pcl=MAX_TOUCH_; pcl--;)
;;;1684   					{
;;;1685   						if(pcl != cl && bIsPalm[pcl] == YES)
;;;1686   						{
;;;1687   							if(ucPalmRect[pl].rs <= thisInfo->tCoord.tPos.rect[pcl].re && thisInfo->tCoord.tPos.rect[pcl].rs <= ucPalmRect[pl].re)
;;;1688   							{
;;;1689   								if(max_palm_size < thisInfo->tCoord.tPos.vusR[pcl])
;;;1690   									max_palm_size = thisInfo->tCoord.tPos.vusR[pcl], max_palm_num = pcl;
;;;1691   							}
;;;1692   						}
;;;1693   					}
;;;1694   
;;;1695   					if(max_palm_num != -1)
;;;1696   					{
;;;1697   
;;;1698   						ucParNum[cl] = max_palm_num;
;;;1699   						for( pcl=MAX_TOUCH_; pcl--;)
;;;1700   						{
;;;1701   							if(ucPalmContCnt[pcl] != 0)
;;;1702   							{
;;;1703   								if(ucParNum[pcl] == pl)
;;;1704   									ucParNum[pcl] = max_palm_num;
;;;1705   							}
;;;1706   						}
;;;1707   					}
;;;1708   					else
;;;1709   						ucParNum[cl] = cl;
;;;1710   				}
;;;1711   
;;;1712   				if(ucPalmContCnt[pl] != 0)
;;;1713   				{
;;;1714   					palm_dist = algorithm_coord_calc_distance(ucPalmPos[pl], ucPalmPos[cl]);
;;;1715   					if(PALM_VALID_AREA < palm_dist)
;;;1716   						bIsPalm[cl] = NO;
;;;1717   				}
;;;1718   				else
;;;1719   					bIsPalm[cl] = NO;
;;;1720   			}
;;;1721   		}
;;;1722   
;;;1723   		if(bIsPalm[cl] == YES)
;;;1724   		{
;;;1725   			ucPalmExpect[cl] = 1;
;;;1726   			ucPalmContCnt[cl] = PALM_KEEP_FRM;
;;;1727   			ucPalmRect[cl] = thisInfo->tCoord.tPos.rect[cl];
;;;1728   			ucPalmPos[cl] = thisInfo->tCoord.tPos.tXY[cl];
;;;1729   			thisInfo->tCoord.tPos.vusS[cl] = 0;
;;;1730   
;;;1731   			if(ucPalmRect[cl].rs > 0)
;;;1732   				ucPalmRect[cl].rs--;
;;;1733   			if(ucPalmRect[cl].re < (ROW_MAX - 1))
;;;1734   				ucPalmRect[cl].re++;
;;;1735   			if(ucPalmRect[cl].cs > 0)
;;;1736   				ucPalmRect[cl].cs--;
;;;1737   			if(ucPalmRect[cl].ce < (COL_MAX - 1))
;;;1738   				ucPalmRect[cl].ce++;
;;;1739   			
;;;1740   			thisInfo->bIsPalm = YES;
;;;1741   			thisInfo->tCoord.tPos.sFinger_--;
;;;1742   		}
;;;1743   	}
;;;1744   
;;;1745   	for( cl=MAX_TOUCH_; cl--;)
;;;1746   	{
;;;1747   		if(ucPalmExpect[cl] != 0)
;;;1748   		{
;;;1749   			int pl;
;;;1750   //			tRect_t ori_rect, cmp_rect; // NOTE : not used
;;;1751   			tRect_t ori_rect;
;;;1752   
;;;1753   #if (CUSTOMER == MODEL_DEF_QHD_92407 || CUSTOMER == MODEL_DEF_QHD_92407_FLIP)
;;;1754   			int offset = 5;
;;;1755   #else
;;;1756   			int offset = 1;
;;;1757   #endif
;;;1758   			
;;;1759               if(thisInfo->tCoord.tPos.rect[cl].rs > (offset-1))
;;;1760   				ori_rect.rs = thisInfo->tCoord.tPos.rect[cl].rs - offset;
;;;1761               else
;;;1762                   ori_rect.rs = 0;
;;;1763   			if(thisInfo->tCoord.tPos.rect[cl].re < (ROW_MAX - offset))
;;;1764   				ori_rect.re = thisInfo->tCoord.tPos.rect[cl].re + offset;
;;;1765               else
;;;1766                   ori_rect.re = ROW_MAX - 1;
;;;1767   			if(thisInfo->tCoord.tPos.rect[cl].cs > (offset-1))
;;;1768   				ori_rect.cs = thisInfo->tCoord.tPos.rect[cl].cs - offset;
;;;1769               else
;;;1770                   ori_rect.cs = 0;
;;;1771   			if(thisInfo->tCoord.tPos.rect[cl].ce < (COL_MAX - offset))
;;;1772   				ori_rect.ce = thisInfo->tCoord.tPos.rect[cl].ce + offset;
;;;1773               else
;;;1774                   ori_rect.ce = COL_MAX - 1;
;;;1775               
;;;1776               for( pl=MAX_TOUCH_; pl--;)
;;;1777   			{
;;;1778   				if(thisInfo->tCoord.tPos.vusS[pl])
;;;1779   				{
;;;1780   					if(ori_rect.rs <= thisInfo->tCoord.tPos.rect[pl].re+1 && thisInfo->tCoord.tPos.rect[pl].rs-1 <= ori_rect.re)
;;;1781   					{
;;;1782   						if(ori_rect.cs <= thisInfo->tCoord.tPos.rect[pl].ce+1 && thisInfo->tCoord.tPos.rect[pl].cs-1 <= ori_rect.ce)
;;;1783   						{
;;;1784   							thisInfo->tCoord.tPos.vusS[pl] = 0;
;;;1785   						}
;;;1786   					}
;;;1787   				}
;;;1788   			}
;;;1789   		}
;;;1790   
;;;1791   		if(ucPalmContCnt[cl] != 0)
;;;1792   			ucPalmContCnt[cl]--;
;;;1793   
;;;1794   //		usPrevMaxCellNum[cl] = thisInfo->tCoord.tPos.vusR[cl];  // NOTE : Not used!!		
;;;1795   	}
;;;1796   
;;;1797   //	public_protocol_LogCode(LT_DIAGNOSIS, (220)/*System is Entered!*/);
;;;1798   }
000028  2409              MOVS     r4,#9
00002a  f5015180          ADD      r1,r1,#0x1000         ;1562
00002e  f10d0930          ADD      r9,sp,#0x30           ;1585
000032  f881032a          STRB     r0,[r1,#0x32a]        ;1562
000036  bf00              NOP                            ;1566
                  |L19.56|
000038  f8da0018          LDR      r0,[r10,#0x18]        ;1566  ; thisInfo
00003c  eb000144          ADD      r1,r0,r4,LSL #1       ;1566
000040  f8b11503          LDRH     r1,[r1,#0x503]        ;1566
000044  2900              CMP      r1,#0                 ;1566
000046  d07d              BEQ      |L19.324|
000048  f8da2014          LDR      r2,[r10,#0x14]        ;1568  ; thisModeConf
00004c  f8b22201          LDRH     r2,[r2,#0x201]        ;1568
000050  4291              CMP      r1,r2                 ;1568
000052  d910              BLS      |L19.118|
000054  a906              ADD      r1,sp,#0x18           ;1570
000056  2201              MOVS     r2,#1                 ;1570
000058  550a              STRB     r2,[r1,r4]            ;1570
00005a  49fe              LDR      r1,|L19.1108|
00005c  eb0000c4          ADD      r0,r0,r4,LSL #3       ;1572
000060  550c              STRB     r4,[r1,r4]            ;1571
000062  310a              ADDS     r1,r1,#0xa            ;1572
000064  eb0101c4          ADD      r1,r1,r4,LSL #3       ;1572
000068  f8d0249f          LDR      r2,[r0,#0x49f]        ;1572
00006c  600a              STR      r2,[r1,#0]            ;1572
00006e  f8d004a3          LDR      r0,[r0,#0x4a3]        ;1572
000072  6048              STR      r0,[r1,#4]            ;1572
000074  e08b              B        |L19.398|
                  |L19.118|
000076  2100              MOVS     r1,#0                 ;1585
000078  910c              STR      r1,[sp,#0x30]         ;1585
00007a  910d              STR      r1,[sp,#0x34]         ;1585
00007c  460d              MOV      r5,r1                 ;1586
00007e  910e              STR      r1,[sp,#0x38]         ;1588
000080  49f5              LDR      r1,|L19.1112|
000082  2700              MOVS     r7,#0                 ;1588
000084  f101065b          ADD      r6,r1,#0x5b           ;1588
000088  f1060224          ADD      r2,r6,#0x24           ;1588
00008c  1c53              ADDS     r3,r2,#1              ;1588
00008e  f1060c26          ADD      r12,r6,#0x26          ;1588
000092  f04f080a          MOV      r8,#0xa               ;1588
000096  eb000084          ADD      r0,r0,r4,LSL #2       ;1592
00009a  3627              ADDS     r6,r6,#0x27           ;1592
                  |L19.156|
00009c  f811b901          LDRB     r11,[r1],#-1          ;1590
0000a0  f1bb0f00          CMP      r11,#0                ;1590
0000a4  d01d              BEQ      |L19.226|
0000a6  f992b000          LDRSB    r11,[r2,#0]           ;1592
0000aa  f990e518          LDRSB    lr,[r0,#0x518]        ;1592
0000ae  45f3              CMP      r11,lr                ;1592
0000b0  dc17              BGT      |L19.226|
0000b2  f990b517          LDRSB    r11,[r0,#0x517]       ;1592
0000b6  f993e000          LDRSB    lr,[r3,#0]            ;1592
0000ba  45f3              CMP      r11,lr                ;1592
0000bc  dc11              BGT      |L19.226|
0000be  f99cb000          LDRSB    r11,[r12,#0]          ;1594
0000c2  f990e51a          LDRSB    lr,[r0,#0x51a]        ;1594
0000c6  45f3              CMP      r11,lr                ;1594
0000c8  dc0b              BGT      |L19.226|
0000ca  f990b519          LDRSB    r11,[r0,#0x519]       ;1594
0000ce  f996e000          LDRSB    lr,[r6,#0]            ;1594
0000d2  45f3              CMP      r11,lr                ;1594
0000d4  dc05              BGT      |L19.226|
0000d6  f1c70b09          RSB      r11,r7,#9             ;1595
0000da  f809b005          STRB     r11,[r9,r5]           ;1595
0000de  1c6d              ADDS     r5,r5,#1              ;1595
0000e0  b2ed              UXTB     r5,r5                 ;1595
                  |L19.226|
0000e2  1f12              SUBS     r2,r2,#4              ;1595
0000e4  1f1b              SUBS     r3,r3,#4              ;1595
0000e6  1f36              SUBS     r6,r6,#4              ;1595
0000e8  1c7f              ADDS     r7,r7,#1              ;1595
0000ea  f1b80801          SUBS     r8,r8,#1              ;1595
0000ee  f1ac0c04          SUB      r12,r12,#4            ;1595
0000f2  d1d3              BNE      |L19.156|
0000f4  f04f36ff          MOV      r6,#0xffffffff        ;1588
0000f8  2d00              CMP      r5,#0                 ;1600
0000fa  d048              BEQ      |L19.398|
0000fc  2d01              CMP      r5,#1                 ;1602
0000fe  bf98              IT       LS                    ;1615
000100  f89d6030          LDRBLS   r6,[sp,#0x30]         ;1615
000104  d923              BLS      |L19.334|
000106  f06f4700          MVN      r7,#0x80000000        ;1605
00010a  f04f0800          MOV      r8,#0                 ;1607
00010e  2d00              CMP      r5,#0                 ;1607
000110  bfc8              IT       GT                    ;1572
000112  f8dfb348          LDRGT    r11,|L19.1116|
000116  dd1a              BLE      |L19.334|
                  |L19.280|
000118  f8da0018          LDR      r0,[r10,#0x18]        ;1609  ; thisInfo
00011c  eb0000c4          ADD      r0,r0,r4,LSL #3       ;1609
000120  f8d0249f          LDR      r2,[r0,#0x49f]        ;1609
000124  f8d034a3          LDR      r3,[r0,#0x4a3]        ;1609
000128  f8190008          LDRB     r0,[r9,r8]            ;1609
00012c  eb0b01c0          ADD      r1,r11,r0,LSL #3      ;1609
000130  6808              LDR      r0,[r1,#0]            ;1609
000132  6849              LDR      r1,[r1,#4]            ;1609
000134  f7fffffe          BL       algorithm_coord_calc_distance
000138  4287              CMP      r7,r0                 ;1610
00013a  bfc4              ITT      GT                    ;1611
00013c  4607              MOVGT    r7,r0                 ;1611
00013e  f8196008          LDRBGT   r6,[r9,r8]            ;1611
000142  e000              B        |L19.326|
                  |L19.324|
000144  e02a              B        |L19.412|
                  |L19.326|
000146  f1080801          ADD      r8,r8,#1              ;1611
00014a  45a8              CMP      r8,r5                 ;1611
00014c  dbe4              BLT      |L19.280|
                  |L19.334|
00014e  a906              ADD      r1,sp,#0x18           ;1617
000150  2001              MOVS     r0,#1                 ;1617
000152  5508              STRB     r0,[r1,r4]            ;1617
000154  f81d2006          LDRB     r2,[sp,r6]            ;1618
000158  a903              ADD      r1,sp,#0xc            ;1619
00015a  1c52              ADDS     r2,r2,#1              ;1618
00015c  f80d2006          STRB     r2,[sp,r6]            ;1618
000160  5d8a              LDRB     r2,[r1,r6]            ;1619
000162  40a0              LSLS     r0,r0,r4              ;1619
000164  4310              ORRS     r0,r0,r2              ;1619
000166  5588              STRB     r0,[r1,r6]            ;1619
000168  48bd              LDR      r0,|L19.1120|
00016a  5d00              LDRB     r0,[r0,r4]            ;1620
00016c  b910              CBNZ     r0,|L19.372|
00016e  48b9              LDR      r0,|L19.1108|
000170  5d81              LDRB     r1,[r0,r6]            ;1621
000172  5501              STRB     r1,[r0,r4]            ;1621
                  |L19.372|
000174  f8da1018          LDR      r1,[r10,#0x18]        ;1623  ; thisInfo
000178  48b8              LDR      r0,|L19.1116|
00017a  eb0101c4          ADD      r1,r1,r4,LSL #3       ;1623
00017e  eb0000c4          ADD      r0,r0,r4,LSL #3       ;1623
000182  f8d1249f          LDR      r2,[r1,#0x49f]        ;1623
000186  6002              STR      r2,[r0,#0]            ;1623
000188  f8d114a3          LDR      r1,[r1,#0x4a3]        ;1623
00018c  6041              STR      r1,[r0,#4]            ;1623
                  |L19.398|
00018e  48b5              LDR      r0,|L19.1124|
000190  5d01              LDRB     r1,[r0,r4]            ;1627
000192  290a              CMP      r1,#0xa               ;1627
000194  bf3c              ITT      CC                    ;1627
000196  1c49              ADDCC    r1,r1,#1              ;1627
000198  5501              STRBCC   r1,[r0,r4]            ;1628
00019a  e002              B        |L19.418|
                  |L19.412|
00019c  49b1              LDR      r1,|L19.1124|
00019e  2000              MOVS     r0,#0                 ;1631
0001a0  5508              STRB     r0,[r1,r4]            ;1631
                  |L19.418|
0001a2  1e64              SUBS     r4,r4,#1              ;1631
0001a4  f4bfaf48          BCS      |L19.56|
0001a8  48a9              LDR      r0,|L19.1104|
0001aa  f8dfa2a8          LDR      r10,|L19.1108|
0001ae  2209              MOVS     r2,#9
0001b0  f8d09018          LDR      r9,[r0,#0x18]         ;1570  ; thisInfo
0001b4  46eb              MOV      r11,sp                ;1549
0001b6  ad06              ADD      r5,sp,#0x18           ;1551
0001b8  2001              MOVS     r0,#1                 ;1570
0001ba  f04f0e00          MOV      lr,#0                 ;1570
0001be  f1aa060a          SUB      r6,r10,#0xa           ;1588
0001c2  bf00              NOP                            ;1636
                  |L19.452|
0001c4  f81b1002          LDRB     r1,[r11,r2]           ;1636
0001c8  2901              CMP      r1,#1                 ;1636
0001ca  d939              BLS      |L19.576|
0001cc  5ca9              LDRB     r1,[r5,r2]            ;1641
0001ce  f04f37ff          MOV      r7,#0xffffffff        ;1638
0001d2  2300              MOVS     r3,#0                 ;1639
0001d4  bba1              CBNZ     r1,|L19.576|
0001d6  f10d0c0c          ADD      r12,sp,#0xc           ;1550
0001da  210a              MOVS     r1,#0xa               ;1645
0001dc  f81cc002          LDRB     r12,[r12,r2]          ;1647
0001e0  2401              MOVS     r4,#1                 ;1645
                  |L19.482|
0001e2  1e49              SUBS     r1,r1,#1              ;1647
0001e4  fa00f801          LSL      r8,r0,r1              ;1647
0001e8  ea1c0f08          TST      r12,r8                ;1647
0001ec  d007              BEQ      |L19.510|
0001ee  eb090841          ADD      r8,r9,r1,LSL #1       ;1649
0001f2  f8b88503          LDRH     r8,[r8,#0x503]        ;1649
0001f6  4598              CMP      r8,r3                 ;1649
0001f8  bfc4              ITT      GT                    ;1651
0001fa  460f              MOVGT    r7,r1                 ;1651
0001fc  4643              MOVGT    r3,r8                 ;1651
                  |L19.510|
0001fe  1c64              ADDS     r4,r4,#1              ;1651
000200  2c0a              CMP      r4,#0xa               ;1652
000202  ddee              BLE      |L19.482|
000204  2100              MOVS     r1,#0
000206  f10a030a          ADD      r3,r10,#0xa           ;1657
00020a  2405              MOVS     r4,#5                 ;1657
00020c  fa5ff787          UXTB.W   r7,r7                 ;1660
                  |L19.528|
000210  f1c10809          RSB      r8,r1,#9              ;1659
000214  fa00f808          LSL      r8,r0,r8              ;1659
000218  ea1c0f08          TST      r12,r8                ;1659
00021c  bf18              IT       NE                    ;1660
00021e  f8037c01          STRBNE   r7,[r3,#-1]           ;1660
000222  f1c10808          RSB      r8,r1,#8              ;1659
000226  fa00f808          LSL      r8,r0,r8              ;1659
00022a  ea1c0f08          TST      r12,r8                ;1659
00022e  bf18              IT       NE                    ;1660
000230  f8037c02          STRBNE   r7,[r3,#-2]           ;1660
000234  1c89              ADDS     r1,r1,#2              ;1660
000236  1e9b              SUBS     r3,r3,#2              ;1660
000238  1e64              SUBS     r4,r4,#1              ;1660
00023a  d1e9              BNE      |L19.528|
00023c  f806e002          STRB     lr,[r6,r2]            ;1663
                  |L19.576|
000240  1e52              SUBS     r2,r2,#1              ;1663
000242  d2bf              BCS      |L19.452|
000244  2409              MOVS     r4,#9
                  |L19.582|
000246  5d28              LDRB     r0,[r5,r4]            ;1670
000248  2801              CMP      r0,#1                 ;1670
00024a  d178              BNE      |L19.830|
00024c  f8dfe204          LDR      lr,|L19.1108|
000250  f81e1004          LDRB     r1,[lr,r4]            ;1672
000254  42a1              CMP      r1,r4                 ;1672
000256  d06e              BEQ      |L19.822|
000258  487d              LDR      r0,|L19.1104|
00025a  6983              LDR      r3,[r0,#0x18]         ;1677  ; thisInfo
00025c  eb030041          ADD      r0,r3,r1,LSL #1       ;1677
000260  f8b00503          LDRH     r0,[r0,#0x503]        ;1677
000264  bbe8              CBNZ     r0,|L19.738|
000266  5d30              LDRB     r0,[r6,r4]            ;1677
000268  b3d8              CBZ      r0,|L19.738|
00026a  200a              MOVS     r0,#0xa               ;1683
00026c  f10e0c5a          ADD      r12,lr,#0x5a          ;1588
000270  f04f3aff          MOV      r10,#0xffffffff       ;1680
000274  f04f0800          MOV      r8,#0                 ;1681
000278  2201              MOVS     r2,#1                 ;1683
00027a  eb0c0981          ADD      r9,r12,r1,LSL #2      ;1687
                  |L19.638|
00027e  1e40              SUBS     r0,r0,#1              ;1687
000280  42a0              CMP      r0,r4                 ;1685
000282  d01a              BEQ      |L19.698|
000284  f815c000          LDRB     r12,[r5,r0]           ;1685
000288  f1bc0f01          CMP      r12,#1                ;1685
00028c  d115              BNE      |L19.698|
00028e  eb030c80          ADD      r12,r3,r0,LSL #2      ;1687
000292  f9997000          LDRSB    r7,[r9,#0]            ;1687
000296  f99cb518          LDRSB    r11,[r12,#0x518]      ;1687
00029a  455f              CMP      r7,r11                ;1687
00029c  dc0d              BGT      |L19.698|
00029e  f99cc517          LDRSB    r12,[r12,#0x517]      ;1687
0002a2  f9997001          LDRSB    r7,[r9,#1]            ;1687
0002a6  45bc              CMP      r12,r7                ;1687
0002a8  dc07              BGT      |L19.698|
0002aa  eb030c40          ADD      r12,r3,r0,LSL #1      ;1689
0002ae  f8bcc503          LDRH     r12,[r12,#0x503]      ;1689
0002b2  45e0              CMP      r8,r12                ;1689
0002b4  bfbc              ITT      LT                    ;1689
0002b6  46e0              MOVLT    r8,r12                ;1689
0002b8  4682              MOVLT    r10,r0                ;1690
                  |L19.698|
0002ba  1c52              ADDS     r2,r2,#1              ;1690
0002bc  2a0a              CMP      r2,#0xa               ;1690
0002be  ddde              BLE      |L19.638|
0002c0  f1ba3fff          CMP      r10,#0xffffffff       ;1695
0002c4  bf08              IT       EQ                    ;1709
0002c6  f80e4004          STRBEQ   r4,[lr,r4]            ;1709
0002ca  d021              BEQ      |L19.784|
0002cc  f00a03ff          AND      r3,r10,#0xff          ;1698
0002d0  f80e3004          STRB     r3,[lr,r4]            ;1698
0002d4  f106020a          ADD      r2,r6,#0xa            ;1699
0002d8  f10e000a          ADD      r0,lr,#0xa            ;1699
0002dc  f04f0c05          MOV      r12,#5                ;1699
                  |L19.736|
0002e0  e000              B        |L19.740|
                  |L19.738|
0002e2  e015              B        |L19.784|
                  |L19.740|
0002e4  f8127c01          LDRB     r7,[r2,#-1]           ;1701
0002e8  b12f              CBZ      r7,|L19.758|
0002ea  f8107c01          LDRB     r7,[r0,#-1]           ;1703
0002ee  428f              CMP      r7,r1                 ;1703
0002f0  bf08              IT       EQ                    ;1704
0002f2  f8003c01          STRBEQ   r3,[r0,#-1]           ;1704
                  |L19.758|
0002f6  f8127d02          LDRB     r7,[r2,#-2]!          ;1701
0002fa  b12f              CBZ      r7,|L19.776|
0002fc  f8107c02          LDRB     r7,[r0,#-2]           ;1703
000300  428f              CMP      r7,r1                 ;1703
000302  bf08              IT       EQ                    ;1704
000304  f8003c02          STRBEQ   r3,[r0,#-2]           ;1704
                  |L19.776|
000308  1e80              SUBS     r0,r0,#2              ;1704
00030a  f1bc0c01          SUBS     r12,r12,#1            ;1704
00030e  d1e7              BNE      |L19.736|
                  |L19.784|
000310  5c70              LDRB     r0,[r6,r1]            ;1712
000312  b168              CBZ      r0,|L19.816|
000314  4851              LDR      r0,|L19.1116|
000316  eb0003c4          ADD      r3,r0,r4,LSL #3       ;1714
00031a  eb0001c1          ADD      r1,r0,r1,LSL #3       ;1714
00031e  681a              LDR      r2,[r3,#0]            ;1714
000320  6808              LDR      r0,[r1,#0]            ;1714
000322  685b              LDR      r3,[r3,#4]            ;1714
000324  6849              LDR      r1,[r1,#4]            ;1714
000326  f7fffffe          BL       algorithm_coord_calc_distance
00032a  f5b05fb0          CMP      r0,#0x1600            ;1715
00032e  dd03              BLE      |L19.824|
                  |L19.816|
000330  2000              MOVS     r0,#0                 ;1719
000332  5528              STRB     r0,[r5,r4]            ;1719
000334  e003              B        |L19.830|
                  |L19.822|
000336  e073              B        |L19.1056|
                  |L19.824|
000338  5d28              LDRB     r0,[r5,r4]            ;1723
00033a  2801              CMP      r0,#1                 ;1723
00033c  d071              BEQ      |L19.1058|
                  |L19.830|
00033e  1e64              SUBS     r4,r4,#1              ;1723
000340  d281              BCS      |L19.582|
000342  4843              LDR      r0,|L19.1104|
000344  2209              MOVS     r2,#9
000346  f10d0e24          ADD      lr,sp,#0x24           ;1552
00034a  6983              LDR      r3,[r0,#0x18]         ;1552  ; thisInfo
00034c  f04f0900          MOV      r9,#0                 ;1552
                  |L19.848|
000350  f81e0002          LDRB     r0,[lr,r2]            ;1747
000354  b3f0              CBZ      r0,|L19.980|
000356  eb030082          ADD      r0,r3,r2,LSL #2       ;1759
00035a  f9901517          LDRSB    r1,[r0,#0x517]        ;1759
00035e  2900              CMP      r1,#0                 ;1759
000360  bfd2              ITEE     LE                    ;1759
000362  f3690c07          BFILE    r12,r9,#0,#8          ;1759
000366  1e49              SUBGT    r1,r1,#1              ;1759
000368  f3610c07          BFIGT    r12,r1,#0,#8          ;1759
00036c  f9901518          LDRSB    r1,[r0,#0x518]        ;1763
000370  242f              MOVS     r4,#0x2f              ;1763
000372  292f              CMP      r1,#0x2f              ;1763
000374  bfba              ITTE     LT                    ;1763
000376  1c49              ADDLT    r1,r1,#1              ;1763
000378  f3612c0f          BFILT    r12,r1,#8,#8          ;1763
00037c  f3642c0f          BFIGE    r12,r4,#8,#8          ;1763
000380  f9901519          LDRSB    r1,[r0,#0x519]        ;1767
000384  2900              CMP      r1,#0                 ;1767
000386  bfc6              ITTE     GT                    ;1767
000388  1e49              SUBGT    r1,r1,#1              ;1767
00038a  f3614c17          BFIGT    r12,r1,#16,#8         ;1767
00038e  f3694c17          BFILE    r12,r9,#16,#8         ;1767
000392  f990051a          LDRSB    r0,[r0,#0x51a]        ;1771
000396  2153              MOVS     r1,#0x53              ;1771
000398  2853              CMP      r0,#0x53              ;1771
00039a  bfba              ITTE     LT                    ;1771
00039c  1c40              ADDLT    r0,r0,#1              ;1771
00039e  f3606c1f          BFILT    r12,r0,#24,#8         ;1771
0003a2  f3616c1f          BFIGE    r12,r1,#24,#8         ;1771
0003a6  200a              MOVS     r0,#0xa               ;1776
0003a8  2101              MOVS     r1,#1                 ;1776
0003aa  fa4ff78c          SXTB     r7,r12                ;1776
0003ae  f34c2507          SBFX     r5,r12,#8,#8          ;1776
0003b2  f34c4a07          SBFX     r10,r12,#16,#8        ;1776
0003b6  ea4f6b2c          ASR      r11,r12,#24           ;1776
                  |L19.954|
0003ba  1e40              SUBS     r0,r0,#1              ;1776
0003bc  eb030440          ADD      r4,r3,r0,LSL #1       ;1778
0003c0  f8b4c4ef          LDRH     r12,[r4,#0x4ef]       ;1778
0003c4  f1bc0f00          CMP      r12,#0                ;1778
0003c8  d01d              BEQ      |L19.1030|
0003ca  eb030c80          ADD      r12,r3,r0,LSL #2      ;1780
0003ce  f99c8518          LDRSB    r8,[r12,#0x518]       ;1780
0003d2  e000              B        |L19.982|
                  |L19.980|
0003d4  e01a              B        |L19.1036|
                  |L19.982|
0003d6  f1080801          ADD      r8,r8,#1              ;1780
0003da  4547              CMP      r7,r8                 ;1780
0003dc  dc13              BGT      |L19.1030|
0003de  f99c8517          LDRSB    r8,[r12,#0x517]       ;1780
0003e2  f1a80801          SUB      r8,r8,#1              ;1780
0003e6  45a8              CMP      r8,r5                 ;1780
0003e8  dc0d              BGT      |L19.1030|
0003ea  f99c851a          LDRSB    r8,[r12,#0x51a]       ;1782
0003ee  f1080801          ADD      r8,r8,#1              ;1782
0003f2  45c2              CMP      r10,r8                ;1782
0003f4  dc07              BGT      |L19.1030|
0003f6  f99cc519          LDRSB    r12,[r12,#0x519]      ;1782
0003fa  f1ac0c01          SUB      r12,r12,#1            ;1782
0003fe  45dc              CMP      r12,r11               ;1782
000400  bfd8              IT       LE                    ;1784
000402  f8a494ef          STRHLE   r9,[r4,#0x4ef]        ;1784
                  |L19.1030|
000406  1c49              ADDS     r1,r1,#1              ;1784
000408  290a              CMP      r1,#0xa               ;1784
00040a  ddd6              BLE      |L19.954|
                  |L19.1036|
00040c  5cb0              LDRB     r0,[r6,r2]            ;1791
00040e  2800              CMP      r0,#0                 ;1791
000410  bf1c              ITT      NE                    ;1791
000412  1e40              SUBNE    r0,r0,#1              ;1791
000414  54b0              STRBNE   r0,[r6,r2]            ;1792
000416  1e52              SUBS     r2,r2,#1              ;1792
000418  d29a              BCS      |L19.848|
00041a  b00f              ADD      sp,sp,#0x3c
00041c  e8bd8ff0          POP      {r4-r11,pc}
                  |L19.1056|
000420  e7ff              B        |L19.1058|
                  |L19.1058|
000422  a809              ADD      r0,sp,#0x24           ;1725
000424  2301              MOVS     r3,#1                 ;1725
000426  5503              STRB     r3,[r0,r4]            ;1725
000428  4909              LDR      r1,|L19.1104|
00042a  200a              MOVS     r0,#0xa               ;1726
00042c  5530              STRB     r0,[r6,r4]            ;1726
00042e  6989              LDR      r1,[r1,#0x18]         ;1727  ; thisInfo
000430  480d              LDR      r0,|L19.1128|
000432  eb010284          ADD      r2,r1,r4,LSL #2       ;1727
000436  eb000084          ADD      r0,r0,r4,LSL #2       ;1727
00043a  f8d22517          LDR      r2,[r2,#0x517]        ;1727
00043e  6002              STR      r2,[r0,#0]            ;1727
000440  4a06              LDR      r2,|L19.1116|
000442  eb020cc4          ADD      r12,r2,r4,LSL #3      ;1728
000446  eb0102c4          ADD      r2,r1,r4,LSL #3       ;1728
00044a  f8d2749f          LDR      r7,[r2,#0x49f]        ;1728
00044e  e00d              B        |L19.1132|
                  |L19.1104|
                          DCD      ||area_number.25||
                  |L19.1108|
                          DCD      ||.bss||+0x344
                  |L19.1112|
                          DCD      ||.bss||+0x343
                  |L19.1116|
                          DCD      ||.bss||+0x34e
                  |L19.1120|
                          DCD      ||.bss||+0x33a
                  |L19.1124|
                          DCD      ||.bss||+0x330
                  |L19.1128|
                          DCD      ||.bss||+0x39e
                  |L19.1132|
00046c  f8cc7000          STR      r7,[r12,#0]           ;1728
000470  f8d224a3          LDR      r2,[r2,#0x4a3]        ;1728
000474  f8cc2004          STR      r2,[r12,#4]           ;1728
000478  eb010c44          ADD      r12,r1,r4,LSL #1      ;1729
00047c  2200              MOVS     r2,#0                 ;1729
00047e  f8ac24ef          STRH     r2,[r12,#0x4ef]       ;1729
000482  f9902000          LDRSB    r2,[r0,#0]            ;1731
000486  2a00              CMP      r2,#0                 ;1731
000488  bfc4              ITT      GT                    ;1731
00048a  1e52              SUBGT    r2,r2,#1              ;1731
00048c  7002              STRBGT   r2,[r0,#0]            ;1732
00048e  f9902001          LDRSB    r2,[r0,#1]            ;1733
000492  2a2f              CMP      r2,#0x2f              ;1733
000494  bfbc              ITT      LT                    ;1733
000496  1c52              ADDLT    r2,r2,#1              ;1733
000498  7042              STRBLT   r2,[r0,#1]            ;1734
00049a  f9902002          LDRSB    r2,[r0,#2]            ;1735
00049e  2a00              CMP      r2,#0                 ;1735
0004a0  bfc4              ITT      GT                    ;1735
0004a2  1e52              SUBGT    r2,r2,#1              ;1735
0004a4  7082              STRBGT   r2,[r0,#2]            ;1736
0004a6  f9902003          LDRSB    r2,[r0,#3]            ;1737
0004aa  2a53              CMP      r2,#0x53              ;1737
0004ac  bfbc              ITT      LT                    ;1737
0004ae  1c52              ADDLT    r2,r2,#1              ;1737
0004b0  70c2              STRBLT   r2,[r0,#3]            ;1738
0004b2  f241302a          MOV      r0,#0x132a            ;1740
0004b6  5443              STRB     r3,[r0,r1]            ;1740
0004b8  f891049e          LDRB     r0,[r1,#0x49e]        ;1741
0004bc  1e40              SUBS     r0,r0,#1              ;1741
0004be  f881049e          STRB     r0,[r1,#0x49e]        ;1741
0004c2  e73c              B        |L19.830|
;;;1799   
                          ENDP


                          AREA ||.bss||, DATA, NOINIT, ALIGN=1

                  testArray
                          %        80
                  sLFOffsetRow
                          %        96
                  gvsCurrentCheckRawData_AFE_1
                          %        160
                  gvsCurrentCheckRawData_AFE_2
                          %        160
                  gvsPastCheckRawData_AFE_1
                          %        160
                  gvsPastCheckRawData_AFE_2
                          %        160
                  ucFrameCnt
                          %        10
                  ucPalmContCnt
                          %        10
                  ucParNum
                          %        10
                  ucPalmPos
                          %        80
                  ucPalmRect
                          %        40
                  sLFOffsetCol
                          %        168

                          AREA ||.constdata||, DATA, READONLY, ALIGN=2

000000  30545482          DCB      0x30,0x54,0x54,0x82
000004  5400              DCB      0x54,0x00
000006  0000              DCW      0x0000
000008  0000              DCW      0x0000
00000a  0000              DCB      0x00,0x00
00000c  0a545482          DCB      0x0a,0x54,0x54,0x82
000010  5400              DCB      0x54,0x00
000012  0000              DCW      0x0000
000014  0000              DCW      0x0000
000016  0000              DCB      0x00,0x00
000018  30545482          DCB      0x30,0x54,0x54,0x82
00001c  5100              DCB      0x51,0x00
00001e  0000              DCW      0x0000
000020  0000              DCW      0x0000
000022  0000              DCB      0x00,0x00
000024  0a545482          DCB      0x0a,0x54,0x54,0x82
000028  5100              DCB      0x51,0x00
00002a  0000              DCW      0x0000
00002c  0000              DCW      0x0000
00002e  0000              DCB      0x00,0x00
000030  0a545482          DCB      0x0a,0x54,0x54,0x82
000034  5400              DCB      0x54,0x00
000036  0000              DCW      0x0000
000038  0000              DCW      0x0000
00003a  0000              DCB      0x00,0x00
00003c  05545482          DCB      0x05,0x54,0x54,0x82
000040  5400              DCB      0x54,0x00
000042  0000              DCW      0x0000
000044  0000              DCW      0x0000

                          AREA ||.data||, DATA, ALIGN=2

                  testflag
                          DCD      0x00000000

                          AREA ||area_number.25||, DATA, ALIGN=2

                          EXPORTAS ||area_number.25||, ||.data||
                  gbSkipTouch
000000  0000              DCB      0x00,0x00
                  gusSkipTouchCnt
000002  0000              DCW      0x0000
                  pendflag
                          DCD      0x00000000
                  testcnt
                          DCD      0x00000000
                  pendcheck
                          DCD      0x00000000
                  ptModuleModeConf
                          DCD      0x00000000
                  thisModeConf
                          DCD      0x00000000
                  thisInfo
                          DCD      0x00000000
                  ptAppInfo
                          DCD      0x00000000
                  DebugAlgorithmInfo
                          DCD      0x00000000
                  tTempAlgorithmInfoDebug
                          DCD      0x00000000
                  realOutInPos
                          %        8
                  ulMuxSensingOrder
                          DCD      0x00000000
                          DCD      0x00000001
                          DCD      0x00000002
                          DCD      0x00000003
                          DCD      0x00000004
                          DCD      0x00000005
                          DCD      0x00000006
                          DCD      0x00000007
                          DCD      0x00000008
                          DCD      0x00000009
                          DCD      0x00000000
                          DCD      0x00000000
                          DCD      0x00000000
                          DCD      0x00000000
                          DCD      0x00000000
                          DCD      0x00000000

                          AREA ||area_number.26||, DATA, ALIGN=2

                          EXPORTAS ||area_number.26||, ||.data||
                  testvusS
                          DCD      0x00000000

                          AREA ||area_number.27||, DATA, ALIGN=0

                          EXPORTAS ||area_number.27||, ||.data||
                  DoReportOrgPos
000000  00                DCB      0x00

                          AREA ||area_number.28||, DATA, ALIGN=0

                          EXPORTAS ||area_number.28||, ||.data||
                  ErrorFrameProcessMode
000000  00                DCB      0x00

                          AREA ||area_number.29||, DATA, ALIGN=0

                          EXPORTAS ||area_number.29||, ||.data||
                  bRawdataStuckDebug
000000  00                DCB      0x00

                          AREA ||area_number.30||, DATA, ALIGN=2

                          EXPORTAS ||area_number.30||, ||.data||
                  ulDetecForRecovery_Cnt
                          DCD      0x00000000

                          AREA ||area_number.31||, DATA, ALIGN=0

                          EXPORTAS ||area_number.31||, ||.data||
                  gbMuxDeltaDebug
000000  00                DCB      0x00

                          AREA ||area_number.32||, DATA, ALIGN=0

                          EXPORTAS ||area_number.32||, ||.data||
                  gucDebugCol
000000  49                DCB      0x49

                          AREA ||area_number.33||, DATA, ALIGN=0

                          EXPORTAS ||area_number.33||, ||.data||
                  gucDebugRow
000000  1a                DCB      0x1a

                          AREA ||area_number.34||, DATA, ALIGN=3

                          EXPORTAS ||area_number.34||, ||.data||
                  OperStartTime
                          %        8

                          AREA ||area_number.35||, DATA, ALIGN=2

                          EXPORTAS ||area_number.35||, ||.data||
                  OperEndTime
                          DCD      0x00000000

                          AREA ||area_number.36||, DATA, ALIGN=0

                          EXPORTAS ||area_number.36||, ||.data||
                  testcrood
                          %        8

                          AREA ||i.__ARM_common_memclr4_10||, COMGROUP=__ARM_common_memclr4_10, CODE, READONLY, ALIGN=1

                  __ARM_common_memclr4_10 PROC
000000  2100              MOVS     r1,#0
000002  6001              STR      r1,[r0,#0]
000004  6041              STR      r1,[r0,#4]
000006  8101              STRH     r1,[r0,#8]
000008  4770              BX       lr
                          ENDP


;*** Start embedded assembler ***

#line 1 "..\\..\\App\\Algorithm\\algorithm.c"
	AREA ||.rev16_text||, CODE
	THUMB
	EXPORT |__asm___11_algorithm_c_testflag____REV16|
#line 388 "..\\..\\Hal\\system\\CMSIS\\cmsis_armcc.h"
|__asm___11_algorithm_c_testflag____REV16| PROC
#line 389

 rev16 r0, r0
 bx lr
	ENDP
	AREA ||.revsh_text||, CODE
	THUMB
	EXPORT |__asm___11_algorithm_c_testflag____REVSH|
#line 402
|__asm___11_algorithm_c_testflag____REVSH| PROC
#line 403

 revsh r0, r0
 bx lr
	ENDP
	AREA ||.rrx_text||, CODE
	THUMB
	EXPORT |__asm___11_algorithm_c_testflag____RRX|
#line 587
|__asm___11_algorithm_c_testflag____RRX| PROC
#line 588

 rrx r0, r0
 bx lr
	ENDP

;*** End   embedded assembler ***
